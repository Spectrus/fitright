<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitrite.me Complete Catalog - Horizontal Layout</title>
    <style>
        .orders-fab { position: fixed; bottom: 20px; right: 20px; width: 56px; height: 56px; border-radius: 50%; border: none; background:#111827; color:#fff; box-shadow: 0 8px 22px rgba(0,0,0,0.25); cursor: pointer; z-index: 1200; }
        .orders-fab:active { transform: scale(0.98); }
        .orders-panel { position: fixed; bottom: 88px; right: 20px; width: 360px; max-height: 60vh; overflow: auto; background:#fff; color:#111827; border:1px solid rgba(0,0,0,0.1); border-radius: 12px; box-shadow: 0 12px 32px rgba(0,0,0,0.25); z-index: 1200; display: none; }
        .orders-panel.show { display: block; }
        .orders-panel header { display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid #eee; font-weight:700; }
        .orders-panel .metrics { display:grid; grid-template-columns:1fr 1fr; gap:8px; padding:12px 14px; }
        .orders-panel .metric { background:#f8fafc; border:1px solid #e5e7eb; border-radius:10px; padding:10px; }
        .orders-panel .metric .label { font-size:12px; color:#64748b; }
        .orders-panel .metric .value { font-size:18px; font-weight:700; color:#111827; }
        .orders-panel .list { padding: 0 14px 12px; }
        .orders-panel .order { border-top:1px solid #f1f5f9; padding:10px 0; font-size: 14px; }
        .orders-panel .order .row { display:flex; justify-content:space-between; gap:8px; }
        .orders-panel .order .muted { color:#64748b; font-size:12px; margin-top:4px; }
        @media (max-width: 420px){ .orders-panel{ right: 10px; left: 10px; width: auto; } }
    </style>
    <script type="module">
        import { auth, onAuthStateChanged, signInAnonymously, listOrders, onOrdersSnapshot } from "./firebase.js";
        window.FitriteCatalogFirebase = { auth, onAuthStateChanged, signInAnonymously, listOrders, onOrdersSnapshot };
    </script>
    <script type="module">
        import { auth, onAuthStateChanged, signInAnonymously, onOrdersSnapshot, listOrders } from "./firebase.js";

        (function initOrdersWidget(){
            try {
                // Global lightweight orders store for other views (Sales/Data)
                try {
                    if (typeof window !== 'undefined') {
                        const bus = new EventTarget();
                        const store = {
                            _rows: [],
                            get(){ return Array.isArray(this._rows) ? this._rows.slice() : []; },
                            set(rows){ this._rows = Array.isArray(rows) ? rows : []; try { bus.dispatchEvent(new CustomEvent('update', { detail: this.get() })); } catch {} },
                            subscribe(fn){ const h=(e)=>{ try{ fn(e.detail||[]);}catch{} }; bus.addEventListener('update', h); try{ fn(this.get()); }catch{} return ()=> bus.removeEventListener('update', h); }
                        };
                        window.FitriteOrders = window.FitriteOrders || store;
                        // If another store existed, keep it but ensure methods
                        if (!window.FitriteOrders.get) window.FitriteOrders.get = store.get.bind(window.FitriteOrders);
                        if (!window.FitriteOrders.set) window.FitriteOrders.set = store.set.bind(window.FitriteOrders);
                        if (!window.FitriteOrders.subscribe) window.FitriteOrders.subscribe = store.subscribe.bind(window.FitriteOrders);
                    }
                } catch (_) {}

                // Create FAB
                const fab = document.createElement('button');
                fab.className = 'orders-fab';
                fab.id = 'ordersFab';
                fab.title = 'Orders';
                fab.textContent = '📦';
                document.addEventListener('DOMContentLoaded', () => document.body.appendChild(fab));

                // Create Panel
                const panel = document.createElement('div');
                panel.className = 'orders-panel';
                panel.id = 'ordersPanel';
                panel.innerHTML = `
                    <header>
                        <span>Orders</span>
                        <button id="ordersClose" style="border:none;background:transparent;font-size:18px;cursor:pointer">✕</button>
                    </header>
                    <div class="metrics">
                        <div class="metric"><div class="label">Total Orders</div><div class="value" id="ordersCount">0</div></div>
                        <div class="metric"><div class="label">Gross</div><div class="value" id="ordersGross">£0.00</div></div>
                    </div>
                    <div class="list" id="ordersList"></div>
                `;
                document.addEventListener('DOMContentLoaded', () => document.body.appendChild(panel));

                function togglePanel(show){
                    const p = document.getElementById('ordersPanel');
                    if (!p) return;
                    p.classList.toggle('show', show === undefined ? !p.classList.contains('show') : !!show);
                }

                document.addEventListener('click', (e) => {
                    if (e.target && (e.target.id === 'ordersFab' || e.target.closest('#ordersFab'))) {
                        togglePanel();
                    }
                    if (e.target && (e.target.id === 'ordersClose')) {
                        togglePanel(false);
                    }
                });

                function formatGBP(n){
                    const v = Number(n || 0);
                    return `£${v.toFixed(2)}`;
                }

                function toDate(val){
                    try {
                        if (!val) return null;
                        if (val instanceof Date) return val;
                        if (val.seconds) return new Date(val.seconds * 1000);
                        if (typeof val === 'string' || typeof val === 'number') return new Date(val);
                    } catch(_) {}
                    return null;
                }

                function render(orders){
                    const countEl = document.getElementById('ordersCount');
                    const grossEl = document.getElementById('ordersGross');
                    const listEl  = document.getElementById('ordersList');
                    if (!countEl || !grossEl || !listEl) return;

                    const total = orders.length;
                    const gross = orders.reduce((sum, o) => sum + Number(o.gross || 0), 0);
                    countEl.textContent = String(total);
                    grossEl.textContent = formatGBP(gross);

                    listEl.innerHTML = orders.map(o => {
                        const dt = toDate(o.createdAt);
                        const when = dt ? dt.toLocaleString('en-GB') : '';
                        const pay = o.paymentMethod || '—';
                        const g   = formatGBP(o.gross || 0);
                        const id  = o.id || o.transactionId || '';
                        return `
                            <div class="order">
                                <div class="row"><strong>${g}</strong><span>${pay}</span></div>
                                <div class="muted">${when}${id ? ' • ' + id : ''}</div>
                            </div>
                        `;
                    }).join('');
                }

                async function ensureAuth(){
                    return new Promise((resolve) => {
                        onAuthStateChanged(auth, async (user) => {
                            try {
                                if (!user) await signInAnonymously(auth);
                            } catch(_) {}
                            resolve();
                        });
                    });
                }

                async function start(){
                    try {
                        await ensureAuth();
                        // Initial paint (non-realtime) in case RT fails
                        try { const initial = await listOrders(50); render(initial); try { window.FitriteOrders && window.FitriteOrders.set && window.FitriteOrders.set(initial); } catch(_) {} try { if (window.refreshOrdersViews) window.refreshOrdersViews(); } catch(_) {} } catch(_) {}
                        // Realtime updates
                        try { onOrdersSnapshot((rows) => { try { window.FitriteOrders && window.FitriteOrders.set && window.FitriteOrders.set(rows); } catch(_) {} render(rows); try { if (window.refreshOrdersViews) window.refreshOrdersViews(); } catch(_) {} }, { limitCount: 50 }); } catch(_) {}
                    } catch (err) {
                        console.error('Orders widget failed to start:', err);
                    }
                }

                document.addEventListener('DOMContentLoaded', start);
            } catch (e) {
                console.error('Orders widget init error:', e);
            }
        })();
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Special+Elite&display=swap');
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            color: #333;
        }

        :root {
            --ease-smooth: cubic-bezier(0.22, 1, 0.36, 1);
            --ease-inout: cubic-bezier(0.4, 0, 0.2, 1);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Collapsible category header */
        .category-header { cursor: pointer; user-select: none; }
        .category-header:focus { outline: 2px solid rgba(255,255,255,0.6); outline-offset: 2px; }
        .category-header::after {
            content: '▼';
            margin-left: 8px;
            font-size: 0.9em;
            opacity: 0.8;
            display: inline-block;
            transform: rotate(0deg);
            transition: transform 180ms ease;
        }
        .category.collapsed .category-header::after { transform: rotate(-90deg); }
        /* Animated expand/collapse for product collections */
        .category .products-list {
            overflow: hidden;
            max-height: 20000px; /* large upper bound to enable transition without clipping long lists */
            opacity: 1;
            transform: translateY(0);
            transform-origin: top;
            transition: max-height 360ms var(--ease-smooth), opacity 260ms var(--ease-inout), transform 320ms var(--ease-smooth);
            will-change: max-height, opacity;
        }
        .category.collapsed .products-list { max-height: 0; opacity: 0; transform: translateY(-8px); }
        .category.expanding .products-list { opacity: 0; transform: translateY(-6px); }
        .category.expanded .products-list { opacity: 1; transform: translateY(0); }

        /* Subtle stagger for items when expanding */
        @keyframes fadeSlideIn {
            from { opacity: 0; transform: translateY(6px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .category.expanded .products-list .product-item { animation: fadeSlideIn 300ms var(--ease-smooth) both; animation-delay: calc(var(--i, 0) * 20ms); }

        .supplier-legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            font-weight: 600;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }

        /* Product rows use their supplier colors (no forced transparent override) */

        /* Cores dos fornecedores */
        .fitrite-bg { background-color: #059669; }
        .bullet69-bg { background-color: #DC2626; }
        .rayflector-bg { background-color: #F59E0B; }
        .grinders-bg { background-color: #B06F3C; }
        .euroaccessories-bg { background-color: #1E40AF; }
        .molimoj-bg { background-color: #7C3AED; }
        .lucini-bg { background-color: #EA580C; }

        /* Busca e filtros */
        .search-container {
            margin-top: 20px;
            display: grid;
            gap: 12px;
        }

        .search-box {
            position: relative;
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(0, 0, 0, 0.05);
            border-radius: 14px;
            padding: 6px 10px;
        }

        #searchInput {
            flex: 1;
            padding: 12px 14px;
            border: none;
            outline: none;
            font-size: 1rem;
            background: transparent;
        }

        .clear-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            border: none;
            background: #ef4444;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0.9;
        }

        .search-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .filter-btn {
            border: none;
            padding: 8px 14px;
            border-radius: 999px;
            background: rgba(44, 62, 80, 0.08);
            color: #2c3e50;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .filter-btn:hover { background: rgba(44, 62, 80, 0.16); }
        .filter-btn.active { background: #2c3e50; color: white; }
        .filter-btn.disabled { opacity: 0.38; cursor: not-allowed; pointer-events: none; }
        .filter-btn.disabled.active { background: #9aa3ad; color: #ffffff; }

        .search-results-info {
            text-align: center;
            color: #2c3e50;
            font-weight: 600;
        }
        /* Fixed reveal-on-hover search bar */
        .search-container.fixed-bar {
            position: fixed;
            top: 0;
            left: 5vw; /* 5% margin on the left */
            right: auto;
            width: 90vw; /* 5% margins on both sides */
            z-index: 1000;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(6px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            border-radius: 16px;
            overflow: hidden;
            padding: 8px 16px;
            margin: 0; /* flush with top */
            transform: translateY(-100%);
            opacity: 0;
            pointer-events: none;
            transition: transform 0.25s ease, opacity 0.25s ease;
            gap: 0;
        }
        .search-container.fixed-bar.show {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
        }
        /* Edge navigation buttons (scroll to top/bottom) */
        .edge-nav-btn {
            position: fixed;
            right: 12px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #ffffff;
            color: #111827;
            border: 1px solid rgba(0,0,0,0.2);
            box-shadow: 0 6px 18px rgba(0,0,0,0.15);
            display: grid;
            place-items: center;
            font-size: 22px;
            cursor: pointer;
            z-index: 1101;
            opacity: 0;
            pointer-events: none;
            transform: scale(0.95);
            transition: opacity 180ms ease, transform 180ms ease;
        }
        .edge-nav-btn.show { opacity: 1; pointer-events: auto; transform: scale(1); }
        .edge-nav-btn.edge-top { top: 12px; }
        .edge-nav-btn.edge-bottom { bottom: 12px; }
        /* Hide filters and results info in fixed (hover) bar */
        .search-container.fixed-bar .search-filters,
        .search-container.fixed-bar .search-results-info { display: none !important; }

        /* Floating emoji catalogue nav – centered, larger circles */
        .floating-catalog {
            position: relative;
            --btn: 140px;
            --gap: 22px;
            width: calc(7 * var(--btn) + 6 * var(--gap));
            margin: 18px auto 10px;
            display: grid;
            grid-template-columns: repeat(7, var(--btn));
            gap: var(--gap);
            place-content: center;
            place-items: center;
            z-index: 1;
            overflow: visible;
            box-sizing: border-box;
        }
        /* Default: wrappers don't affect desktop layout (no wrappers in desktop markup now) */
        .catalog-page { display: contents; }
        /* Pagination dots hidden by default (desktop) */
        .catalog-dots { display: none; gap: 8px; justify-content: center; align-items: center; margin-top: 8px; }
        .catalog-dots .dot { width: 8px; height: 8px; border-radius: 50%; background: #cbd5e1; display: inline-block; transition: transform 140ms ease, background 140ms ease; }
        .catalog-dots .dot.active { background: #111827; transform: scale(1.2); }
        /* Force precise 3-4-2 with staggering over the middle row (using 7-column grid) */
        .floating-catalog .catalog-btn:nth-child(1) { grid-column: 2; grid-row: 1; }
        .floating-catalog .catalog-btn:nth-child(2) { grid-column: 4; grid-row: 1; }
        .floating-catalog .catalog-btn:nth-child(3) { grid-column: 6; grid-row: 1; }
        .floating-catalog .catalog-btn:nth-child(4) { grid-column: 1; grid-row: 2; }
        .floating-catalog .catalog-btn:nth-child(5) { grid-column: 3; grid-row: 2; }
        .floating-catalog .catalog-btn:nth-child(6) { grid-column: 5; grid-row: 2; }
        .floating-catalog .catalog-btn:nth-child(7) { grid-column: 7; grid-row: 2; }
        .floating-catalog .catalog-btn:nth-child(8) { grid-column: 3; grid-row: 3; }
        .floating-catalog .catalog-btn:nth-child(9) { grid-column: 5; grid-row: 3; }
        .catalog-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: var(--btn);
            height: var(--btn);
            padding: 10px;
            border-radius: 999px;
            border: 1px solid rgba(0,0,0,0.2);
            background: #ffffff;
            box-shadow: 0 8px 22px rgba(0,0,0,0.18);
            cursor: pointer;
            transition: transform 160ms ease, box-shadow 160ms ease, opacity 160ms ease;
            pointer-events: auto; /* re-enable on buttons */
            position: relative;
            overflow: hidden;
        }
        .catalog-btn:focus { outline: 2px solid rgba(59,130,246,0.6); outline-offset: 2px; }
        .catalog-btn:hover { transform: translateY(-2px) scale(1.04); box-shadow: 0 10px 26px rgba(0,0,0,0.22); }
        .catalog-btn .emoji {
            width: calc(var(--btn) * 0.66); height: calc(var(--btn) * 0.66); border-radius: 50%; display: grid; place-items: center;
            background: #f9fafb; line-height: 1; overflow: hidden;
        }
        .catalog-btn .emoji img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; display: block; }
        .catalog-btn .label { display: none; }
        .catalog-btn.dim { opacity: 0.28; pointer-events: none; filter: grayscale(0.5); }
        .catalog-btn.active { border: none; box-shadow: none; }
        @media (max-width: 900px) {
            .floating-catalog { --btn: 120px; --gap: 18px; width: calc(7 * var(--btn) + 6 * var(--gap)); grid-template-columns: repeat(7, var(--btn)); }
            .catalog-btn .emoji { font-size: 34px; }
        }
        @media (max-width: 640px) {
            .floating-catalog { --btn: 100px; --gap: 12px; width: calc(7 * var(--btn) + 6 * var(--gap)); grid-template-columns: repeat(7, var(--btn)); }
            .catalog-btn .emoji { font-size: 28px; }
        }
        /* Compact breakpoints */
        @media (max-width: 600px) {
            /* Mobile: 3x3 grid filling the available area under the header (no swipe) */
            .floating-catalog { --btn: 78px; --gap: 14px; width: calc(3 * var(--btn) + 2 * var(--gap)); margin: 64px auto 20px; padding: 0; box-sizing: border-box; overflow: visible; display: grid; grid-template-columns: repeat(3, var(--btn)); gap: var(--gap); place-items: center; justify-content: center; place-content: center; min-height: calc(3 * var(--btn) + 2 * var(--gap)); }
            .catalog-page { display: contents; }
            .catalog-dots { display: none; }
            /* Reset desktop manual placements so items auto-flow into 3x3 */
            .floating-catalog .catalog-btn { grid-column: auto !important; grid-row: auto !important; }
            /* Mobile: circular image buttons (no hover reveal) */
            .catalog-btn { display: inline-flex; align-items: center; justify-content: center; width: var(--btn); height: var(--btn); padding: 10px; border-radius: 999px; border: 1px solid rgba(0,0,0,0.2); background: #ffffff; box-shadow: 0 8px 22px rgba(0,0,0,0.18); }
            .catalog-btn .emoji { position: static; width: calc(var(--btn) * 0.66); height: calc(var(--btn) * 0.66); border-radius: 50%; background: #f9fafb; transform: none; opacity: 1; }
            .catalog-btn .label { display: none; }
        }
        /* Desktop/tablet: enforce original 3-4-2 layout and hide dots */
        @media (min-width: 601px) {
            .floating-catalog { display: grid; grid-template-columns: repeat(7, var(--btn)); gap: var(--gap); width: calc(7 * var(--btn) + 6 * var(--gap)); margin: 18px auto 10px; overflow: visible; padding: 0; }
            .catalog-page { display: contents; }
            .catalog-dots { display: none; }
            /* Desktop: label-first, image slides in on hover */
            .catalog-btn { padding: 0; border: none; background: transparent; box-shadow: none; border-radius: 16px; }
            .catalog-btn .emoji { position: absolute; inset: 0; width: 100%; height: 100%; border-radius: 16px; background: transparent; transform: translateY(100%); opacity: 0; transition: transform 380ms var(--ease-inout), opacity 380ms var(--ease-inout); }
            .catalog-btn .label { display: block; font-family: 'Special Elite', monospace; text-transform: uppercase; font-weight: 900; letter-spacing: 0.05em; color: #111827; font-size: calc(var(--btn) * 0.12); line-height: 1.05; text-align: center; padding: 2px 6px; max-width: 90%; margin: 0 auto; overflow-wrap: anywhere; transition: opacity 260ms var(--ease-inout); }
            .catalog-btn:hover .emoji { transform: translateY(0); opacity: 1; }
            .catalog-btn:hover .label { opacity: 0; }
            /* Map items across two pages to positions 1..9 */
            /* Page 1 (items 1..4) */
            .floating-catalog .catalog-page:nth-child(1) .catalog-btn:nth-child(1) { grid-column: 2; grid-row: 1; }
            .floating-catalog .catalog-page:nth-child(1) .catalog-btn:nth-child(2) { grid-column: 4; grid-row: 1; }
            .floating-catalog .catalog-page:nth-child(1) .catalog-btn:nth-child(3) { grid-column: 6; grid-row: 1; }
            .floating-catalog .catalog-page:nth-child(1) .catalog-btn:nth-child(4) { grid-column: 1; grid-row: 2; }
            /* Page 2 (items 5..9) */
            .floating-catalog .catalog-page:nth-child(2) .catalog-btn:nth-child(1) { grid-column: 3; grid-row: 2; }
            .floating-catalog .catalog-page:nth-child(2) .catalog-btn:nth-child(2) { grid-column: 5; grid-row: 2; }
            .floating-catalog .catalog-page:nth-child(2) .catalog-btn:nth-child(3) { grid-column: 7; grid-row: 2; }
            .floating-catalog .catalog-page:nth-child(2) .catalog-btn:nth-child(4) { grid-column: 3; grid-row: 3; }
            .floating-catalog .catalog-page:nth-child(2) .catalog-btn:nth-child(5) { grid-column: 5; grid-row: 3; }
        }
        @media (max-width: 480px) {
            .floating-catalog { --btn: 68px; --gap: 12px; width: calc(3 * var(--btn) + 2 * var(--gap)); margin: 52px auto 20px; }
        }
        @media (max-width: 360px) {
            .floating-catalog { --btn: 62px; --gap: 6px; padding: 0 6px; }
        }

        /* Reduce vertical whitespace on small screens */
        @media (max-width: 600px) {
            .header { margin-bottom: 12px; padding: 16px; }
            .search-container { margin-top: 6px; }
            .supplier-legend { margin-top: 8px; }
            .search-results-info { margin-top: 6px; }
        }

        /* Hover backdrop for category preview tint */
        #catalogHoverBackdrop {
            position: fixed;
            inset: 0;
            background: transparent;
            opacity: 0;
            transition: opacity 220ms ease, background 220ms ease;
            z-index: 0;
            pointer-events: none;
            background-size: 180% 180%;
        }
        #catalogHoverBackdrop.show { opacity: 0.45; animation: hoverGradientShift 6s ease-in-out infinite alternate; }
        @keyframes hoverGradientShift {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 100%; }
        }

        .subtitle { color: #475569; }
        /* Value mode control – local to open catalogue */
        .value-mode {
            position: absolute;
            right: 10px;
            top: -64px; /* fully outside the header */
            display: none; /* hidden by default */
            align-items: center;
            gap: 8px;
            z-index: 1103;
            padding: 6px 8px;
            border-radius: 999px;
            border: 1px solid rgba(255,255,255,0.6);
            color: #fff;
            box-shadow: 0 8px 18px rgba(0,0,0,0.16);
        }
        .category.expanded .value-mode { display: flex; }
        /* Match header gradient backdrop under the toolbar */
        .category.expanded .value-mode { background: linear-gradient(135deg, rgba(255,255,255,0.28), rgba(255,255,255,0.14)); }

        /* Hamburger menu and views overlay */
        .header .container { position: relative; }
        .hamburger-btn {
            position: fixed; /* keep in top-left regardless of header flow */
            left: 14px;
            top: 14px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: transparent; /* show only the F */
            border: none;
            box-shadow: none;
            display: grid;
            place-items: center;
            cursor: pointer;
            z-index: 1400; /* ensure it's above page chrome so click always opens menu */
            transition: transform 140ms ease, box-shadow 140ms ease;
        }
        .hamburger-btn:hover { transform: translateY(-2px); }
        .hamburger-f { font-family: 'Special Elite', monospace; text-transform: uppercase; font-weight: 900; color: #111827; font-size: 28px; letter-spacing: 0.06em; text-shadow: none; transition: transform 140ms ease; }
        .menu-overlay.show ~ .header .hamburger-btn .hamburger-f { transform: rotate(45deg); }

        .menu-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.35); opacity: 0; pointer-events: none; transition: opacity 200ms ease; z-index: 1300;
        }
        .menu-overlay.show { opacity: 1; pointer-events: auto; }
        .menu-drawer {
            position: absolute; top: 0; left: 0; width: min(84vw, 320px); height: 100%;
            background: #ffffff; box-shadow: 10px 0 30px rgba(0,0,0,0.2); transform: translateX(-100%);
            transition: transform 220ms cubic-bezier(0.22,1,0.36,1);
            display: flex; flex-direction: column;
        }
        .menu-overlay.show .menu-drawer { transform: translateX(0); }
        .menu-header { display: flex; align-items: center; gap: 10px; padding: 14px 12px; border-bottom: 1px solid #eee; font-size: 18px; visibility: hidden; }
        .menu-logo { width: auto; height: auto; border-radius: 0; background: transparent; border: none; display: inline-block; box-shadow: none; }
        .menu-logo .f { font-family: 'Special Elite', monospace; font-weight: 900; color: #111827; font-size: 22px; }
        .menu-list { list-style: none; margin: 120px 0 0 0; padding: 12px; display: grid; gap: 6px; }
        .menu-item { padding: 12px 10px; border-radius: 10px; cursor: pointer; font-family: 'Special Elite', monospace; text-transform: uppercase; font-weight: 900; letter-spacing: 0.06em; color: #111827; transition: background 140ms ease; }
        .menu-item:hover { background: rgba(0,0,0,0.06); }

        .view-overlay { position: fixed; inset: 0; background: #ffffff; z-index: 1250; opacity: 0; pointer-events: none; transition: opacity 220ms ease; display: flex; flex-direction: column; }
        .view-overlay.show { opacity: 1; pointer-events: auto; }
        .view-head { display: flex; align-items: center; justify-content: center; padding: 12px 14px; border-bottom: 1px solid #eee; }
        .view-title { font-weight: 800; color: #111827; text-align: center; margin: 0 auto; }
        .view-body { flex: 1; overflow: auto; padding: 16px; transition: opacity 260ms var(--ease-inout); opacity: 1; }
        .view-body.fading { opacity: 0; }
        .view-empty { color: #374151; font-weight: 600; }
        /* Views: Status, Sales, Data */
        .range-switch { display: flex; gap: 8px; justify-content: center; margin: 8px 0 14px; }
        .range-pill { background: #f3f4f6; color: #111827; border: 1px solid #e5e7eb; padding: 6px 10px; border-radius: 999px; font-weight: 800; font-size: 12px; cursor: pointer; transition: background 160ms ease, color 160ms ease, transform 120ms ease, box-shadow 160ms ease; }
        .range-pill.active { background: #111827; color: #fff; border-color: #111827; }
        .range-pill:hover { background: #111827cc; color: #fff; transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0,0,0,0.08); }

        .orders-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 14px; }
        .order-card { background: #ffffff; border: 1px solid #e5e7eb; border-radius: 14px; padding: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); transition: box-shadow 160ms ease, transform 120ms ease; }
        .order-card:hover { box-shadow: 0 12px 26px rgba(0,0,0,0.12); transform: translateY(-2px); }
        .order-head { display: flex; align-items: center; justify-content: space-between; gap: 8px; margin-bottom: 8px; }
        .order-id { font-weight: 900; color: #111827; letter-spacing: 0.02em; }
        .status-pill { padding: 4px 8px; border-radius: 999px; font-weight: 800; font-size: 12px; border: 1px solid transparent; }
        .status-green { background: #10b98122; color: #065f46; border-color: #10b981; }
        .status-yellow { background: #f59e0b22; color: #92400e; border-color: #f59e0b; }
        .status-blue { background: #3b82f622; color: #1e3a8a; border-color: #3b82f6; }
        .status-red { background: #ef444422; color: #7f1d1d; border-color: #ef4444; }
        .timeline { display: flex; align-items: center; gap: 8px; margin: 8px 0 10px; }
        .tl-step { display: flex; align-items: center; gap: 6px; color: #6b7280; font-weight: 700; font-size: 12px; }
        .tl-dot { width: 10px; height: 10px; border-radius: 50%; background: #e5e7eb; border: 1px solid #d1d5db; }
        .tl-step.active { color: #111827; }
        .tl-step.active .tl-dot { background: #111827; border-color: #111827; }
        .tl-bar { flex: 1; height: 2px; background: linear-gradient(90deg, #111827 0%, #d1d5db 0%); border-radius: 2px; }
        .order-body { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 12px; }
        .qr-box { width: 100px; height: 100px; border-radius: 10px; background: #f3f4f6; display: grid; place-items: center; border: 1px solid #e5e7eb; }
        .qr { display: grid; grid-template-columns: repeat(21, 1fr); grid-auto-rows: 1fr; gap: 1px; width: 88px; height: 88px; }
        .qr div { background: #111827; }
        .order-actions { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
        .link-btn { background: #111827; color: #fff; border: none; border-radius: 8px; padding: 6px 10px; font-weight: 800; cursor: pointer; transition: background 160ms ease, transform 120ms ease, box-shadow 160ms ease; }
        .ghost-btn { background: #f3f4f6; color: #111827; border: 1px solid #e5e7eb; border-radius: 8px; padding: 6px 10px; font-weight: 800; cursor: pointer; transition: background 160ms ease, transform 120ms ease, box-shadow 160ms ease; }
        .link-btn:hover { background: #0b1220; transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,0.12); }
        .ghost-btn:hover { background: #eef2f7; transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,0.10); }
        .order-items { margin-top: 8px; border-top: 1px dashed #e5e7eb; padding-top: 8px; display: none; }
        .order-items.show { display: block; }
        .order-items li { display: flex; justify-content: space-between; color: #374151; font-weight: 700; }
        .order-items li.highlight { position: relative; overflow: hidden; border-radius: 10px; }
        .order-items li.highlight::after {
            content: '';
            position: absolute; inset: -2px;
            border-radius: 12px;
            background: linear-gradient(90deg,
                rgba(255,0,0,0) 0%, rgba(255,0,0,0.10) 12%,
                rgba(255,165,0,0.10) 24%, rgba(255,255,0,0.10) 36%,
                rgba(0,128,0,0.10) 48%, rgba(0,0,255,0.10) 60%,
                rgba(75,0,130,0.10) 72%, rgba(238,130,238,0.10) 84%,
                rgba(255,0,0,0) 100%);
            background-size: 220% 100%;
            animation: rainbowSweep 1.8s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
            will-change: background-position, opacity;
        }

        .sales-summary { display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px; flex-wrap: wrap; }
        .profit-badge { background: #10b981; color: #fff; border-radius: 999px; padding: 6px 10px; font-weight: 900; }
        .sales-table { width: 100%; border-collapse: collapse; }
        .sales-table th, .sales-table td { padding: 8px 10px; border-bottom: 1px solid #f1f5f9; text-align: left; font-weight: 700; color: #111827; }
        .sales-table th { color: #6b7280; font-weight: 800; }
        .sales-table tbody tr { transition: background 260ms var(--ease-inout), box-shadow 260ms var(--ease-inout), transform 260ms var(--ease-inout); }
        .sales-table tbody tr:hover { background: #f1f5f9; }
        /* Clear, smooth one-time highlight for Sales rows */
        .sales-table tbody tr.sales-highlight { background: #fffbe6 !important; outline: 2px solid #111827; box-shadow: 0 10px 24px rgba(0,0,0,0.14); transform: translateY(-2px); }
        @keyframes salesFlash {
            0% { background: #fff7cc; }
            60% { background: #fffbe6; }
            100% { background: #ffffff; }
        }
        .sales-table tbody tr.sales-highlight { animation: salesFlash 1.6s var(--ease-inout); }
        .item-cell { display: flex; align-items: center; gap: 10px; }
        .item-thumb { width: 36px; height: 36px; border-radius: 8px; object-fit: cover; border: 1px solid #e5e7eb; box-shadow: 0 2px 6px rgba(0,0,0,0.06); }
        .sale-id { color: #6b7280; font-weight: 800; font-size: 12px; }
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 14px; margin-bottom: 14px; }
        .kpi { background: #ffffff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 14px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); transition: box-shadow 160ms ease, transform 120ms ease, border-color 160ms ease; }
        .kpi:hover { transform: translateY(-2px); box-shadow: 0 12px 26px rgba(0,0,0,0.12); border-color: #cbd5e1; }
        .kpi .label { color: #6b7280; font-weight: 800; font-size: 12px; }
        .kpi .value { color: #111827; font-weight: 900; font-size: 20px; margin-top: 4px; }
        /* Profit summary list inside KPI */
        .kpi .profit-list { display: grid; gap: 6px; margin-top: 2px; }
        .kpi .profit-row { display: flex; align-items: center; justify-content: space-between; }
        .kpi .profit-row .label { color: #6b7280; font-weight: 800; font-size: 12px; }
        .kpi .profit-row .value { color: #111827; font-weight: 900; }
        /* Inline mini switch (used in KPI and section controls) */
        .mini-switch { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 6px; }
        .mini-switch .pill {
            background: linear-gradient(180deg, #f9fafb, #edf2f7);
            color: #111827;
            border: 1px solid #d1d5db;
            padding: 5px 10px;
            border-radius: 999px;
            font-weight: 900;
            font-size: 12px;
            cursor: pointer;
            transition: background 160ms ease, color 160ms ease, transform 120ms ease, box-shadow 160ms ease, border-color 160ms ease;
            box-shadow: 0 1px 2px rgba(0,0,0,0.06), inset 0 1px 0 rgba(255,255,255,0.7);
        }
        .mini-switch .pill.active {
            background: linear-gradient(180deg, #111827, #0b1220);
            color: #fff;
            border-color: #0b1220;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.08);
        }
        .mini-switch .pill:hover { background: linear-gradient(180deg, #1f2937, #0f172a); color: #fff; transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,0.18); }
        .section-head .mini-switch { margin-top: 0; }
        /* Ensure pills are styled consistently anywhere (e.g., Weeks/Days controls) */
        .pill {
            background: linear-gradient(180deg, #f9fafb, #edf2f7);
            color: #111827;
            border: 1px solid #d1d5db;
            padding: 5px 10px;
            border-radius: 999px;
            font-weight: 900;
            font-size: 12px;
            cursor: pointer;
            transition: background 160ms ease, color 160ms ease, transform 120ms ease, box-shadow 160ms ease, border-color 160ms ease;
            box-shadow: 0 1px 2px rgba(0,0,0,0.06), inset 0 1px 0 rgba(255,255,255,0.7);
        }
        .pill.active {
            background: linear-gradient(180deg, #111827, #0b1220);
            color: #fff;
            border-color: #0b1220;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.08);
        }
        .pill:hover { background: linear-gradient(180deg, #1f2937, #0f172a); color: #fff; transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,0.18); }
        /* Compact bar chart inside KPI */
        .kpi .mini-chart { display: flex; align-items: flex-end; gap: 8px; height: 140px; margin-top: 10px; padding: 4px 2px 18px; position: relative; }
        .kpi .mini-chart { --barTop:#34d399; --barBottom:#10b981; }
        .kpi .mini-chart .bar { flex: 1; min-width: 10px; background: linear-gradient(180deg, var(--barTop) 0%, var(--barBottom) 100%); border-radius: 6px 6px 0 0; position: relative; transition: height 260ms var(--ease-inout), box-shadow 180ms ease, transform 160ms ease; }
        .kpi .mini-chart .bar:hover { box-shadow: 0 10px 22px rgba(0,0,0,0.12); transform: translateY(-2px); }
        .kpi .mini-chart .bar::after { content: attr(data-label); position: absolute; bottom: -16px; left: 50%; transform: translateX(-50%); font-size: 10px; color: #6b7280; font-weight: 800; white-space: nowrap; }
        .kpi .mini-chart .tooltip { position: absolute; bottom: 100%; left: 50%; transform: translate(-50%, -8px); background: #111827; color: #fff; padding: 4px 6px; border-radius: 6px; font-size: 11px; font-weight: 800; white-space: nowrap; pointer-events: none; opacity: 0; transition: opacity 120ms ease; }
        .kpi .mini-chart .bar:hover .tooltip { opacity: 1; }
        .kpi .crumb { margin-top: 6px; color: #6b7280; font-weight: 800; font-size: 12px; display: none; align-items: center; gap: 8px; }
        .kpi .crumb .back { background: #f3f4f6; color: #111827; border: 1px solid #e5e7eb; padding: 3px 8px; border-radius: 999px; font-weight: 800; font-size: 11px; cursor: pointer; }
        /* Subline (e.g., delivery cost inside supplier spend) */
        .kpi .subline { margin-top: 6px; color: #6b7280; font-weight: 800; font-size: 12px; display: flex; align-items: center; justify-content: space-between; }
        .kpi .subline .val { color: #111827; font-weight: 900; }
        /* Most-sold KPI hover translucent sheen */
        .kpi.most-sold { position: relative; overflow: hidden; }
        .kpi.most-sold::after {
            content: '';
            position: absolute; inset: -2px;
            background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.28) 50%, rgba(255,255,255,0) 100%);
            transform: translateX(-120%);
            pointer-events: none;
        }
        .kpi.most-sold:hover::after { animation: msSheen 1.4s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes msSheen {
            0% { transform: translateX(-120%); opacity: 0; }
            50% { opacity: 0.28; }
            100% { transform: translateX(120%); opacity: 0; }
        }
        .chart { width: 100%; height: 220px; background: #ffffff; border: 1px solid #e5e7eb; border-radius: 12px; display: grid; place-items: center; box-shadow: 0 6px 18px rgba(0,0,0,0.06); transition: box-shadow 160ms ease, transform 120ms ease, border-color 160ms ease; }
        .chart:hover { transform: translateY(-2px); box-shadow: 0 12px 26px rgba(0,0,0,0.10); border-color: #cbd5e1; }
        .data-search { display: grid; grid-template-columns: 1fr; gap: 8px; max-width: 520px; margin: 8px auto 14px; }
        /* General Graph overlay */
        .gg-open-btn { margin-left: auto; display: inline-flex; align-items: center; gap: 8px; padding: 6px 12px; border-radius: 999px; border: 1px solid #e5e7eb; background: linear-gradient(180deg, #f9fafb, #edf2f7); color: #111827; font-weight: 900; font-size: 12px; box-shadow: 0 6px 16px rgba(0,0,0,0.10); cursor: pointer; }
        .gg-open-btn:hover,
        .gg-open-btn:active,
        .gg-open-btn:focus-visible { background: #0b1220; color: #fff; border-color: #0b1220; }
        .gg-topbar { display: flex; align-items: center; justify-content: flex-end; margin-bottom: 8px; }
        .gg-overlay { position: fixed; inset: 0; background: rgba(17,24,39,0.65); display: flex; align-items: center; justify-content: center; z-index: 9999; opacity: 0; pointer-events: none; transition: opacity 180ms ease; }
        .gg-overlay.show { opacity: 1; pointer-events: auto; }
        .gg-modal { width: min(1100px, 96vw); height: min(680px, 88vh); background: #fff; border-radius: 14px; box-shadow: 0 20px 40px rgba(0,0,0,0.25); overflow: hidden; border: 1px solid #e5e7eb; position: relative; transform: translateY(8px) scale(0.98); opacity: 0.98; transition: transform 200ms ease, opacity 200ms ease; }
        .gg-overlay.show .gg-modal { transform: translateY(0) scale(1); opacity: 1; }
        .gg-modal iframe { width: 100%; height: 100%; border: 0; display: block; }
        .gg-close { position: absolute; top: 10px; right: 10px; background: #111827; color: #fff; border: 0; border-radius: 999px; width: 32px; height: 32px; font-weight: 900; cursor: pointer; box-shadow: 0 8px 18px rgba(0,0,0,0.18); }
        .gg-close:hover { background: #0f172a; }
        .data-search input { padding: 10px 12px; border-radius: 10px; border: 1px solid #e5e7eb; outline: none; font-weight: 700; transition: border-color 160ms ease, box-shadow 160ms ease; }
        .data-search input:hover, .data-search input:focus { border-color: #111827; box-shadow: 0 0 0 3px rgba(17,24,39,0.12); }
        .results-line { text-align: center; color: #6b7280; font-weight: 800; margin-bottom: 10px; }
        /* Data view - aesthetic organization */
        .data-search { position: sticky; top: 6px; background: #ffffff; padding: 8px 10px; border-radius: 12px; box-shadow: 0 8px 18px rgba(0,0,0,0.04); z-index: 2; }
        .data-sections { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 16px; }
        .section-card { background: #ffffff; border: 1px solid #e5e7eb; border-radius: 16px; box-shadow: 0 8px 22px rgba(0,0,0,0.06); overflow: hidden; display: flex; flex-direction: column; transition: box-shadow 160ms ease, transform 120ms ease; }
        .section-card:hover { box-shadow: 0 14px 30px rgba(0,0,0,0.10); transform: translateY(-2px); }
        .section-head { display: flex; align-items: center; justify-content: space-between; padding: 12px 14px; border-bottom: 1px solid #f1f5f9; transition: background 140ms ease; }
        .section-head:hover { background: #f9fafb; }
        .section-title { font-weight: 900; color: #111827; letter-spacing: 0.02em; }
        .count-badge { background: #f3f4f6; color: #111827; border: 1px solid #e5e7eb; border-radius: 999px; padding: 4px 8px; font-weight: 800; font-size: 12px; transition: background 160ms ease, color 160ms ease, transform 120ms ease, box-shadow 160ms ease; }
        .count-badge:hover { background: #111827; color: #fff; transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,0.08); }
        .table-wrap { overflow: auto; }
        .sales-table { min-width: 520px; }
        .sales-table thead th { position: sticky; top: 0; background: #ffffff; z-index: 1; }
        .sales-table tbody tr:nth-child(odd) { background: #f9fafb; }
        .item-cell { max-width: none; white-space: normal; }
        .supplier-cell { display: grid; gap: 2px; align-items: center; }
        .supplier-name { font-weight: 900; }
        .supplier-cost { color: #6b7280; font-weight: 800; font-size: 12px; }
        @media (max-width: 640px) { .hamburger-btn { left: 10px; top: 10px; width: 40px; height: 40px; } }
        .mode-btn {
            background: rgba(255,255,255,0.18);
            border: 1px solid rgba(255,255,255,0.55);
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
            border-radius: 999px;
            padding: 6px 10px;
            font-weight: 800;
            font-size: 12px;
            letter-spacing: 0.02em;
            cursor: pointer;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0,0,0,0.18);
            transition: transform 140ms ease, box-shadow 140ms ease, background 140ms ease, color 140ms ease;
        }
        .mode-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 22px rgba(0,0,0,0.2); }
        .mode-btn.active { background: var(--vm-active-bg, rgba(31,41,55,0.85)); border-color: var(--vm-active-border, rgba(255,255,255,0.8)); color: #fff; }
        @media (max-width: 640px) { .value-mode { right: 6px; top: -48px; } .mode-btn { padding: 5px 8px; font-size: 11px; } }

        @keyframes rainbowSweep {
            0% { background-position: -220% 0; opacity: 0; }
            20% { opacity: 0.32; }
            50% { background-position: 0% 0; opacity: 0.44; }
            80% { opacity: 0.22; }
            100% { background-position: 220% 0; opacity: 0; }
        }

        .highlight { position: relative; overflow: hidden; }
        .highlight::after {
            content: '';
            position: absolute; inset: -2px;
            border-radius: 8px;
            background: linear-gradient(90deg,
                rgba(255,0,0,0) 0%, rgba(255,0,0,0.10) 12%,
                rgba(255,165,0,0.10) 24%, rgba(255,255,0,0.10) 36%,
                rgba(0,128,0,0.10) 48%, rgba(0,0,255,0.10) 60%,
                rgba(75,0,130,0.10) 72%, rgba(238,130,238,0.10) 84%,
                rgba(255,0,0,0) 100%);
            background-size: 220% 100%;
            animation: rainbowSweep 1.8s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
            will-change: background-position, opacity;
        }

        .hidden { display: none !important; }

        .category {
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            overflow: visible; /* allow the outside switch to render above header */
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            position: relative; /* for local toolbar anchoring */
        }

        .category-header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 20px 30px;
            text-align: center;
        }

        /* Smooth fade for header when closing */
        .category-header { transition: opacity 260ms var(--ease-inout), transform 260ms var(--ease-smooth); }
        .category.fading-header .category-header { opacity: 0; transform: translateY(-6px); }

        .category-header h2 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .category-info {
            font-size: 1rem;
            opacity: 0.9;
        }
        .products-list {
            padding: 0;
            /* Default silver gradient for all lists; headers keep their own colors */
            background: linear-gradient(180deg, #ededed 0%, #cfcfcf 100%);
            background-repeat: no-repeat;
            background-position: top left;
        }
        .product-item {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            color: white;
            font-weight: 500;
            position: relative;
            cursor: pointer;
            /* Slightly stronger, consistent per-row gradient that does not compound down the list */
            background-image:
                linear-gradient(180deg, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0.22) 100%),
                linear-gradient(90deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.0) 60%);
        }

        /* Additional overlays controlled per-row via CSS vars */
        .product-item::before,
        .product-item::after {
            content: '';
            position: absolute;
            inset: 0;
            pointer-events: none;
        }
        /* Vertical boost (top->bottom) scaled per row */
        .product-item::before {
            background-image: linear-gradient(180deg, rgba(255,255,255,0.22) 0%, rgba(255,255,255,0.38) 100%);
            opacity: var(--rowVOverlayOpacity, 0);
        }
        /* Diagonal + left->right sheen scaled per row */
        .product-item::after {
            background-image:
                linear-gradient(135deg, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0) 60%),
                linear-gradient(90deg, rgba(255,255,255,0.10) 0%, rgba(255,255,255,0) 60%);
            opacity: var(--rowOverlayOpacity, 0.18);
        }

        /* Bargains badge and price styling */
        .discount-badge {
            position: absolute;
            top: 8px;
            left: 8px;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 800;
            box-shadow: 0 2px 6px rgba(0,0,0,0.25);
            z-index: 2;
        }
        .discount-badge.red { background: #ef4444; color: #fff; }
        .discount-badge.gold { background: #facc15; color: #1f2937; }

        .original-price { text-decoration: line-through; opacity: 0.8; margin-right: 6px; }
        .new-price { color: #22c55e; font-weight: 800; }
        /* Override colors by mode */
        .product-price.value-white, .product-price.value-white * { color: #ffffff !important; }
        .product-price.value-profit, .product-price.value-profit * { color: #22c55e !important; }
        /* Quick View Modal */
        .qv-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.55);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000; /* above fixed search bar and edge buttons */
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.25s ease;
        }
        .qv-overlay.show { opacity: 1; pointer-events: auto; }
        .qv-modal {
            width: min(92vw, 520px);
            background: linear-gradient(135deg, #a3d5ff 0%, rgba(255, 255, 255, 0.9) 100%);
            color: #0b1020;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(163, 213, 255, 0.6);
            overflow: visible;
            border: 1px solid rgba(255,255,255,0.6);
            backdrop-filter: blur(6px);
            transform: translateY(12px) scale(0.98);
            opacity: 0.98;
            transition: transform 0.25s ease, opacity 0.25s ease;
            position: relative;
        }
        /* Order details modal */
        .order-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 2100; opacity: 0; pointer-events: none; transition: opacity 260ms var(--ease-inout); }
        .order-overlay.show { opacity: 1; pointer-events: auto; }
        .order-modal { width: min(92vw, 800px); max-height: 86vh; overflow: auto; background: #fff; border-radius: 16px; box-shadow: 0 18px 40px rgba(0,0,0,0.22); border: 1px solid #e5e7eb; transform: translateY(10px) scale(0.985); opacity: 0.98; transition: transform 280ms var(--ease-inout), opacity 280ms var(--ease-inout), box-shadow 280ms var(--ease-inout); }
        .order-overlay.show .order-modal { transform: translateY(0) scale(1); opacity: 1; box-shadow: 0 24px 54px rgba(0,0,0,0.28); }
        .order-modal .head { display: flex; align-items: center; justify-content: space-between; padding: 12px 14px; border-bottom: 1px solid #eee; position: sticky; top: 0; background: #fff; z-index: 1; }
        .order-modal .title { font-weight: 900; }
        .order-modal .close { border: none; background: #111827; color: #fff; border-radius: 8px; padding: 6px 10px; font-weight: 800; cursor: pointer; }
        .order-modal .body { padding: 14px; display: grid; gap: 10px; }
        .order-modal .item { display: grid; grid-template-columns: 56px 1fr auto; gap: 10px; align-items: center; border: 1px solid #f1f5f9; border-radius: 10px; padding: 8px; transition: background 220ms var(--ease-inout), box-shadow 220ms var(--ease-inout); }
        .order-modal .item:hover { background: #f9fafb; box-shadow: 0 6px 18px rgba(0,0,0,0.08); }
        .order-modal .item img { width: 56px; height: 56px; object-fit: cover; border-radius: 8px; border: 1px solid #e5e7eb; }
        .order-modal .footer { padding: 12px 14px; display: flex; align-items: center; justify-content: flex-end; gap: 10px; border-top: 1px solid #eee; }
        .qv-overlay.show .qv-modal { transform: translateY(0) scale(1); opacity: 1; }
        /* Larger QR */
        .order-modal .qr { width: 120px; height: 120px; }

        /* Status view legend under hamburger */
        /* Status legend as bare inline dots (no container box) */
        .status-legend {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            top: 64px; /* centered under the header */
            background: transparent;
            border: none;
            box-shadow: none;
            padding: 0;
            z-index: 1300; /* ensure visible above content */
            pointer-events: none; /* purely informational; don't block menu clicks */
            display: flex;
            flex-wrap: nowrap; /* keep on a single line */
            align-items: center;
            gap: 12px;
        }
        .status-legend .legend-item { display: inline-flex; align-items: center; gap: 6px; font-weight: 800; color: #111827; }
        .status-legend .legend-color { width: 12px; height: 12px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.9); box-shadow: 0 1px 2px rgba(0,0,0,0.12); }

        /* Iridescent Glacier animated sweep like the button */
        .qv-modal::before {
            content: '';
            position: absolute;
            top: 0;
            left: -120%;
            width: 120%;
            height: 100%;
            background: linear-gradient(90deg,
                transparent,
                rgba(255, 180, 180, 0.35),
                rgba(255, 200, 160, 0.35),
                rgba(255, 255, 200, 0.35),
                rgba(200, 255, 200, 0.4),
                rgba(200, 230, 255, 0.4),
                rgba(230, 200, 255, 0.35),
                rgba(255, 200, 230, 0.35),
                rgba(255, 255, 255, 0.5),
                transparent);
            opacity: 0.4;
            z-index: 1;
            pointer-events: none;
            animation: glacier-rainbow-sweep 5.5s linear infinite;
        }

        @keyframes glacier-rainbow-sweep {
            0% { left: -120%; opacity: 0.35; }
            50% { left: 100%; opacity: 0.7; }
            100% { left: -120%; opacity: 0.35; }
        }
        .qv-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 16px;
            background: linear-gradient(135deg, rgba(255,255,255,0.35), rgba(255,255,255,0.18));
        }
        .qv-title { font-weight: 800; font-size: 1rem; letter-spacing: 0.02em; }
        .qv-close {
            background: transparent;
            border: none;
            color: #0b1020;
            font-size: 1.2rem;
            cursor: pointer;
            opacity: 0.85;
        }
        .qv-body { padding: 16px; display: grid; gap: 14px; position: relative; padding-bottom: 16px; }
        .qv-image-box {
            background: rgba(255,255,255,0.6);
            border-radius: 16px;
            display: grid;
            place-items: center;
            padding: 16px;
            border: 1px solid rgba(0,0,0,0.06);
        }
        .qv-image-box img { max-width: 100%; max-height: 280px; object-fit: contain; border-radius: 10px; }
        .qv-price-box {
            background: rgba(255,255,255,0.7);
            border: 1px solid rgba(0,0,0,0.06);
            border-radius: 16px;
            padding: 12px 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .qv-price-box .label { opacity: 1; font-weight: 700; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.18); }
        .qv-price-box #qvPrice { color: #22c55e; text-shadow: none; }
        .qv-price-box #qvPrice .new-price { color: #22c55e !important; text-shadow: none; }
        .qv-price-box #qvPrice .original-price { color: rgba(255,255,255,0.85); text-shadow: 0 1px 2px rgba(0,0,0,0.18); }
        /* Supplier price button + panel */
        .qv-supplier-btn {
            margin: 0;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(0,0,0,0.06);
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
            cursor: pointer;
            color: #fff;
            font-size: 20px;
            line-height: 1;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: -28px;
            z-index: 2;
            filter: drop-shadow(0 6px 12px rgba(0,0,0,0.2));
        }
        .qv-supplier-btn .icon { transition: transform 0.2s ease; display: inline-block; }
        .qv-supplier-btn.open .icon { transform: rotate(180deg); }
        .qv-supplier-panel {
            margin-top: 0; /* no reserved space when collapsed */
            border-radius: 16px;
            border: 1px solid rgba(0,0,0,0.06);
            overflow: hidden;
            max-height: 0;
            opacity: 0;
            transition: max-height 0.25s ease, opacity 0.25s ease, padding 0.25s ease, margin-top 0.25s ease;
            padding: 0 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
            pointer-events: none;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            align-items: center;
        }
        .qv-supplier-panel.open { max-height: 180px; opacity: 1; padding: 12px 16px; pointer-events: auto; margin-top: 12px; }
        .qv-supplier-panel, .qv-supplier-panel * { color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.18); }

        /* Profit bar */
        #qvSupplierText { text-align: left; grid-column: 1 / 2; }
        #qvSupplierLabel { font-weight: 700; }
        #qvSupplierValue { text-align: right; grid-column: 2 / 3; }

        .qv-profit-bar {
            margin-top: 6px;
            background: transparent;
            color: #fff;
            padding: 0;
            box-shadow: none;
            display: none;
            font-weight: 700;
            text-align: left;
            grid-column: 1 / -1; /* full width */
            display: none;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        .qv-profit-bar.show { display: flex; }
        .qv-profit-bar .qv-num { color: #22c55e; }
        .qv-profit-bar.neg .qv-num { color: #b91c1c; }
        /* No actions/button – only product and price */

        .product-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .product-item { pointer-events: auto; }

        .product-item:last-child {
            border-bottom: none;
        }

        .product-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 10px;
            margin-right: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            flex-shrink: 0;
        }
        .product-details {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .product-info {
            flex: 1;
        }

        .product-number {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 5px;
            display: block;
        }
        .product-name {
            font-size: 1.1rem;
            font-weight: 600;
            line-height: 1.3;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: 700;
            text-align: right;
            min-width: 80px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        /* Force high contrast where needed */
        .product-item .product-price.price-contrast { /* now unused after footer fade change */
            background: rgba(255,255,255,0.2);
            color: inherit;
            border: 2px solid rgba(255,255,255,0.3);
            box-shadow: none;
        }

        /* Slight separation for the last item */
        .products-list .product-item:last-child { box-shadow: 0 8px 22px rgba(0,0,0,0.08); }

        .footer {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-top: 40px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .footer-content p {
            margin-bottom: 8px;
            color: #2c3e50;
        }
        /* Responsivo */
        @media (max-width: 768px) {
            .container { padding: 15px; }
            .header h1 { font-size: 2rem; }
            /* Keep row structure on mobile */
            .product-item { padding: 12px 15px; flex-direction: row; text-align: left; gap: 10px; }
            .product-image { margin-right: 12px; margin-bottom: 0; }
            .product-details { width: 100%; flex-direction: row; gap: 10px; }
            .product-price { text-align: right; min-width: 64px; }
            .supplier-legend { flex-direction: row; flex-wrap: wrap; align-items: center; justify-content: center; gap: 6px; }
        }

        /* Additional responsive refinements */
        @media (max-width: 1024px) {
            .header h1 { font-size: clamp(1.6rem, 4vw, 2.2rem); }
            .category-header h2 { font-size: clamp(1.2rem, 2.4vw, 1.6rem); }
        }

        @media (max-width: 640px) {
            .search-box { padding: 6px 10px; }
            #searchInput { font-size: 0.95rem; }
            .search-filters {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                gap: 6px;
                padding-bottom: 4px;
                scrollbar-width: none; /* Firefox */
            }
            .search-filters::-webkit-scrollbar { display: none; }
            .filter-btn { flex: 0 0 auto; white-space: nowrap; padding: 8px 12px; }

            /* Supplier legend: tighter mobile grid only */
            .supplier-legend { display: grid; grid-template-columns: repeat(4, minmax(0, 1fr)); justify-content: center; align-items: center; gap: 6px 8px; max-width: 100%; }
            .legend-item { padding: 4px 8px; font-size: 0.78rem; }
            .legend-color { width: 12px; height: 12px; border: 1.5px solid rgba(255,255,255,0.8); }

            .category { margin-bottom: 24px; }
            .category-header { padding: 16px 18px; }
            .products-list { padding: 0; }
            .product-item { padding: 6px 8px; border-bottom: 0.35px solid rgba(255,255,255,0.12); }
            .product-image { width: 56px; height: 56px; }
            .product-image { border-width: 0.5px; }
            .product-name { font-size: 0.95rem; line-height: 1.2; }
            .product-price { font-size: 1rem; padding: 4px 8px; border-width: 0.5px; }

            .qv-modal { width: 96vw; border-radius: 18px; }
            .qv-body { max-height: 70vh; overflow-y: auto; }
            .qv-image-box img { max-height: 40vh; }
            .qv-price-box, .qv-supplier-panel, .qv-supplier-btn { border-width: 0.35px; }
            .discount-tag { transform: scale(0.8); }
            .discount-tag.gold { font-size: 0.85em; }
            .discount-tag.red { font-size: 0.8em; }

            /* Discount badge inside product rows - fit the smaller thumbnail */
            .discount-badge {
                top: 4px;
                left: 4px;
                padding: 2px 6px;
                font-size: 0.7rem;
                line-height: 1;
                max-width: 64px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                border-radius: 5px;
            }
            .discount-badge.gold { font-size: 0.72rem; }
            .discount-badge.red { font-size: 0.7rem; }
        }

        @media (max-width: 380px) {
            .header h1 { font-size: 1.4rem; }
            .subtitle { font-size: 0.95rem; }
            .product-image { width: 48px; height: 48px; }
            .product-name { font-size: 0.9rem; }
            .product-price { font-size: 0.95rem; padding: 3px 6px; }
            .qv-title { font-size: 0.95rem; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>🛍️ Fitrite.me Complete Catalog</h1>
            <p class="subtitle">312 unique products organized by supplier</p>
            <button id="hamburgerButton" class="hamburger-btn" aria-label="Open menu"><span class="hamburger-f">F</span></button>
            
            <!-- Barra de Pesquisa -->
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="🔍 Search products, prices, sections or suppliers..." />
                    <button id="clearSearch" class="clear-btn">✕</button>
                </div>
                <div class="search-filters">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="fitrite">Fitrite</button>
                    <button class="filter-btn" data-filter="bullet69">Bullet 69</button>
                    <button class="filter-btn" data-filter="rayflector">Rayflector</button>
                    <button class="filter-btn" data-filter="grinders">Grinders</button>
                    <button class="filter-btn" data-filter="euroaccessories">Euro Accessories</button>
                    <button class="filter-btn" data-filter="molimoj">Molimoj Bags</button>
                    <button class="filter-btn" data-filter="lucini">Lucini Shoes</button>
                    <button class="filter-btn" data-filter="bargains">Bargains</button>
                </div>
                <div class="search-results-info">
                    <span id="resultsCount">312 products found</span>
                </div>
            </div>
        </div>
    <div class="supplier-legend">
                <div class="legend-item">
                    <div class="legend-color fitrite-bg"></div>
                    <span>FITRITE</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color bullet69-bg"></div>
                    <span>BULLET 69</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color rayflector-bg"></div>
                    <span>RAYFLECTOR</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color grinders-bg"></div>
                    <span>GRINDERS</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color euroaccessories-bg"></div>
                    <span>EURO ACCESSORIES</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color molimoj-bg"></div>
                    <span>MOLIMOJ BAGS</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color lucini-bg"></div>
                    <span>LUCINI SHOES</span>
                </div>
            </div>
        </div>

        <!-- LEATHER JACKETS - FITRITE (Verde) -->
        <div class="category" id="cat-jackets">
            <div class="category-header">
                <div class="value-mode" role="group" aria-label="Value display mode">
                    <button class="mode-btn active" data-mode="price">Price</button>
                    <button class="mode-btn" data-mode="supplier">Supplier Cost</button>
                    <button class="mode-btn" data-mode="profit">Profit</button>
                </div>
                <h2>🧥 Leather Jackets</h2>
                <div class="category-info">Products 1-6 • 6 products • Supplier: FITRITE</div>
            </div>
            <div class="products-list">
                <div class="product-item fitrite-bg">
                    <img src="silver_streak_jacket.jpg" alt="Silver Streak Jacket" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#1</span>
                            <div class="product-name">Silver Streak Jacket</div>
                        </div>
                        <div class="product-price">£165</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="vintage_brown_bomber.jpg" alt="Vintage Brown Bomber Jacket" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#2</span>
                            <div class="product-name">Vintage Brown Bomber Jacket</div>
                        </div>
                        <div class="product-price">£135</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="modern_blue_moto.jpg" alt="Modern Blue Moto Jacket" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#3</span>
                            <div class="product-name">Modern Blue Moto Jacket</div>
                        </div>
                        <div class="product-price">£145</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="sleek_red_racer.jpg" alt="Sleek Red Racer Jacket" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#4</span>
                            <div class="product-name">Sleek Red Racer Jacket</div>
                        </div>
                        <div class="product-price">£155</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="rugged_green_field_jacket.jpg" alt="Rugged Green Field Jacket" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#5</span>
                            <div class="product-name">Rugged Green Field Jacket</div>
                        </div>
                        <div class="product-price">£140</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="metallic_finish_racer.jpg" alt="Metallic Finish Racer" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#6</span>
                            <div class="product-name">Metallic Finish Racer</div>
                        </div>
                        <div class="product-price">£175</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BELTS - BULLET 69 (Red) -->
        <div class="category" id="cat-belts">
            <div class="category-header">
                <div class="value-mode" role="group" aria-label="Value display mode">
                    <button class="mode-btn active" data-mode="price">Price</button>
                    <button class="mode-btn" data-mode="supplier">Supplier Cost</button>
                    <button class="mode-btn" data-mode="profit">Profit</button>
                </div>
                <h2>👔 Belts</h2>
                <div class="category-info">Products 7-17 • 11 products • Supplier: BULLET 69</div>
            </div>
            <div class="products-list">
                <div class="product-item bullet69-bg">
                    <img src="Belt1.jpg" alt="Classic Leather Belt" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#7</span>
                            <div class="product-name">2 ROW DOUBLE PRONG EYELET STUDDED BELT</div>
                        </div>
                        <div class="product-price">£25</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <img src="Belt2.webp" alt="Brown Leather Belt" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#8</span>
                            <div class="product-name">2 ROW EYELET STUDDED BELT</div>
                        </div>
                        <div class="product-price">£28</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <img src="Belt3.webp" alt="Black Dress Belt" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#9</span>
                            <div class="product-name">3 ROW SILVER/BLACK CHECK PYRAMID STUDDED BELT</div>
                        </div>
                        <div class="product-price">£32</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <img src="Belt4.webp" alt="Casual Canvas Belt" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#10</span>
                            <div class="product-name">BULLET BELT</div>
                        </div>
                        <div class="product-price">£18</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <img src="Belt5.webp" alt="Reversible Belt" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#11</span>
                            <div class="product-name">CHAIN BELT</div>
                        </div>
                        <div class="product-price">£35</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <img src="Belt6.webp" alt="Braided Leather Belt" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#12</span>
                            <div class="product-name">DOUBLE PRONG STUDDED BELT</div>
                        </div>
                        <div class="product-price">£30</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <img src="Belt7.webp" alt="Western Style Belt" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#13</span>
                            <div class="product-name">EYELET STUDDED BELT</div>
                        </div>
                        <div class="product-price">£42</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <img src="Belt8.webp" alt="Metal Chain Belt" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#14</span>
                            <div class="product-name">PYRAMID STUDDED BELT</div>
                        </div>
                        <div class="product-price">£38</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <img src="Belt9.jpg" alt="Studded Leather Belt" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#15</span>
                            <div class="product-name">SKULL BUCKLE BELT</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <img src="Belt10.jpg" alt="Vintage Buckle Belt" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#16</span>
                            <div class="product-name">CLASSIC BLACK LEATHER BELT</div>
                        </div>
                        <div class="product-price">£40</div>
                    </div>
                </div>
                <div class="product-item bullet69-bg">
                    <img src="Belt11.webp" alt="Designer Logo Belt" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#17</span>
                            <div class="product-name">VINTAGE BROWN LEATHER BELT</div>
                        </div>
                        <div class="product-price">£55</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- FOOTWEAR - LUCINI SHOES (Laranja) + GRINDERS (Marrom) -->
        <div class="category" id="cat-footwear">
            <div class="category-header">
                <div class="value-mode" role="group" aria-label="Value display mode">
                    <button class="mode-btn active" data-mode="price">Price</button>
                    <button class="mode-btn" data-mode="supplier">Supplier Cost</button>
                    <button class="mode-btn" data-mode="profit">Profit</button>
                </div>
                <h2>👞 Footwear</h2>
                <div class="category-info">Produtos 18-79 • 62 produtos • Fornecedores: LUCINI SHOES (18-26) + GRINDERS (27-79)</div>
            </div>
            <div class="products-list">
                <!-- LUCINI SHOES - Sapatos Formais (18-26) - Laranja -->
                <div class="product-item lucini-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#18</span>
                            <div class="product-name">Oxford Dress Shoes</div>
                        </div>
                        <div class="product-price">£85</div>
                    </div>
                </div>
                
                <div class="product-item lucini-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#19</span>
                            <div class="product-name">Derby Formal Shoes</div>
                        </div>
                        <div class="product-price">£78</div>
                    </div>
                </div>
                
                <div class="product-item lucini-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#20</span>
                            <div class="product-name">Brogue Wingtip Shoes</div>
                        </div>
                        <div class="product-price">£92</div>
                    </div>
                </div>
                
                <div class="product-item lucini-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#21</span>
                            <div class="product-name">Monk Strap Shoes</div>
                        </div>
                        <div class="product-price">£88</div>
                    </div>
                </div>
                
                <div class="product-item lucini-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#22</span>
                            <div class="product-name">Loafer Slip-on Shoes</div>
                        </div>
                        <div class="product-price">£72</div>
                    </div>
                </div>
                
                <div class="product-item lucini-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#23</span>
                            <div class="product-name">Chelsea Boot Shoes</div>
                        </div>
                        <div class="product-price">£95</div>
                    </div>
                </div>
                
                <div class="product-item lucini-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#24</span>
                            <div class="product-name">Chukka Desert Boots</div>
                        </div>
                        <div class="product-price">£82</div>
                    </div>
                </div>
                
                <div class="product-item lucini-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#25</span>
                            <div class="product-name">Dress Boot Formal</div>
                        </div>
                        <div class="product-price">£98</div>
                    </div>
                </div>
                
                <div class="product-item lucini-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#26</span>
                            <div class="product-name">Business Casual Shoes</div>
                        </div>
                        <div class="product-price">£75</div>
                    </div>
                </div>
                
                <!-- GRINDERS - Cowboy Boots (27-79) - Marrom -->
                <div class="product-item grinders-bg">
                    <img src="Cowboy0.jpg" alt="Classic Cowboy Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#27</span>
                            <div class="product-name">Arizona Lo</div>
                        </div>
                        <div class="product-price">£120</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy1.jpg" alt="Western Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#28</span>
                            <div class="product-name">Arizona</div>
                        </div>
                        <div class="product-price">£135</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy-1.jpg" alt="Vintage Cowboy Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#29</span>
                            <div class="product-name">Zip & Lace</div>
                        </div>
                        <div class="product-price">£145</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy2.jpg" alt="Rodeo Style Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#30</span>
                            <div class="product-name">Austin</div>
                        </div>
                        <div class="product-price">£128</div>
                    </div>
                </div>
                <div class="product-item grinders-bg">
                    <img src="Cowboy3.jpg" alt="Ranch Work Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#31</span>
                            <div class="product-name">Bald Eagle</div>
                        </div>
                        <div class="product-price">£115</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy4.jpg" alt="Embossed Cowboy Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#32</span>
                            <div class="product-name">Buffalo</div>
                        </div>
                        <div class="product-price">£155</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy5.jpg" alt="Pointed Toe Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#33</span>
                            <div class="product-name">Cedric</div>
                        </div>
                        <div class="product-price">£140</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy6.jpg" alt="Square Toe Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#34</span>
                            <div class="product-name">Cherokee</div>
                        </div>
                        <div class="product-price">£132</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy7.jpg" alt="Exotic Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#35</span>
                            <div class="product-name">Cheyenne</div>
                        </div>
                        <div class="product-price">£185</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy8.jpg" alt="Distressed Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#36</span>
                            <div class="product-name">Colorado</div>
                        </div>
                        <div class="product-price">£125</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy9.jpg" alt="Studded Western Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#37</span>
                            <div class="product-name">Crockett</div>
                        </div>
                        <div class="product-price">£165</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy11.jpg" alt="Snakeskin Pattern Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#39</span>
                            <div class="product-name">Denver</div>
                        </div>
                        <div class="product-price">£195</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy12.jpg" alt="Alligator Print Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#40</span>
                            <div class="product-name">El Paso</div>
                        </div>
                        <div class="product-price">£205</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy13.jpg" alt="Ostrich Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#41</span>
                            <div class="product-name">Frontier</div>
                        </div>
                        <div class="product-price">£225</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy14.jpg" alt="Lizard Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#42</span>
                            <div class="product-name">Harness</div>
                        </div>
                        <div class="product-price">£215</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy15.jpg" alt="Shark Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#43</span>
                            <div class="product-name">Houston</div>
                        </div>
                        <div class="product-price">£235</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy16.jpg" alt="Stingray Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#44</span>
                            <div class="product-name">Kansas</div>
                        </div>
                        <div class="product-price">£245</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy17.jpg" alt="Elephant Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#45</span>
                            <div class="product-name">Laredo</div>
                        </div>
                        <div class="product-price">£285</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy18.jpg" alt="Hippo Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#46</span>
                            <div class="product-name">Lone Star</div>
                        </div>
                        <div class="product-price">£295</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy19.jpg" alt="Kangaroo Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#47</span>
                            <div class="product-name">Maverick</div>
                        </div>
                        <div class="product-price">£165</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy20.jpg" alt="Buffalo Hide Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#48</span>
                            <div class="product-name">Memphis</div>
                        </div>
                        <div class="product-price">£155</div>
                    </div>
                </div>
                <div class="product-item grinders-bg">
                    <img src="Cowboy21.jpg" alt="Bison Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#49</span>
                            <div class="product-name">Montana</div>
                        </div>
                        <div class="product-price">£175</div>
                    </div>
                </div>
                <div class="product-item grinders-bg">
                    <img src="Cowboy22.jpg" alt="Deer Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#50</span>
                            <div class="product-name">Mustang</div>
                        </div>
                        <div class="product-price">£145</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy23.jpg" alt="Elk Hide Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#51</span>
                            <div class="product-name">Nevada</div>
                        </div>
                        <div class="product-price">£185</div>
                    </div>
                </div>
                <div class="product-item grinders-bg">
                    <img src="Cowboy24.jpg" alt="Moose Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#52</span>
                            <div class="product-name">Oklahoma</div>
                        </div>
                        <div class="product-price">£195</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy25.jpg" alt="Antelope Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#53</span>
                            <div class="product-name">Outlaw</div>
                        </div>
                        <div class="product-price">£165</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy26.jpg" alt="Wild Boar Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#54</span>
                            <div class="product-name">Phoenix</div>
                        </div>
                        <div class="product-price">£155</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy27.jpg" alt="Goat Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#55</span>
                            <div class="product-name">Ranger</div>
                        </div>
                        <div class="product-price">£135</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy28.jpg" alt="Sheep Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#56</span>
                            <div class="product-name">Rebel</div>
                        </div>
                        <div class="product-price">£125</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy29.jpg" alt="Lamb Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#57</span>
                            <div class="product-name">Rodeo</div>
                        </div>
                        <div class="product-price">£115</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy30.jpg" alt="Calf Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#58</span>
                            <div class="product-name">Rustler</div>
                        </div>
                        <div class="product-price">£145</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy31.jpg" alt="Horse Hide Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#59</span>
                            <div class="product-name">San Antonio</div>
                        </div>
                        <div class="product-price">£175</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy32.jpg" alt="Pony Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#60</span>
                            <div class="product-name">Sheriff</div>
                        </div>
                        <div class="product-price">£165</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy33.jpg" alt="Donkey Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#61</span>
                            <div class="product-name">Stallion</div>
                        </div>
                        <div class="product-price">£135</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy34.jpg" alt="Mule Hide Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#62</span>
                            <div class="product-name">Texan</div>
                        </div>
                        <div class="product-price">£145</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy35.jpg" alt="Zebra Print Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#63</span>
                            <div class="product-name">Thunder</div>
                        </div>
                        <div class="product-price">£255</div>
                    </div>
                </div>
                <div class="product-item grinders-bg">
                    <img src="Cowboy36.jpg" alt="Leopard Pattern Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#64</span>
                            <div class="product-name">Tombstone</div>
                        </div>
                        <div class="product-price">£265</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy37.jpg" alt="Tiger Stripe Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#65</span>
                            <div class="product-name">Tucson</div>
                        </div>
                        <div class="product-price">£275</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy38.jpg" alt="Cheetah Print Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#66</span>
                            <div class="product-name">Vaquero</div>
                        </div>
                        <div class="product-price">£285</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy39.jpg" alt="Jaguar Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#67</span>
                            <div class="product-name">Wichita</div>
                        </div>
                        <div class="product-price">£295</div>
                    </div>
                </div>
                <div class="product-item grinders-bg">
                    <img src="Cowboy40.jpg" alt="Panther Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#68</span>
                            <div class="product-name">Wild West</div>
                        </div>
                        <div class="product-price">£305</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy41.jpg" alt="Lion Hide Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#69</span>
                            <div class="product-name">Wyoming</div>
                        </div>
                        <div class="product-price">£315</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy42.jpg" alt="Bear Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#70</span>
                            <div class="product-name">Yukon</div>
                        </div>
                        <div class="product-price">£325</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy43.jpg" alt="Wolf Leather Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#71</span>
                            <div class="product-name">Zorro</div>
                        </div>
                        <div class="product-price">£275</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy44.jpg" alt="Fox Fur Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#72</span>
                            <div class="product-name">Apache</div>
                        </div>
                        <div class="product-price">£225</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy45.jpg" alt="Rabbit Skin Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#73</span>
                            <div class="product-name">Bronco</div>
                        </div>
                        <div class="product-price">£95</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy46.jpg" alt="Mink Fur Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#74</span>
                            <div class="product-name">Desperado</div>
                        </div>
                        <div class="product-price">£385</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy47.jpg" alt="Chinchilla Fur Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#75</span>
                            <div class="product-name">Gunslinger</div>
                        </div>
                        <div class="product-price">£485</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy48.jpg" alt="Sable Fur Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#76</span>
                            <div class="product-name">Regent CS</div>
                        </div>
                        <div class="product-price">£585</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy49.jpg" alt="Ermine Fur Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#77</span>
                            <div class="product-name">Renegade Hi</div>
                        </div>
                        <div class="product-price">£685</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy50.jpg" alt="Lynx Fur Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#78</span>
                            <div class="product-name">Renegade Lo</div>
                        </div>
                        <div class="product-price">£785</div>
                    </div>
                </div>
                
                <div class="product-item grinders-bg">
                    <img src="Cowboy51.jpg" alt="Bobcat Fur Boots" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#79</span>
                            <div class="product-name">Ryan ACS</div>
                        </div>
                        <div class="product-price">£885</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- SUNGLASSES - RAYFLECTOR (Dourado) -->
        <div class="category" id="cat-sunglasses">
            <div class="category-header">
                <div class="value-mode" role="group" aria-label="Value display mode">
                    <button class="mode-btn active" data-mode="price">Price</button>
                    <button class="mode-btn" data-mode="supplier">Supplier Cost</button>
                    <button class="mode-btn" data-mode="profit">Profit</button>
                </div>
                <h2>🕶️ Sunglasses</h2>
                <div class="category-info">Produtos 80-124 • 45 produtos • Fornecedor: RAYFLECTOR</div>
            </div>
            <div class="products-list">
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses47.jpg" alt="Wayfarer Classic Black" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#80</span>
                            <div class="product-name">Wayfarer Classic Black</div>
                        </div>
                        <div class="product-price">£28</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses48.jpg" alt="Aviator Silver Mirror" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#81</span>
                            <div class="product-name">Aviator Silver Mirror</div>
                        </div>
                        <div class="product-price">£30</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses49.jpg" alt="Retro Round Brown" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#82</span>
                            <div class="product-name">Retro Round Brown</div>
                        </div>
                        <div class="product-price">£60</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses50.jpg" alt="Oversized Gradient" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#83</span>
                            <div class="product-name">Oversized Gradient</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses5.webp" alt="Oversized Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#84</span>
                            <div class="product-name">Square Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£48</div>
                    </div>
                </div>
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses6.webp" alt="Sport Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#85</span>
                            <div class="product-name">Polarized Driving Sunglasses</div>
                        </div>
                        <div class="product-price">£52</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses7.webp" alt="Polarized Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#86</span>
                            <div class="product-name">Designer Oversized Sunglasses</div>
                        </div>
                        <div class="product-price">£65</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses8.webp" alt="Mirrored Lens Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#87</span>
                            <div class="product-name">Mirrored Lens Sunglasses</div>
                        </div>
                        <div class="product-price">£58</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses9.webp" alt="Gradient Lens Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#88</span>
                            <div class="product-name">Gradient Lens Sunglasses</div>
                        </div>
                        <div class="product-price">£46</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses10.webp" alt="Vintage Retro Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#89</span>
                            <div class="product-name">Wayfarer Style Sunglasses</div>
                        </div>
                        <div class="product-price">£41</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses11.webp" alt="Designer Frame Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#90</span>
                            <div class="product-name">Clubmaster Sunglasses</div>
                        </div>
                        <div class="product-price">£75</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses12.webp" alt="Luxury Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#91</span>
                            <div class="product-name">Pilot Sunglasses</div>
                        </div>
                        <div class="product-price">£95</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses13.webp" alt="Shield Style Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#92</span>
                            <div class="product-name">Butterfly Sunglasses</div>
                        </div>
                        <div class="product-price">£68</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses14.webp" alt="Rimless Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#93</span>
                            <div class="product-name">Shield Sunglasses</div>
                        </div>
                        <div class="product-price">£72</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses15.webp" alt="Half-rim Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#94</span>
                            <div class="product-name">Geometric Sunglasses</div>
                        </div>
                        <div class="product-price">£55</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses16.webp" alt="Full-rim Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#95</span>
                            <div class="product-name">Hexagonal Sunglasses</div>
                        </div>
                        <div class="product-price">£49</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses17.webp" alt="Thick Frame Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#96</span>
                            <div class="product-name">Rimless Sunglasses</div>
                        </div>
                        <div class="product-price">£43</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglases18.webp" alt="Thin Frame Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#97</span>
                            <div class="product-name">Tinted Lens Sunglasses</div>
                        </div>
                        <div class="product-price">£39</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses19.webp" alt="Wire Frame Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#98</span>
                            <div class="product-name">Photochromic Sunglasses</div>
                        </div>
                        <div class="product-price">£47</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses20.webp" alt="Plastic Frame Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#99</span>
                            <div class="product-name">Blue Light Blocking Sunglasses</div>
                        </div>
                        <div class="product-price">£32</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses21.webp" alt="Acetate Frame Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#100</span>
                            <div class="product-name">Wraparound Sunglasses</div>
                        </div>
                        <div class="product-price">£56</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses22.webp" alt="Carbon Fiber Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#101</span>
                            <div class="product-name">Flip-up Sunglasses</div>
                        </div>
                        <div class="product-price">£85</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses23.webp" alt="Aluminum Frame Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#102</span>
                            <div class="product-name">Clip-on Sunglasses</div>
                        </div>
                        <div class="product-price">£78</div>
                    </div>
                </div>
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses24.webp" alt="Stainless Steel Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#103</span>
                            <div class="product-name">Floating Sunglasses</div>
                        </div>
                        <div class="product-price">£82</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses25.webp" alt="Titanium Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#104</span>
                            <div class="product-name">Bamboo Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£125</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses26.webp" alt="Gold Plated Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#105</span>
                            <div class="product-name">Wood Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£165</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses27.webp" alt="Silver Plated Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#106</span>
                            <div class="product-name">Metal Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£145</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses28.webp" alt="Rose Gold Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#107</span>
                            <div class="product-name">Titanium Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£155</div>
                    </div>
                </div>
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses30.webp" alt="Copper Frame Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#109</span>
                            <div class="product-name">Acetate Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£88</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses31.webp" alt="Gunmetal Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#110</span>
                            <div class="product-name">TR90 Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£76</div>
                    </div>
                </div>
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses32.webp" alt="Matte Black Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#111</span>
                            <div class="product-name">Polycarbonate Sunglasses</div>
                        </div>
                        <div class="product-price">£54</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses33.webp" alt="Glossy Black Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#112</span>
                            <div class="product-name">Nylon Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£48</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses34.webp" alt="White Frame Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#113</span>
                            <div class="product-name">Rubber Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£42</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses35.webp" alt="Clear Frame Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#114</span>
                            <div class="product-name">Silicone Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£36</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses36.webp" alt="Tortoiseshell Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#115</span>
                            <div class="product-name">Flexible Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£51</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses37.webp" alt="Leopard Print Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#116</span>
                            <div class="product-name">Memory Frame Sunglasses</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses38.webp" alt="Zebra Print Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#117</span>
                            <div class="product-name">Lightweight Sunglasses</div>
                        </div>
                        <div class="product-price">£43</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sungçasses39.webp" alt="Camouflage Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#118</span>
                            <div class="product-name">Heavy Duty Sunglasses</div>
                        </div>
                        <div class="product-price">£38</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses40.webp" alt="Floral Pattern Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#119</span>
                            <div class="product-name">Prescription Sunglasses</div>
                        </div>
                        <div class="product-price">£41</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Singlasses41.webp" alt="Geometric Pattern Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#120</span>
                            <div class="product-name">Reading Sunglasses</div>
                        </div>
                        <div class="product-price">£44</div>
                    </div>
                </div>
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses42.webp" alt="Abstract Design Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#121</span>
                            <div class="product-name">Bifocal Sunglasses</div>
                        </div>
                        <div class="product-price">£47</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses43.webp" alt="Artistic Frame Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#122</span>
                            <div class="product-name">Progressive Sunglasses</div>
                        </div>
                        <div class="product-price">£53</div>
                    </div>
                </div>
                
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses44.webp" alt="Limited Edition Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#123</span>
                            <div class="product-name">Safety Sunglasses</div>
                        </div>
                        <div class="product-price">£185</div>
                    </div>
                </div>
                <div class="product-item rayflector-bg">
                    <img src="Sunglasses45.webp" alt="Collector's Edition Sunglasses" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#124</span>
                            <div class="product-name">Kids Sunglasses</div>
                        </div>
                        <div class="product-price">£225</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- CAPS AND HATS - FITRITE (Verde) + EURO ACCESSORIES (Azul) -->
        <div class="category" id="cat-hats">
            <div class="category-header">
                <div class="value-mode" role="group" aria-label="Value display mode">
                    <button class="mode-btn active" data-mode="price">Price</button>
                    <button class="mode-btn" data-mode="supplier">Supplier Cost</button>
                    <button class="mode-btn" data-mode="profit">Profit</button>
                </div>
                <h2>🎩 Caps and Hats</h2>
                <div class="category-info">Produtos 125-150 • 26 produtos • Fornecedores: FITRITE (125-140) + EURO ACCESSORIES (141-150)</div>
            </div>
            <div class="products-list">
                <!-- FITRITE - Primeira metade (125-140) - Verde -->
                <div class="product-item fitrite-bg">
                    <img src="Hat1.jpg" alt="Classic Baseball Cap" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#125</span>
                            <div class="product-name">Classic Baseball Cap</div>
                        </div>
                        <div class="product-price">£18</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat2.jpg" alt="Vintage Trucker Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#126</span>
                            <div class="product-name">Vintage Trucker Hat</div>
                        </div>
                        <div class="product-price">£22</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat4.jpg" alt="Snapback Cap" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#127</span>
                            <div class="product-name">Snapback Cap</div>
                        </div>
                        <div class="product-price">£25</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat5.jpg" alt="Fitted Baseball Cap" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#128</span>
                            <div class="product-name">Fitted Baseball Cap</div>
                        </div>
                        <div class="product-price">£28</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat6.jpg" alt="Dad Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#129</span>
                            <div class="product-name">Dad Hat</div>
                        </div>
                        <div class="product-price">£20</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat7.jpg" alt="Bucket Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#130</span>
                            <div class="product-name">Bucket Hat</div>
                        </div>
                        <div class="product-price">£24</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat8.jpg" alt="Beanie Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#131</span>
                            <div class="product-name">Beanie Hat</div>
                        </div>
                        <div class="product-price">£16</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat9.jpg" alt="Fedora Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#132</span>
                            <div class="product-name">Fedora Hat</div>
                        </div>
                        <div class="product-price">£35</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat10.jpg" alt="Panama Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#133</span>
                            <div class="product-name">Panama Hat</div>
                        </div>
                        <div class="product-price">£42</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hats11.jpg" alt="Cowboy Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#134</span>
                            <div class="product-name">Cowboy Hat</div>
                        </div>
                        <div class="product-price">£48</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat12.jpg" alt="Beret" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#135</span>
                            <div class="product-name">Beret</div>
                        </div>
                        <div class="product-price">£26</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat13.jpg" alt="Newsboy Cap" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#136</span>
                            <div class="product-name">Newsboy Cap</div>
                        </div>
                        <div class="product-price">£30</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat14.jpg" alt="Flat Cap" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#137</span>
                            <div class="product-name">Flat Cap</div>
                        </div>
                        <div class="product-price">£32</div>
                    </div>
                </div>
                <div class="product-item fitrite-bg">
                    <img src="Hat15.jpg" alt="Boater Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#138</span>
                            <div class="product-name">Boater Hat</div>
                        </div>
                        <div class="product-price">£38</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat16.jpg" alt="Top Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#139</span>
                            <div class="product-name">Top Hat</div>
                        </div>
                        <div class="product-price">£55</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Hat17.jpg" alt="Bowler Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#140</span>
                            <div class="product-name">Bowler Hat</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                <!-- EURO ACCESSORIES - Segunda metade (141-150) - Azul -->
                <div class="product-item euroaccessories-bg">
                    <img src="Hat18.jpg" alt="Red Wool Felt Trilby Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#141</span>
                            <div class="product-name">Red Wool Felt Trilby Hat</div>
                        </div>
                        <div class="product-price">£28</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Hat19.jpg" alt="Navy Blue Wool Felt Trilby Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#142</span>
                            <div class="product-name">Navy Blue Wool Felt Trilby Hat</div>
                        </div>
                        <div class="product-price">£33.6</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Hat20.jpg" alt="Purple Wool Felt Trilby Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#143</span>
                            <div class="product-name">Purple Wool Felt Trilby Hat</div>
                        </div>
                        <div class="product-price">£30.4</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Hat21.jpg" alt="Olive Green Wool Felt Trilby Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#144</span>
                            <div class="product-name">Olive Green Wool Felt Trilby Hat</div>
                        </div>
                        <div class="product-price">£36</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Hat22.jpg" alt="Brown Wool Felt Trilby Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#145</span>
                            <div class="product-name">Brown Wool Felt Trilby Hat</div>
                        </div>
                        <div class="product-price">£26.4</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Hat23.jpg" alt="Cream Wool Felt Trilby Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#146</span>
                            <div class="product-name">Cream Wool Felt Trilby Hat</div>
                        </div>
                        <div class="product-price">£32</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Hat24.jpg" alt="Black Wool Felt Trilby Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#147</span>
                            <div class="product-name">Black Wool Felt Trilby Hat</div>
                        </div>
                        <div class="product-price">£29.6</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Hat25.jpg" alt="Beige Straw Trilby Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#148</span>
                            <div class="product-name">Beige Straw Trilby Hat</div>
                        </div>
                        <div class="product-price">£30</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Hat26.jpg" alt="Brown Suede Cowboy Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#149</span>
                            <div class="product-name">Brown Suede Cowboy Hat</div>
                        </div>
                        <div class="product-price">£35.2</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Hat27.jpg" alt="Charcoal Grey Wool Felt Trilby Hat" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#150</span>
                            <div class="product-name">Charcoal Grey Wool Felt Trilby Hat</div>
                        </div>
                        <div class="product-price">£32.8</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- BAGS - MOLIMOJ BAGS (Roxo) -->
        <div class="category" id="cat-bags">
            <div class="category-header">
                <div class="value-mode" role="group" aria-label="Value display mode">
                    <button class="mode-btn active" data-mode="price">Price</button>
                    <button class="mode-btn" data-mode="supplier">Supplier Cost</button>
                    <button class="mode-btn" data-mode="profit">Profit</button>
                </div>
                <h2>👜 Bags</h2>
                <div class="category-info">Products 151-174 • 24 products • Suppliers: FITRITE (151-153) + MOLIMOJ BAGS (154-174)</div>
            </div>
            <div class="products-list">
                <div class="product-item fitrite-bg">
                    <img src="Bag1.jpg" alt="Leather Messenger Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#151</span>
                            <div class="product-name">Leather Messenger Bag</div>
                        </div>
                        <div class="product-price">£85</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Bag2.jpg" alt="Canvas Backpack" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#152</span>
                            <div class="product-name">Canvas Backpack</div>
                        </div>
                        <div class="product-price">£65</div>
                    </div>
                </div>
                
                <div class="product-item fitrite-bg">
                    <img src="Bag3.jpg" alt="Vintage Satchel" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#153</span>
                            <div class="product-name">Vintage Satchel</div>
                        </div>
                        <div class="product-price">£78</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag4.jpg" alt="Travel Duffel Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#154</span>
                            <div class="product-name">Travel Duffel Bag</div>
                        </div>
                        <div class="product-price">£95</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag5.jpg" alt="Laptop Briefcase" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#155</span>
                            <div class="product-name">Laptop Bag</div>
                        </div>
                        <div class="product-price">£105</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag6.jpg" alt="Crossbody Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#156</span>
                            <div class="product-name">Gym Bag</div>
                        </div>
                        <div class="product-price">£55</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag7.jpg" alt="Tote Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#157</span>
                            <div class="product-name">Crossbody Bag</div>
                        </div>
                        <div class="product-price">£48</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag8.jpg" alt="Shoulder Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#158</span>
                            <div class="product-name">Tote Bag</div>
                        </div>
                        <div class="product-price">£62</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag9.jpg" alt="Handbag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#159</span>
                            <div class="product-name">Clutch Bag</div>
                        </div>
                        <div class="product-price">£72</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag10.jpg" alt="Clutch Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#160</span>
                            <div class="product-name">Shoulder Bag</div>
                        </div>
                        <div class="product-price">£38</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag11.jpg" alt="Evening Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#161</span>
                            <div class="product-name">Handbag</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag12.jpg" alt="Weekend Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#162</span>
                            <div class="product-name">Evening Bag</div>
                        </div>
                        <div class="product-price">£88</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag13.jpg" alt="Gym Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#163</span>
                            <div class="product-name">Beach Bag</div>
                        </div>
                        <div class="product-price">£52</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag14.jpg" alt="Sports Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#164</span>
                            <div class="product-name">Shopping Bag</div>
                        </div>
                        <div class="product-price">£58</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag15.jpg" alt="Camera Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#165</span>
                            <div class="product-name">Weekender Bag</div>
                        </div>
                        <div class="product-price">£75</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag16.jpg" alt="Tool Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#166</span>
                            <div class="product-name">Camera Bag</div>
                        </div>
                        <div class="product-price">£42</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag17.jpg" alt="Medical Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#167</span>
                            <div class="product-name">Diaper Bag</div>
                        </div>
                        <div class="product-price">£68</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag18.jpg" alt="School Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#168</span>
                            <div class="product-name">School Bag</div>
                        </div>
                        <div class="product-price">£35</div>
                    </div>
                </div>
                <div class="product-item molimoj-bg">
                    <img src="Bag19.jpg" alt="Hiking Backpack" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#169</span>
                            <div class="product-name">Work Bag</div>
                        </div>
                        <div class="product-price">£125</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag20.jpg" alt="Tactical Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#170</span>
                            <div class="product-name">Sports Bag</div>
                        </div>
                        <div class="product-price">£95</div>
                    </div>
                </div>
                <div class="product-item molimoj-bg">
                    <img src="Bag21.jpg" alt="Military Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#171</span>
                            <div class="product-name">Hiking Backpack</div>
                        </div>
                        <div class="product-price">£115</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="Bag22.jpg" alt="Survival Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#172</span>
                            <div class="product-name">Fanny Pack</div>
                        </div>
                        <div class="product-price">£85</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="BagBlack.jpg" alt="Black Leather Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#173</span>
                            <div class="product-name">Black Leather Bag</div>
                        </div>
                        <div class="product-price">£92</div>
                    </div>
                </div>
                
                <div class="product-item molimoj-bg">
                    <img src="BlackBag.jpg" alt="Premium Black Bag" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#174</span>
                            <div class="product-name">Premium Black Bag</div>
                        </div>
                        <div class="product-price">£108</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- SCARVES - EURO ACCESSORIES (Azul) -->
        <div class="category" id="cat-scarves">
            <div class="category-header">
                <div class="value-mode" role="group" aria-label="Value display mode">
                    <button class="mode-btn active" data-mode="price">Price</button>
                    <button class="mode-btn" data-mode="supplier">Supplier Cost</button>
                    <button class="mode-btn" data-mode="profit">Profit</button>
                </div>
                <h2>🧣 Scarves</h2>
                <div class="category-info">Produtos 175-195 • 21 produtos • Fornecedor: EURO ACCESSORIES</div>
            </div>
            <div class="products-list">
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf1.jpg" alt="Wool Winter Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#175</span>
                            <div class="product-name">Silk Scarf</div>
                        </div>
                        <div class="product-price">£28</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf4.jpg" alt="Cashmere Luxury Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#176</span>
                            <div class="product-name">Wool Scarf</div>
                        </div>
                        <div class="product-price">£65</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf5.jpg" alt="Silk Elegant Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#177</span>
                            <div class="product-name">Cashmere Scarf</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf6.jpg" alt="Cotton Summer Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#178</span>
                            <div class="product-name">Cotton Scarf</div>
                        </div>
                        <div class="product-price">£22</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf7.jpg" alt="Linen Lightweight Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#179</span>
                            <div class="product-name">Linen Scarf</div>
                        </div>
                        <div class="product-price">£25</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf8.jpg" alt="Acrylic Warm Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#180</span>
                            <div class="product-name">Infinity Scarf</div>
                        </div>
                        <div class="product-price">£18</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf9.jpg" alt="Alpaca Soft Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#181</span>
                            <div class="product-name">Blanket Scarf</div>
                        </div>
                        <div class="product-price">£55</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf10.jpg" alt="Mohair Fluffy Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#182</span>
                            <div class="product-name">Pashmina Scarf</div>
                        </div>
                        <div class="product-price">£48</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf11.jpg" alt="Pashmina Shawl Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#183</span>
                            <div class="product-name">Shawl Scarf</div>
                        </div>
                        <div class="product-price">£38</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf12.jpg" alt="Infinity Loop Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#184</span>
                            <div class="product-name">Wrap Scarf</div>
                        </div>
                        <div class="product-price">£32</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf13.jpg" alt="Blanket Oversized Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#185</span>
                            <div class="product-name">Lightweight Scarf</div>
                        </div>
                        <div class="product-price">£42</div>
                    </div>
                </div>
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf14.jpg" alt="Plaid Pattern Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#186</span>
                            <div class="product-name">Heavy Winter Scarf</div>
                        </div>
                        <div class="product-price">£30</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf15.jpg" alt="Striped Design Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#187</span>
                            <div class="product-name">Printed Scarf</div>
                        </div>
                        <div class="product-price">£26</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf16.jpg" alt="Floral Print Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#188</span>
                            <div class="product-name">Solid Color Scarf</div>
                        </div>
                        <div class="product-price">£35</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf17.jpg" alt="Geometric Pattern Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#189</span>
                            <div class="product-name">Striped Scarf</div>
                        </div>
                        <div class="product-price">£33</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf18.jpg" alt="Animal Print Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#190</span>
                            <div class="product-name">Plaid Scarf</div>
                        </div>
                        <div class="product-price">£29</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Scarf19.jpg" alt="Solid Color Scarf" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#191</span>
                            <div class="product-name">Fringe Scarf</div>
                        </div>
                        <div class="product-price">£24</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="ScarfandBeanie2.jpg" alt="Scarf and Beanie Set" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#192</span>
                            <div class="product-name">Scarf and Beanie Set</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="ScarfandBeanie3.jpg" alt="Winter Accessories Set" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#193</span>
                            <div class="product-name">Winter Scarf Set</div>
                        </div>
                        <div class="product-price">£52</div>
                    </div>
                </div>
                <div class="product-item euroaccessories-bg">
                    <img src="ScarfandBeanie20.jpg" alt="Matching Scarf Beanie" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#194</span>
                            <div class="product-name">Luxury Scarf Collection</div>
                        </div>
                        <div class="product-price">£48</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="ScarfandBeanie21.jpg" alt="Complete Winter Set" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#195</span>
                            <div class="product-name">Designer Scarf Bundle</div>
                        </div>
                        <div class="product-price">£58</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- GLOVES - EURO ACCESSORIES (Azul) -->
        <div class="category" id="cat-gloves">
            <div class="category-header">
                <div class="value-mode" role="group" aria-label="Value display mode">
                    <button class="mode-btn active" data-mode="price">Price</button>
                    <button class="mode-btn" data-mode="supplier">Supplier Cost</button>
                    <button class="mode-btn" data-mode="profit">Profit</button>
                </div>
                <h2>🧤 Gloves</h2>
                <div class="category-info">Produtos 196-245 • 50 produtos • Fornecedor: EURO ACCESSORIES</div>
            </div>
            <div class="products-list">
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves1.jpg" alt="Leather Winter Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#196</span>
                            <div class="product-name">Leather Gloves</div>
                        </div>
                        <div class="product-price">£35</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves2.jpg" alt="Wool Knit Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#197</span>
                            <div class="product-name">Winter Gloves</div>
                        </div>
                        <div class="product-price">£22</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves3.jpg" alt="Touchscreen Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#198</span>
                            <div class="product-name">Wool Gloves</div>
                        </div>
                        <div class="product-price">£28</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves4.jpg" alt="Driving Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#199</span>
                            <div class="product-name">Cashmere Gloves</div>
                        </div>
                        <div class="product-price">£42</div>
                    </div>
                </div>
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves5.jpg" alt="Work Safety Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#200</span>
                            <div class="product-name">Touchscreen Gloves</div>
                        </div>
                        <div class="product-price">£18</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves6.jpg" alt="Gardening Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#201</span>
                            <div class="product-name">Driving Gloves</div>
                        </div>
                        <div class="product-price">£15</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves7.jpg" alt="Cycling Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#202</span>
                            <div class="product-name">Work Gloves</div>
                        </div>
                        <div class="product-price">£25</div>
                    </div>
                </div>
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves8.jpg" alt="Running Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#203</span>
                            <div class="product-name">Gardening Gloves</div>
                        </div>
                        <div class="product-price">£20</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves9.jpg" alt="Ski Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#204</span>
                            <div class="product-name">Sports Gloves</div>
                        </div>
                        <div class="product-price">£55</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves10.jpg" alt="Snowboard Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#205</span>
                            <div class="product-name">Cycling Gloves</div>
                        </div>
                        <div class="product-price">£58</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves11.jpg" alt="Hiking Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#206</span>
                            <div class="product-name">Running Gloves</div>
                        </div>
                        <div class="product-price">£32</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves12.jpg" alt="Climbing Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#207</span>
                            <div class="product-name">Hiking Gloves</div>
                        </div>
                        <div class="product-price">£38</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves13.jpg" alt="Fishing Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#208</span>
                            <div class="product-name">Ski Gloves</div>
                        </div>
                        <div class="product-price">£26</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves14.jpg" alt="Hunting Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#209</span>
                            <div class="product-name">Snowboard Gloves</div>
                        </div>
                        <div class="product-price">£35</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves15.jpg" alt="Tactical Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#210</span>
                            <div class="product-name">Waterproof Gloves</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves16.jpg" alt="Military Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#211</span>
                            <div class="product-name">Heated Gloves</div>
                        </div>
                        <div class="product-price">£48</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves17.jpg" alt="Mechanic Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#212</span>
                            <div class="product-name">Fingerless Gloves</div>
                        </div>
                        <div class="product-price">£22</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves18.jpg" alt="Welding Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#213</span>
                            <div class="product-name">Mittens</div>
                        </div>
                        <div class="product-price">£35</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves19.jpg" alt="Cut Resistant Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#214</span>
                            <div class="product-name">Convertible Gloves</div>
                        </div>
                        <div class="product-price">£28</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves20.jpg" alt="Heat Resistant Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#215</span>
                            <div class="product-name">Thermal Gloves</div>
                        </div>
                        <div class="product-price">£32</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves21.jpg" alt="Chemical Resistant Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#216</span>
                            <div class="product-name">Insulated Gloves</div>
                        </div>
                        <div class="product-price">£38</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves22.jpg" alt="Disposable Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#217</span>
                            <div class="product-name">Fleece Gloves</div>
                        </div>
                        <div class="product-price">£8</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves23.jpg" alt="Latex Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#218</span>
                            <div class="product-name">Knitted Gloves</div>
                        </div>
                        <div class="product-price">£12</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves24.jpg" alt="Nitrile Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#219</span>
                            <div class="product-name">Crochet Gloves</div>
                        </div>
                        <div class="product-price">£15</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves25.jpg" alt="Vinyl Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#220</span>
                            <div class="product-name">Lace Gloves</div>
                        </div>
                        <div class="product-price">£10</div>
                    </div>
                </div>
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves26.jpg" alt="Rubber Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#221</span>
                            <div class="product-name">Satin Gloves</div>
                        </div>
                        <div class="product-price">£18</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves27.jpg" alt="Silicone Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#222</span>
                            <div class="product-name">Velvet Gloves</div>
                        </div>
                        <div class="product-price">£25</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves28.jpg" alt="Neoprene Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#223</span>
                            <div class="product-name">Suede Gloves</div>
                        </div>
                        <div class="product-price">£30</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves29.jpg" alt="Kevlar Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#224</span>
                            <div class="product-name">Neoprene Gloves</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves30.jpg" alt="Nomex Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#225</span>
                            <div class="product-name">Rubber Gloves</div>
                        </div>
                        <div class="product-price">£52</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves31.jpg" alt="Carbon Fiber Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#226</span>
                            <div class="product-name">Latex Gloves</div>
                        </div>
                        <div class="product-price">£65</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves32.jpg" alt="Titanium Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#227</span>
                            <div class="product-name">Nitrile Gloves</div>
                        </div>
                        <div class="product-price">£85</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves33.jpg" alt="Stainless Steel Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#228</span>
                            <div class="product-name">Vinyl Gloves</div>
                        </div>
                        <div class="product-price">£75</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves34.jpg" alt="Chainmail Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#229</span>
                            <div class="product-name">Disposable Gloves</div>
                        </div>
                        <div class="product-price">£95</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves35.jpg" alt="Mesh Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#230</span>
                            <div class="product-name">Medical Gloves</div>
                        </div>
                        <div class="product-price">£35</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves36.jpg" alt="Fingerless Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#231</span>
                            <div class="product-name">Surgical Gloves</div>
                        </div>
                        <div class="product-price">£18</div>
                    </div>
                </div>
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves39.jpg" alt="Heated Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#234</span>
                            <div class="product-name">Heat Resistant Gloves</div>
                        </div>
                        <div class="product-price">£125</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves40.jpg" alt="Battery Powered Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#235</span>
                            <div class="product-name">Chemical Resistant Gloves</div>
                        </div>
                        <div class="product-price">£145</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves41.jpg" alt="USB Rechargeable Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#236</span>
                            <div class="product-name">Puncture Resistant Gloves</div>
                        </div>
                        <div class="product-price">£165</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves42.jpg" alt="Smart Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#237</span>
                            <div class="product-name">Anti-Vibration Gloves</div>
                        </div>
                        <div class="product-price">£185</div>
                    </div>
                </div>
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves43.jpg" alt="Bluetooth Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#238</span>
                            <div class="product-name">Grip Gloves</div>
                        </div>
                        <div class="product-price">£95</div>
                    </div>
                </div>
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves44.jpg" alt="LED Light Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#239</span>
                            <div class="product-name">Mechanic Gloves</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves45.jpg" alt="Reflective Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#240</span>
                            <div class="product-name">Welding Gloves</div>
                        </div>
                        <div class="product-price">£28</div>
                    </div>
                </div>
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves48.jpg" alt="Waterproof Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#242</span>
                            <div class="product-name">Industrial Gloves</div>
                        </div>
                        <div class="product-price">£38</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves49.jpg" alt="Windproof Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#243</span>
                            <div class="product-name">Heavy Duty Gloves</div>
                        </div>
                        <div class="product-price">£35</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Gloves50.jpg" alt="Breathable Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#244</span>
                            <div class="product-name">Professional Gloves</div>
                        </div>
                        <div class="product-price">£32</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Golves47.jpg" alt="Professional Gloves" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#245</span>
                            <div class="product-name">Construction Gloves</div>
                        </div>
                        <div class="product-price">£42</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- WALLETS - BULLET 69 (Vermelho) -->
        <div class="category" id="cat-wallets">
            <div class="category-header">
                <div class="value-mode" role="group" aria-label="Value display mode">
                    <button class="mode-btn active" data-mode="price">Price</button>
                    <button class="mode-btn" data-mode="supplier">Supplier Cost</button>
                    <button class="mode-btn" data-mode="profit">Profit</button>
                </div>
                <h2>💼 Wallets</h2>
                <div class="category-info">Produtos 246-295 • 50 produtos • Fornecedor: BULLET 69</div>
            </div>
            <div class="products-list">
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#246</span>
                            <div class="product-name">Bi-Fold Leather Wallet</div>
                        </div>
                        <div class="product-price">£35</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#247</span>
                            <div class="product-name">Tri-Fold Wallet</div>
                        </div>
                        <div class="product-price">£32</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#248</span>
                            <div class="product-name">Money Clip Wallet</div>
                        </div>
                        <div class="product-price">£28</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#249</span>
                            <div class="product-name">Card Holder Wallet</div>
                        </div>
                        <div class="product-price">£22</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#250</span>
                            <div class="product-name">RFID Blocking Wallet</div>
                        </div>
                        <div class="product-price">£38</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#251</span>
                            <div class="product-name">Minimalist Wallet</div>
                        </div>
                        <div class="product-price">£25</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#252</span>
                            <div class="product-name">Travel Wallet</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#253</span>
                            <div class="product-name">Chain Wallet</div>
                        </div>
                        <div class="product-price">£42</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#254</span>
                            <div class="product-name">Vintage Wallet</div>
                        </div>
                        <div class="product-price">£48</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#255</span>
                            <div class="product-name">Designer Wallet</div>
                        </div>
                        <div class="product-price">£55</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#256</span>
                            <div class="product-name">Business Wallet</div>
                        </div>
                        <div class="product-price">£40</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#257</span>
                            <div class="product-name">Casual Wallet</div>
                        </div>
                        <div class="product-price">£30</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#258</span>
                            <div class="product-name">Sports Wallet</div>
                        </div>
                        <div class="product-price">£26</div>
                    </div>
                </div>
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#259</span>
                            <div class="product-name">Outdoor Wallet</div>
                        </div>
                        <div class="product-price">£34</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#260</span>
                            <div class="product-name">Tactical Wallet</div>
                        </div>
                        <div class="product-price">£38</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#261</span>
                            <div class="product-name">Military Wallet</div>
                        </div>
                        <div class="product-price">£36</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#262</span>
                            <div class="product-name">Slim Wallet</div>
                        </div>
                        <div class="product-price">£24</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#263</span>
                            <div class="product-name">Compact Wallet</div>
                        </div>
                        <div class="product-price">£22</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#264</span>
                            <div class="product-name">Front Pocket Wallet</div>
                        </div>
                        <div class="product-price">£28</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#265</span>
                            <div class="product-name">Back Pocket Wallet</div>
                        </div>
                        <div class="product-price">£32</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#266</span>
                            <div class="product-name">Breast Pocket Wallet</div>
                        </div>
                        <div class="product-price">£35</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#267</span>
                            <div class="product-name">Coin Pocket Wallet</div>
                        </div>
                        <div class="product-price">£30</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#268</span>
                            <div class="product-name">ID Window Wallet</div>
                        </div>
                        <div class="product-price">£33</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#269</span>
                            <div class="product-name">Photo Wallet</div>
                        </div>
                        <div class="product-price">£29</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#270</span>
                            <div class="product-name">Checkbook Wallet</div>
                        </div>
                        <div class="product-price">£42</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#271</span>
                            <div class="product-name">Secretary Wallet</div>
                        </div>
                        <div class="product-price">£48</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#272</span>
                            <div class="product-name">Organizer Wallet</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#273</span>
                            <div class="product-name">Executive Wallet</div>
                        </div>
                        <div class="product-price">£52</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#274</span>
                            <div class="product-name">Professional Wallet</div>
                        </div>
                        <div class="product-price">£46</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#275</span>
                            <div class="product-name">Luxury Wallet</div>
                        </div>
                        <div class="product-price">£65</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#276</span>
                            <div class="product-name">Premium Wallet</div>
                        </div>
                        <div class="product-price">£58</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#277</span>
                            <div class="product-name">Handcrafted Wallet</div>
                        </div>
                        <div class="product-price">£55</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#278</span>
                            <div class="product-name">Artisan Wallet</div>
                        </div>
                        <div class="product-price">£60</div>
                    </div>
                </div>
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#279</span>
                            <div class="product-name">Custom Wallet</div>
                        </div>
                        <div class="product-price">£68</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#280</span>
                            <div class="product-name">Personalized Wallet</div>
                        </div>
                        <div class="product-price">£62</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#281</span>
                            <div class="product-name">Engraved Wallet</div>
                        </div>
                        <div class="product-price">£58</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#282</span>
                            <div class="product-name">Embossed Wallet</div>
                        </div>
                        <div class="product-price">£55</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#283</span>
                            <div class="product-name">Monogrammed Wallet</div>
                        </div>
                        <div class="product-price">£52</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#284</span>
                            <div class="product-name">Branded Wallet</div>
                        </div>
                        <div class="product-price">£48</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#285</span>
                            <div class="product-name">Logo Wallet</div>
                        </div>
                        <div class="product-price">£45</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#286</span>
                            <div class="product-name">Signature Wallet</div>
                        </div>
                        <div class="product-price">£50</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#287</span>
                            <div class="product-name">Classic Wallet</div>
                        </div>
                        <div class="product-price">£42</div>
                    </div>
                </div>
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#288</span>
                            <div class="product-name">Traditional Wallet</div>
                        </div>
                        <div class="product-price">£38</div>
                    </div>
                </div>
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#289</span>
                            <div class="product-name">Modern Wallet</div>
                        </div>
                        <div class="product-price">£40</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#290</span>
                            <div class="product-name">Contemporary Wallet</div>
                        </div>
                        <div class="product-price">£44</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#291</span>
                            <div class="product-name">Stylish Wallet</div>
                        </div>
                        <div class="product-price">£46</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#292</span>
                            <div class="product-name">Fashionable Wallet</div>
                        </div>
                        <div class="product-price">£48</div>
                    </div>
                </div>
                
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#293</span>
                            <div class="product-name">Trendy Wallet</div>
                        </div>
                        <div class="product-price">£42</div>
                    </div>
                </div>
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#294</span>
                            <div class="product-name">Elegant Wallet</div>
                        </div>
                        <div class="product-price">£50</div>
                    </div>
                </div>
                <div class="product-item bullet69-bg">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#295</span>
                            <div class="product-name">Sophisticated Wallet</div>
                        </div>
                        <div class="product-price">£55</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ACCESSORIES - EURO ACCESSORIES (Azul) -->
        <div class="category" id="cat-accessories">
            <div class="category-header">
                <div class="value-mode" role="group" aria-label="Value display mode">
                    <button class="mode-btn active" data-mode="price">Price</button>
                    <button class="mode-btn" data-mode="supplier">Supplier Cost</button>
                    <button class="mode-btn" data-mode="profit">Profit</button>
                </div>
                <h2>🎀 Accessories</h2>
                <div class="category-info">Produtos 296-312 • 17 produtos • Fornecedor: EURO ACCESSORIES</div>
            </div>
            <div class="products-list">
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories1.jpg" alt="Leather Keychain" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#296</span>
                            <div class="product-name">Leather Keychain</div>
                        </div>
                        <div class="product-price">£19.99</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories2.jpg" alt="Metal Keyring" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#297</span>
                            <div class="product-name">Metal Keyring</div>
                        </div>
                        <div class="product-price">£18.99</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories3.jpg" alt="Bottle Opener Keychain" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#298</span>
                            <div class="product-name">Bottle Opener Keychain</div>
                        </div>
                        <div class="product-price">£11.99</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories4.jpg" alt="Multi-tool Keychain" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#299</span>
                            <div class="product-name">Multi-tool Keychain</div>
                        </div>
                        <div class="product-price">£13.99</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories5.jpg" alt="LED Flashlight Keychain" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#300</span>
                            <div class="product-name">LED Flashlight Keychain</div>
                        </div>
                        <div class="product-price">£14.99</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories6.jpg" alt="Carabiner Clip" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#301</span>
                            <div class="product-name">Carabiner Clip</div>
                        </div>
                        <div class="product-price">£12.99</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories7.jpg" alt="Phone Holder" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#302</span>
                            <div class="product-name">Phone Holder</div>
                        </div>
                        <div class="product-price">£16.99</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories8.jpg" alt="Card Holder Clip" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#303</span>
                            <div class="product-name">Card Holder Clip</div>
                        </div>
                        <div class="product-price">£17.99</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories9.jpg" alt="Badge Holder" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#304</span>
                            <div class="product-name">Badge Holder</div>
                        </div>
                        <div class="product-price">£22.99</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories10.jpg" alt="Lanyard" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#305</span>
                            <div class="product-name">Lanyard</div>
                        </div>
                        <div class="product-price">£29.99</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories11.jpg" alt="Wrist Strap" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#306</span>
                            <div class="product-name">Wrist Strap</div>
                        </div>
                        <div class="product-price">£12.50</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories12.jpg" alt="Belt Clip" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#307</span>
                            <div class="product-name">Belt Clip</div>
                        </div>
                        <div class="product-price">£17.50</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories13.jpg" alt="Magnetic Holder" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#308</span>
                            <div class="product-name">Magnetic Holder</div>
                        </div>
                        <div class="product-price">£20.00</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories14.jpg" alt="Retractable Cord" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#309</span>
                            <div class="product-name">Retractable Cord</div>
                        </div>
                        <div class="product-price">£20.99</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories15.jpg" alt="Spring Clip" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#310</span>
                            <div class="product-name">Spring Clip</div>
                        </div>
                        <div class="product-price">£10.00</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories16.jpg" alt="Safety Pin" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#311</span>
                            <div class="product-name">Safety Pin</div>
                        </div>
                        <div class="product-price">£17.98</div>
                    </div>
                </div>
                
                <div class="product-item euroaccessories-bg">
                    <img src="Accessories17.jpg" alt="Utility Hook" class="product-image">
                    <div class="product-details">
                        <div class="product-info">
                            <span class="product-number">#312</span>
                            <div class="product-name">Utility Hook</div>
                        </div>
                        <div class="product-price">£15.99</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- Edge navigation buttons -->
        <button id="edgeTop" class="edge-nav-btn edge-top" aria-label="Scroll to top">▲</button>
        <button id="edgeBottom" class="edge-nav-btn edge-bottom" aria-label="Scroll to bottom">▼</button>

        <!-- Floating emoji catalogue nav, placed under header -->
        <div class="floating-catalog" aria-label="Catalogue navigation">
            <div class="catalog-page" data-page="1">
                <button class="catalog-btn" data-target="#cat-jackets" aria-label="Leather Jackets"><span class="emoji"><img src="Symbol1.jpg" alt="Leather Jackets"></span><span class="label">LEATHER JACKETS</span></button>
                <button class="catalog-btn" data-target="#cat-sunglasses" aria-label="Sunglasses"><span class="emoji"><img src="Symbol2.webp" alt="Sunglasses"></span><span class="label">SUNGLASSES</span></button>
                <button class="catalog-btn" data-target="#cat-bags" aria-label="Bags"><span class="emoji"><img src="Symbol3.png" alt="Bags"></span><span class="label">BAGS</span></button>
                <button class="catalog-btn" data-target="#cat-footwear" aria-label="Footwear"><span class="emoji"><img src="Symbol9.webp" alt="Footwear"></span><span class="label">FOOTWEAR</span></button>
            </div>
            <div class="catalog-page" data-page="2">
                <button class="catalog-btn" data-target="#cat-hats" aria-label="Caps & Hats"><span class="emoji"><img src="Symbol10.webp" alt="Caps & Hats"></span><span class="label">CAPS & HATS</span></button>
                <button class="catalog-btn" data-target="#cat-belts" aria-label="Belts"><span class="emoji"><img src="Symbol8.jpg" alt="Belts"></span><span class="label">BELTS</span></button>
                <button class="catalog-btn" data-target="#cat-gloves" aria-label="Gloves"><span class="emoji"><img src="Symbol6.jpg" alt="Gloves"></span><span class="label">GLOVES</span></button>
                <button class="catalog-btn" data-target="#cat-accessories" aria-label="Accessories"><span class="emoji"><img src="Accessories.jpg" alt="Accessories"></span><span class="label">ACCESSORIES</span></button>
                <button class="catalog-btn" data-target="#cat-scarves" aria-label="Scarves"><span class="emoji"><img src="Symbol4.jpg" alt="Scarves"></span><span class="label">SCARVES</span></button>
            </div>
        </div>
        <div id="catalogDots" class="catalog-dots" aria-hidden="true"><span class="dot active" aria-label="Page 1"></span><span class="dot" aria-label="Page 2"></span></div>
        <div id="catalogHoverBackdrop" aria-hidden="true"></div>
        <!-- App-level menu and views -->
        <div id="menuOverlay" class="menu-overlay" aria-hidden="true">
            <div class="menu-drawer" role="dialog" aria-label="Main menu">
                <div class="menu-header"><div class="menu-logo"><span class="f"></span></div><div></div></div>
                <ul class="menu-list">
                    <li class="menu-item" data-view="catalogue">Catalogue</li>
                    <li class="menu-item" data-view="sales">Sales</li>
                    <li class="menu-item" data-view="status">Status</li>
                    <li class="menu-item" data-view="data">Data</li>
                </ul>
            </div>
        </div>
        <div id="viewOverlay" class="view-overlay" aria-hidden="true">
            <div class="view-head">
                <div id="viewTitle" class="view-title">View</div>
            </div>
            <div id="viewBody" class="view-body">
                <div class="view-empty">This section will show its own content as if it were a separate page.</div>
            </div>
        </div>

        <!-- Quick View Modal -->
        <div class="qv-overlay" id="quickViewModal" aria-hidden="true" role="dialog">
            <div class="qv-modal" role="document">
                <div class="qv-head">
                    <div class="qv-title" id="qvTitle">Product</div>
                    <button class="qv-close" id="qvClose" aria-label="Close">×</button>
            </div>
                <div class="qv-body">
                    <div class="qv-image-box"><img id="qvImage" alt="Product image"></div>
                    <div class="qv-price-box">
                        <div class="label">Price</div>
                        <div id="qvPrice"></div>
                    </div>
                    <button class="qv-supplier-btn" id="qvSupplierBtn" aria-label="Show supplier price"><span class="icon">▼</span></button>
                    <div class="qv-supplier-panel" id="qvSupplierPanel">
                        <div id="qvSupplierText" style="font-weight:600"></div>
                        <div id="qvSupplierValue" class="qv-num"></div>
                        <div id="qvProfitBar" class="qv-profit-bar"></div>
                    </div>
                </div>
        </div>
    </div>
    <script>
        (function() {
            const normalize = (text) => (text || "")
                .toString()
                .normalize('NFD')
                .replace(/\p{Diacritic}+/gu, '')
                .toLowerCase();

            const escapeRegExp = (str) => str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');

            const supplierClassByKey = {
                all: '',
                fitrite: 'fitrite-bg',
                bullet69: 'bullet69-bg',
                rayflector: 'rayflector-bg',
                grinders: 'grinders-bg',
                euroaccessories: 'euroaccessories-bg',
                molimoj: 'molimoj-bg',
                lucini: 'lucini-bg'
            };

            const supplierNameByClass = {
                'fitrite-bg': 'fitrite',
                'bullet69-bg': 'bullet 69',
                'rayflector-bg': 'rayflector',
                'grinders-bg': 'grinders',
                'euroaccessories-bg': 'euro accessories',
                'molimoj-bg': 'molimoj bags',
                'lucini-bg': 'lucini shoes'
            };

            // Base supplier colors to tint the Glacier modal
            const supplierColorByClass = {
                'fitrite-bg': '#059669',
                'bullet69-bg': '#DC2626',
                'rayflector-bg': '#F59E0B',
                'grinders-bg': '#B06F3C',
                'euroaccessories-bg': '#1E40AF',
                'molimoj-bg': '#7C3AED',
                'lucini-bg': '#EA580C'
            };

            // Colorize each category header to match its list supplier(s)
            function applyCategoryHeaderColors() {
                categories.forEach((cat) => {
                    const header = cat.querySelector('.category-header');
                    if (!header) return;
                    const items = Array.from(cat.querySelectorAll('.product-item'));
                    const uniqueSupplierClasses = new Set();
                    const colors = [];
                    const countsByClass = new Map();
                    const itemCount = items.length;
                    // Slow factor for long lists: >6 items scales gradient length
                    const slowFactor = Math.min(4, 1 + Math.max(0, itemCount - 6) / 10); // 1x .. 4x
                    items.forEach((item) => {
                        const cls = getSupplierClass(item);
                        if (!cls) return;
                        countsByClass.set(cls, (countsByClass.get(cls) || 0) + 1);
                        if (!uniqueSupplierClasses.has(cls)) {
                            uniqueSupplierClasses.add(cls);
                            const hex = supplierColorByClass[cls];
                            if (hex) colors.push(hex);
                        }
                    });
                    if (colors.length === 0) {
                        // Fallback: infer supplier from category info text if rows lack class
                        const infoText = (cat.querySelector('.category-info')?.textContent || '').toLowerCase();
                        const supplierKey =
                            infoText.includes('fitrite') ? 'fitrite-bg' :
                            infoText.includes('bullet 69') ? 'bullet69-bg' :
                            infoText.includes('rayflector') ? 'rayflector-bg' :
                            infoText.includes('grinders') ? 'grinders-bg' :
                            infoText.includes('euro accessories') ? 'euroaccessories-bg' :
                            infoText.includes('molimoj') ? 'molimoj-bg' :
                            infoText.includes('lucini') ? 'lucini-bg' : '';
                        if (supplierKey && supplierColorByClass[supplierKey]) {
                            const baseHex = supplierColorByClass[supplierKey];
                            // Header stays diagonal glacier; rows revert to adaptive vertical pacing
                            const headerBgCool = `linear-gradient(135deg, ${baseHex} 0%, rgba(255,255,255,0.9) 100%)`;
                            header.style.background = headerBgCool;
                            // Match toolbar to header style
                            const tb = cat.querySelector('.value-mode');
                            if (tb) {
                                tb.style.background = headerBgCool;
                                const rgb = hexToRgb(baseHex);
                                tb.style.boxShadow = `0 8px 18px rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.24)`;
                                tb.style.borderColor = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.35)`;
                                tb.style.setProperty('--vm-active-bg', baseHex);
                                tb.style.setProperty('--vm-active-border', `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.7)`);
                            }
                            const list = cat.querySelector('.products-list');
                            if (list) {
                                // Remove list-level gradient; rows handle their own gradient
                                list.style.background = '';
                                list.style.backgroundRepeat = '';
                                list.style.backgroundPosition = '';
                                list.style.backgroundSize = '';
                            }
                        }
                        return;
                    }
                    if (colors.length === 1) {
                        const baseHex = colors[0];
                        const { r, g, b } = hexToRgb(baseHex);
                        // Header remains diagonal glacier; rows revert to adaptive pacing
                        const headerBgCool = `linear-gradient(135deg, ${baseHex} 0%, rgba(255,255,255,0.9) 100%)`;
                        header.style.background = headerBgCool;
                        header.style.boxShadow = `0 6px 16px rgba(${r}, ${g}, ${b}, 0.35)`;
                        const tb = cat.querySelector('.value-mode');
                        if (tb) {
                            tb.style.background = headerBgCool;
                            tb.style.boxShadow = `0 8px 18px rgba(${r}, ${g}, ${b}, 0.24)`;
                            tb.style.borderColor = `rgba(${r}, ${g}, ${b}, 0.35)`;
                            tb.style.setProperty('--vm-active-bg', baseHex);
                            tb.style.setProperty('--vm-active-border', `rgba(${r}, ${g}, ${b}, 0.7)`);
                        }
                        const list = cat.querySelector('.products-list');
                        if (list) {
                            const titleText = (header.querySelector('h2')?.textContent || '').toLowerCase();
                            if (titleText.includes('leather jacket')) {
                                const itemsInCat = Array.from(cat.querySelectorAll('.product-item'));
                                const second = itemsInCat[1];
                                const lastItem = itemsInCat[itemsInCat.length - 1];
                                // Map rows 2..last evenly from 0% to 27% (last row at 27%)
                                // Make rows #5 and #6 share the same apparent gradient by flattening the end color
                                // Silver underlay for the whole list + subtle footer fade below last row
                                const silverUnderlay = `linear-gradient(180deg, #ededed 0%, #cfcfcf 100%)`;
                                const footerFade = `linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)`;
                                list.style.backgroundImage = `${footerFade}, ${silverUnderlay}`;
                                list.style.backgroundRepeat = 'no-repeat, no-repeat';
                                if (second && lastItem) {
                                    const start = second.offsetTop;
                                    const end = lastItem.offsetTop + lastItem.offsetHeight;
                                    const span = Math.max(1, end - start);
                                    const footerStart = end + 1; // start just below last row
                                    const footerHeight = Math.min(64, Math.round(lastItem.offsetHeight * 0.8));
                                    list.style.backgroundPosition = `left ${footerStart}px, left top`;
                                    list.style.backgroundSize = `100% ${footerHeight}px, 100% 100%`;
                                } else {
                                    // Fallback if measurement fails
                                    list.style.backgroundPosition = 'left 100%, left top';
                                    list.style.backgroundSize = '100% 48px, 100% 100%';
                                }
                            } else {
                                // Remove list-level background entirely for single-supplier categories
                                list.style.background = '';
                                list.style.backgroundRepeat = '';
                                list.style.backgroundPosition = '';
                                list.style.backgroundSize = '';
                            }
                        }
                    } else if (colors.length === 2) {
                        // Two suppliers: proportional split ONLY for Bags; fixed split for others
                        const titleText = (header.querySelector('h2')?.textContent || '').toLowerCase();
                        const isBags = titleText.includes('bags');
                        const supplierClasses = Array.from(uniqueSupplierClasses);
                        const leftClass = supplierClasses[0];
                        const rightClass = supplierClasses[1];
                        const left = supplierColorByClass[leftClass];
                        const right = supplierColorByClass[rightClass];
                        const l = hexToRgb(left);
                        const r = hexToRgb(right);
                        let background;
                        if (isBags) {
                            const total = (countsByClass.get(leftClass) || 0) + (countsByClass.get(rightClass) || 0);
                            const leftPctRaw = total > 0 ? (countsByClass.get(leftClass) || 0) / total * 100 : 50;
                            // Ensure the green (left) side remains visible for longer
                            const leftPct = Math.max(30, Math.min(95, Math.round(leftPctRaw)));
                            const startBlend = Math.max(0, leftPct - 5); // wider blend for smoother transition
                            const endBlend = Math.min(100, leftPct + 5);
                            background = `
                                linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.18) 35%, rgba(255,255,255,0.40) 70%, rgba(255,255,255,0.62) 100%),
                                linear-gradient(90deg, ${left} 0%, ${left} ${startBlend}%, ${right} ${endBlend}%, ${right} 100%)`;
                        } else {
                            // Fixed gentle blend centered (hold colors at edges)
                            background = `
                                linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.18) 35%, rgba(255,255,255,0.40) 70%, rgba(255,255,255,0.62) 100%),
                                linear-gradient(90deg, ${left} 0%, ${left} 40%, ${right} 60%, ${right} 100%)`;
                        }
                        header.style.background = background;
                        const list = cat.querySelector('.products-list');
                        if (list) {
                            // Keep header gradient only; remove list-level gradient to avoid compounding transparency
                            list.style.background = '';
                            list.style.backgroundRepeat = '';
                            list.style.backgroundPosition = '';
                            list.style.backgroundSize = '';
                        }
                        header.style.boxShadow = `0 6px 16px rgba(${l.r}, ${l.g}, ${l.b}, 0.24), 0 6px 16px rgba(${r.r}, ${r.g}, ${r.b}, 0.24)`;
                        const tb = cat.querySelector('.value-mode');
                        if (tb) {
                            tb.style.background = background;
                            tb.style.boxShadow = `0 8px 18px rgba(${l.r}, ${l.g}, ${l.b}, 0.24)`;
                            tb.style.borderColor = `rgba(${l.r}, ${l.g}, ${l.b}, 0.35)`;
                            tb.style.setProperty('--vm-active-bg', left);
                            tb.style.setProperty('--vm-active-border', `rgba(${l.r}, ${l.g}, ${l.b}, 0.7)`);
                        }
                    } else {
                        // Up to three colors distributed across the width, with glacier overlay
                        const c1 = colors[0];
                        const c2 = colors[1] || colors[0];
                        const c3 = colors[2] || colors[1] || colors[0];
                        const rgb1 = hexToRgb(c1); const rgb3 = hexToRgb(c3);
                        const background = `
                            linear-gradient(135deg, rgba(255,255,255,0.85) 0%, rgba(255,255,255,0.0) 100%),
                            linear-gradient(90deg, ${c1} 0%, ${c2} 50%, ${c3} 100%)`;
                        header.style.background = background;
                        const list = cat.querySelector('.products-list');
                        if (list) {
                            // Remove list-level background to keep per-item gradients consistent
                            list.style.background = '';
                            list.style.backgroundRepeat = '';
                            list.style.backgroundPosition = '';
                            list.style.backgroundSize = '';
                        }
                        header.style.boxShadow = `0 6px 16px rgba(${rgb1.r}, ${rgb1.g}, ${rgb1.b}, 0.24), 0 6px 16px rgba(${rgb3.r}, ${rgb3.g}, ${rgb3.b}, 0.24)`;
                        const tb = cat.querySelector('.value-mode');
                        if (tb) {
                            tb.style.background = background;
                            tb.style.boxShadow = `0 8px 18px rgba(${rgb1.r}, ${rgb1.g}, ${rgb1.b}, 0.24)`;
                            tb.style.borderColor = `rgba(${rgb1.r}, ${rgb1.g}, ${rgb1.b}, 0.35)`;
                            tb.style.setProperty('--vm-active-bg', colors[0]);
                            tb.style.setProperty('--vm-active-border', `rgba(${rgb1.r}, ${rgb1.g}, ${rgb1.b}, 0.7)`);
                        }
                    }
                    header.style.color = '#fff';
                });
            }

            const searchInput = document.getElementById('searchInput');
            const clearBtn = document.getElementById('clearSearch');
            const resultsCountEl = document.getElementById('resultsCount');
            const filterButtons = Array.from(document.querySelectorAll('.filter-btn'));
            const productItems = Array.from(document.querySelectorAll('.product-item'));
            const categories = Array.from(document.querySelectorAll('.category'));
            const searchContainer = document.querySelector('.search-container');
            const modeButtons = Array.from(document.querySelectorAll('.mode-btn'));
            let valueMode = 'price'; // 'price' | 'supplier' | 'profit'

            // Ensure categories start hidden (headers not visible) until user interacts
            (function initialHideAllCategories(){
                categories.forEach((cat) => {
                    const header = cat.querySelector('.category-header');
                    if (header) header.setAttribute('aria-expanded', 'false');
                    cat.classList.add('collapsed');
                    cat.classList.add('hidden');
                    cat.dataset.forceHidden = '1';
                });
            })();

            // Bargains dataset (from bargains.html)
            const discountedProducts = [
              { id: 'glove1', name: 'Leather Gloves – Black Classic', category: 'gloves', imagePath: 'Gloves1.jpg', discountPercent: 45 },
              { id: 'glove3', name: 'Leather Gloves – Camel Shearling Cuff', category: 'gloves', imagePath: 'Gloves3.jpg', discountPercent: 30 },
              { id: 'glove5', name: 'Tartan Gloves – Brown/Black', category: 'gloves', imagePath: 'Gloves5.jpg', discountPercent: 60 },
              { id: 'bag1',  name: 'Retro Ringer', category: 'bags', imagePath: 'Bag1.jpg', discountPercent: 25 },
              { id: 'bag3',  name: 'Parisian Window', category: 'bags', imagePath: 'Bag3.jpg', discountPercent: 40 },
              { id: 'bag5',  name: 'Parisian Window', category: 'bags', imagePath: 'Bag5.jpg', discountPercent: 40 },
              { id: 'bag10', name: 'Crimson Allure', category: 'bags', imagePath: 'Bag5.jpg', discountPercent: 60 },
              { id: 'belt1', name: '2 Row Black Spike Studded Belt', category: 'belts', imagePath: 'Belt7.webp', discountPercent: 25 },
              { id: 'belt3', name: ' 3 Row Silver/Black Check Pyramid Studded Belt', category: 'belts', imagePath: 'Belt11.webp', discountPercent: 40 },
              { id: 'belt5', name: '3 Row Black Pyramid Studded Belt', category: 'belts', imagePath: 'Belt5.webp', discountPercent: 65 },
              { id: 'belt7', name: '2 Row Double Prong Eyelet Studded Belt', category: 'belts', imagePath: 'Belt2.webp', discountPercent: 30 },
              { id: 'cap/hat1', name: 'Crimson Wool Elegance', category: 'hats', imagePath: 'Hat12.jpg', discountPercent: 20 },
              { id: 'cap/hat3', name: 'Sand Linen Classic', category: 'hats', imagePath: 'Hat14.jpg', discountPercent: 30 },
              { id: 'cap/hat5', name: 'Amber Straw Flair', category: 'hats', imagePath: 'Hat15.jpg', discountPercent: 60 },
              { id: 'footwear1', name: 'Ridgewalker Classic', category: 'footwear', imagePath: 'Cowboy-1.jpg', discountPercent: 50 },
              { id: 'footwear2', name: 'Rose Rebel', category: 'footwear', imagePath: 'Cowboy0.jpg', discountPercent: 30 },
              { id: 'footwear3', name: 'Midnight Marcher', category: 'footwear', imagePath: 'Cowboy49.jpg', discountPercent: 60 },
              { id: 'leather_jacket2', name: 'Sleek Blue Racer', category: 'leather jackets', imagePath: 'sleek_red_racer.jpg', discountPercent: 60 },
              { id: 'leather_jacket3', name: 'Vintage Brown Bomber', category: 'leather jackets', imagePath: 'vintage_brown_bomber.jpg', discountPercent: 40 },
              { id: 'leather_jacket5', name: 'Modern Blue Moto', category: 'leather jackets', imagePath: 'modern_blue_moto.jpg', discountPercent: 70 },
              { id: 'scarf1', name: 'Plaid Woolly Scarf with Snowflake', category: 'scarves', imagePath: 'Scarf9.jpg', discountPercent: 60 },
              { id: 'scarf3', name: 'Camel Tone Ribbed Knit Scarf', category: 'scarves', imagePath: 'Scarf1.jpg', discountPercent: 65 },
              { id: 'scarf5', name: 'Charcoal Ribbed Knit Scarf', category: 'scarves', imagePath: 'Scarf5.jpg', discountPercent: 40 },
              { id: 'scarf7', name: 'Brown and Beige Knitted Beanie Beanie & Scarf Set', category: 'scarves', imagePath: 'ScarfandBeanie2.jpg', discountPercent: 35 },
              { id: 'sunglasses1', name: 'Sunglasses 1', category: 'sunglasses', imagePath: 'Sunglasses47.jpg', discountPercent: 55 },
              { id: 'sunglasses2', name: 'Sunglasses 2', category: 'sunglasses', imagePath: 'Sunglasses48.jpg', discountPercent: 30 },
              { id: 'sunglasses3', name: 'Sunglasses 3', category: 'sunglasses', imagePath: 'Sunglasses49.jpg', discountPercent: 65 },
              { id: 'wallet1', name: 'Wallet 1', category: 'wallets', imagePath: 'Wallet1.jpg', discountPercent: 25 },
              { id: 'wallet2', name: 'Wallet 2', category: 'wallets', imagePath: 'Wallet2.jpg', discountPercent: 70 }
            ];

            const normalizeName = (s) => (s || '').toString().normalize('NFD').replace(/\p{Diacritic}+/gu,'').toLowerCase().trim();
            const discountMap = new Map(discountedProducts.map(p => [normalizeName(p.name), p.discountPercent]));
            const imageDiscountMap = new Map(discountedProducts.filter(p => p.imagePath).map(p => [p.imagePath.split('/').pop().toLowerCase(), p.discountPercent]));

            function findDiscountPercentForName(productName) {
                const key = normalizeName(productName);
                if (discountMap.has(key)) return discountMap.get(key);
                // Loose contains matching both ways
                for (const [k, v] of discountMap.entries()) {
                    if (k.includes(key) || key.includes(k)) return v;
                }
                return null;
            }
            function getBaseFilename(url) {
                try {
                    const u = (url || '').toString();
                    const qIndex = u.indexOf('?');
                    const clean = qIndex >= 0 ? u.slice(0, qIndex) : u;
                    return clean.split('/').pop().toLowerCase();
                } catch { return ''; }
            }

            // Footwear reference data (synced with footwear.html)
            const footwearByImage = new Map([
                ['cowboy-1.jpg', { name: 'Ridgewalker Classic', price: 95 }],
                ['cowboy0.jpg',  { name: 'Rose Rebel',          price: 85 }],
                ['cowboy49.jpg', { name: 'Midnight Marcher',    price: 135 }],
                ['cowboy2.jpg',  { name: 'Arizona Lo',          price: 70 }],
                ['cowboy1.jpg',  { name: 'Arizona',             price: 180 }],
                ['cowboy3.jpg',  { name: 'Austin',              price: 145 }],
                ['cowboy4.jpg',  { name: 'Bald Eagle',          price: 175 }],
                ['cowboy5.jpg',  { name: 'Buffalo',             price: 180 }],
                ['cowboy6.jpg',  { name: 'Bulldog ACS',         price: 115 }],
                ['cowboy7.jpg',  { name: 'Bulldog CS',          price: 95 }],
                ['cowboy8.jpg',  { name: 'Camelot CS',          price: 105 }],
                ['cowboy9.jpg',  { name: 'Cameron ACS',         price: 145 }],
                ['cowboy10.jpg', { name: 'Carolina',            price: 180 }],
                ['cowboy11.jpg', { name: 'Cedric CS',           price: 115 }],
                ['cowboy12.jpg', { name: 'Charger',             price: 155 }],
                ['cowboy13.jpg', { name: 'Charlie ACS',         price: 145 }],
                ['cowboy14.jpg', { name: 'Chelsea ACS',         price: 130 }],
                ['cowboy15.jpg', { name: 'Dakota',              price: 175 }],
                ['cowboy16.jpg', { name: 'Dallas',              price: 170 }],
                ['cowboy17.jpg', { name: 'Eagle Hi',            price: 185 }],
                ['cowboy18.jpg', { name: 'Eagle Lo',            price: 150 }],
                ['cowboy19.jpg', { name: 'El Paso',             price: 170 }],
                ['cowboy20.jpg', { name: 'Falcon',              price: 110 }],
                ['cowboy21.jpg', { name: 'Frontier',            price: 170 }],
                ['cowboy22.jpg', { name: 'Galveston',           price: 185 }],
                ['cowboy23.jpg', { name: 'Georgia',             price: 145 }],
                ['cowboy24.jpg', { name: 'Harness Hi',          price: 180 }],
                ['cowboy25.jpg', { name: 'Harness Lo',          price: 145 }],
                ['cowboy26.jpg', { name: 'Herald CS',           price: 190 }],
                ['cowboy27.jpg', { name: 'Hunter',              price: 195 }],
                ['cowboy28.jpg', { name: 'Indiana',             price: 200 }],
                ['cowboy29.jpg', { name: 'Jodhpur',             price: 140 }],
                ['cowboy30.jpg', { name: 'Kansas',              price: 210 }],
                ['cowboy31.jpg', { name: 'Kestrel',             price: 120 }],
                ['cowboy32.jpg', { name: 'King CS',             price: 115 }],
                ['cowboy33.jpg', { name: 'Louisiana',           price: 180 }],
                ['cowboy34.jpg', { name: 'Maverick',            price: 145 }],
                ['cowboy35.jpg', { name: 'Montana',             price: 225 }],
                ['cowboy36.jpg', { name: 'Mustang',             price: 145 }],
                ['cowboy37.jpg', { name: 'Nevada',              price: 145 }],
                ['cowboy38.jpg', { name: 'Quad CS',             price: 150 }],
                ['cowboy39.jpg', { name: 'Rebel',               price: 175 }],
                ['cowboy40.jpg', { name: 'Regent CS',           price: 80 }],
                ['cowboy41.jpg', { name: 'Renegade Hi',         price: 170 }],
                ['cowboy42.jpg', { name: 'Renegade Lo',         price: 135 }],
                ['cowboy43.jpg', { name: 'Ryan ACS',            price: 150 }],
                ['cowboy44.jpg', { name: 'Stag ACS',            price: 130 }],
                ['cowboy45.jpg', { name: 'Stag CS',             price: 90 }],
                ['cowboy46.jpg', { name: 'Taylor CS',           price: 145 }],
                ['cowboy47.jpg', { name: 'Wild One',            price: 175 }],
                ['cowboy48.jpg', { name: 'Zip & Lace',          price: 115 }]
            ]);
            function syncFootwearFromReference() {
                productItems.forEach((item) => {
                    const imgEl = item.querySelector('img');
                    const nameEl = item.querySelector('.product-name');
                    const priceEl = item.querySelector('.product-price');
                    if (!imgEl || !nameEl || !priceEl) return;
                    const base = getBaseFilename(imgEl.getAttribute('src'));
                    if (!base) return;
                    if (footwearByImage.has(base)) {
                        const ref = footwearByImage.get(base);
                        if (ref?.name) nameEl.textContent = ref.name;
                        if (typeof ref?.price === 'number') priceEl.textContent = `£${ref.price}`;
                    }
                });
            }

            // Leather jackets reference (from leather_jackets.html)
            const jacketsByImage = new Map([
                ['vintage_brown_bomber.jpg', { name: 'Vintage Brown Bomber', price: 185 }],
                ['modern_blue_moto.jpg',    { name: 'Modern Blue Moto',     price: 225 }],
                ['sleek_red_racer.jpg',     { name: 'Sleek Blue Racer',      price: 170 }],
                ['rugged_green_field_jacket.jpg', { name: 'Rugged Grey Field Jacket', price: 140 }],
                ['silver_streak_jacket.jpg', { name: 'Silver Streak Jacket', price: 165 }],
                ['metallic_finish_racer.jpg', { name: 'Metallic Finish Racer', price: 175 }],
            ]);
            function syncLeatherJacketsFromReference() {
                productItems.forEach((item) => {
                    const imgEl = item.querySelector('img');
                    const nameEl = item.querySelector('.product-name');
                    const priceEl = item.querySelector('.product-price');
                    if (!imgEl || !nameEl || !priceEl) return;
                    const base = getBaseFilename(imgEl.getAttribute('src'));
                    if (!base) return;
                    if (jacketsByImage.has(base)) {
                        const ref = jacketsByImage.get(base);
                        if (ref?.name) nameEl.textContent = ref.name;
                        if (typeof ref?.price === 'number') priceEl.textContent = `£${ref.price}`;
                    }
                });
            }

            // Scarves reference (from scarves.html)
            const scarvesByImage = new Map([
                ['scarf9.jpg',  { name: 'Plaid Woolly Scarf with Snowflake', price: 21.00 }],
                ['scarf1.jpg',  { name: 'Camel Tone Ribbed Knit Scarf',      price: 32.50 }],
                ['scarfandbeanie2.jpg', { name: 'Brown & Beige Knitted Beanie & Scarf Set', price: 36.00 }],
                ['scarf5.jpg',  { name: 'Charcoal Ribbed Knit Scarf',        price: 14.99 }],
                ['scarfandbeanie3.jpg', { name: 'Red Two-Tone Chunky Beanie & Scarf Set', price: 14.99 }],
                ['scarf4.jpg',  { name: 'Grey Knit Scarf with Faux Fur Pom-Poms', price: 14.99 }],
                ['scarf6.jpg',  { name: 'Red Plaid Woolly Scarf',            price: 19.00 }],
                ['scarf7.jpg',  { name: 'Classic Grey Winter Loop Scarf',    price: 19.00 }],
                ['scarf8.jpg',  { name: 'Navy Union Jack Pattern Scarf',     price: 20.00 }],
                ['scarf10.jpg', { name: 'Snowflake Knit Neck Warmer',        price: 16.00 }],
                ['scarf11.jpg', { name: 'Large Thick Navy Winter Scarf',     price: 25.00 }],
                ['scarf12.jpg', { name: 'Camel Ribbed Winter Scarf',         price: 22.00 }],
                ['scarf13.jpg', { name: 'Grey Checked Winter Scarf',         price: 20.00 }],
                ['scarf14.jpg', { name: 'Black Fleece Neckband Scarf',       price: 17.00 }],
                ['scarf15.jpg', { name: 'Premium Heather Woolly Scarf',      price: 22.99 }],
                ['scarf16.jpg', { name: 'Blackwatch Knit Scarf',             price: 23.00 }],
                ['scarf17.jpg', { name: 'Burgundy Ribbed Beanie & Scarf Combo', price: 26.00 }],
                ['scarf18.jpg', { name: "Men's Plain Grey Winter Scarf",    price: 21.00 }],
                ['scarf19.jpg', { name: 'British Flag Knit Scarf',           price: 20.00 }],
                ['scarfandbeanie20.jpg', { name: 'Tribal Red Beanie & Scarf Set', price: 21.00 }],
                ['scarfandbeanie21.jpg', { name: 'Nordic Blue Knit Scarf & Beanie Set', price: 21.00 }]
            ]);

            function syncScarvesFromReference() {
                productItems.forEach((item) => {
                    const imgEl = item.querySelector('img');
                    const nameEl = item.querySelector('.product-name');
                    const priceEl = item.querySelector('.product-price');
                    if (!imgEl || !nameEl || !priceEl) return;
                    const base = getBaseFilename(imgEl.getAttribute('src'));
                    if (!base) return;
                    if (scarvesByImage.has(base)) {
                        const ref = scarvesByImage.get(base);
                        if (ref?.name) nameEl.textContent = ref.name;
                        if (typeof ref?.price === 'number') priceEl.textContent = `£${ref.price}`;
                    }
                });
            }

            // Caps & Hats reference (from caps_and_hats.html)
            const hatsByImage = new Map([
                ['hat1.jpg',   { name: 'Red Wool Felt Trilby Hat',          price: 28.0 }],
                ['hat2.jpg',   { name: 'Navy Blue Wool Felt Trilby Hat',    price: 33.6 }],
                ['hat4.jpg',   { name: 'Purple Wool Felt Trilby Hat',       price: 30.4 }],
                ['hat5.jpg',   { name: 'Olive Green Wool Felt Trilby Hat',  price: 36.0 }],
                ['hat7.jpg',   { name: 'Brown Wool Felt Trilby Hat',        price: 26.4 }],
                ['hat8.jpg',   { name: 'Cream Wool Felt Trilby Hat',        price: 32.0 }],
                ['hat9.jpg',   { name: 'Black Wool Felt Trilby Hat',        price: 29.6 }],
                ['hat10.jpg',  { name: 'Beige Straw Trilby Hat',            price: 30.0 }],
                ['hats11.jpg', { name: 'Brown Suede Cowboy Hat',            price: 35.2 }],
                ['hat6.jpg',   { name: 'Charcoal Grey Wool Felt Trilby Hat',price: 32.8 }]
            ]);

            function syncHatsFromReference() {
                productItems.forEach((item) => {
                    const imgEl = item.querySelector('img');
                    const nameEl = item.querySelector('.product-name');
                    const priceEl = item.querySelector('.product-price');
                    if (!imgEl || !nameEl || !priceEl) return;
                    const base = getBaseFilename(imgEl.getAttribute('src'));
                    if (!base) return;
                    if (hatsByImage.has(base)) {
                        const ref = hatsByImage.get(base);
                        if (ref?.name) nameEl.textContent = ref.name;
                        if (typeof ref?.price === 'number') priceEl.textContent = `£${ref.price}`;
                    }
                });
            }
            // Gloves reference (from gloves.html)
            const glovesByImage = new Map([
                ['gloves1.jpg',  { name: 'Leather Gloves – Black Classic', price: 32.5 }],
                ['gloves2.jpg',  { name: 'Leather Gloves – Tan Classic', price: 36 }],
                ['gloves3.jpg',  { name: 'Leather Gloves – Camel Shearling Cuff', price: 42.5 }],
                ['gloves4.jpg',  { name: 'Leather Gloves – Navy Ribbed Cuff', price: 34 }],
                ['gloves5.jpg',  { name: 'Tartan Gloves – Brown/Black', price: 22.5 }],
                ['gloves6.jpg',  { name: 'Fitted Woolly Gloves – Olive with Buttons', price: 19 }],
                ['gloves7.jpg',  { name: 'Leather Gloves – Navy with Stitch Detail', price: 37.5 }],
                ['gloves8.jpg',  { name: 'Strapped Woolly Gloves – Black with Strap', price: 21 }],
                ['gloves9.jpg',  { name: 'Camel Fingerless Gloves', price: 22 }],
                ['gloves10.jpg', { name: 'Leather & Fur Gloves – Beige Fur Cuff', price: 38 }],
                ['gloves11.jpg', { name: 'Faux Suede Gloves – Red', price: 24 }],
                ['gloves12.jpg', { name: 'Suede Look Gloves – Teal with Faux Fur Cuff', price: 23 }],
                ['gloves13.jpg', { name: 'Classic Gloves – Black', price: 25 }],
                ['gloves14.jpg', { name: 'Full-Finger Gloves – Black Knit Cuff', price: 27 }],
                ['gloves15.jpg', { name: 'Woolly Gloves – Burgundy with Buttons', price: 26 }],
                ['gloves16.jpg', { name: 'Navy Leather Gloves – Knit Cuff', price: 25 }],
                ['gloves17.jpg', { name: 'Classic Leather Gloves – Brown', price: 23 }],
                ['gloves18.jpg', { name: 'Leather Gloves – Olive', price: 24 }],
                ['gloves19.jpg', { name: 'Stylish Winter Gloves – Burgundy with Stitch', price: 25 }],
                ['gloves20.jpg', { name: 'Leather Gloves – Black with Strap', price: 29 }],
                ['gloves21.jpg', { name: 'Winter Fabric Gloves – Blue', price: 26 }],
                ['gloves22.jpg', { name: 'Leather Gloves – Burgundy Moto Cuff', price: 24 }],
                ['gloves23.jpg', { name: 'Navy Leather Classic', price: 28 }],
                ['gloves24.jpg', { name: 'Leather Gloves – Blue Classic', price: 25 }],
                ['gloves25.jpg', { name: 'Basic Beige Leather', price: 30 }],
                ['gloves26.jpg', { name: 'Patterned Black Leather', price: 27 }],
                ['gloves27.jpg', { name: 'Faux Fur Gloves – Burgundy Fur Cuff', price: 25 }],
                ['gloves28.jpg', { name: 'Faux Fur Black Gloves – Black with Fur Cuff', price: 26 }],
                ['gloves29.jpg', { name: 'Faux Suede Gloves – Brown with Fur Cuff', price: 28 }],
                ['gloves30.jpg', { name: 'Luxury Gift-Box Gloves', price: 27 }],
                ['gloves31.jpg', { name: 'Brown Winter Gloves', price: 26 }],
                ['gloves32.jpg', { name: 'Stylish Winter Gloves – Burgundy with Stitch', price: 28 }],
                ['gloves33.jpg', { name: 'Winter Fabric Gloves – Pink', price: 25 }],
                ['gloves34.jpg', { name: 'Faux Suede Gloves – Black w/Fur Cuff', price: 27 }],
                ['gloves35.jpg', { name: 'Fashion Gloves – Olive Green', price: 32 }],
                ['gloves36.jpg', { name: 'Faux Suede Gloves – Grey with Fur Cuff', price: 30 }],
                ['gloves37.jpg', { name: 'Faux Fur Black Gloves – Black with Fur Cuff', price: 24 }],
                ['gloves38.jpg', { name: 'Faux Suede Gloves – Black with Button', price: 38 }],
                ['gloves39.jpg', { name: 'Herringbone Woolly Gloves – Burgundy', price: 25 }],
                ['gloves40.jpg', { name: 'Stylish Winter Gloves – Teal with Buttons', price: 27 }],
                ['gloves41.jpg', { name: 'Gift-Box Gloves – Violet', price: 25 }],
                ['gloves42.jpg', { name: 'Suede Look Gloves – Black with Houndstooth Cuff', price: 26 }],
                ['gloves43.jpg', { name: 'Velvet Gloves – Burgundy with Houndstooth Cuff', price: 28 }],
                ['gloves44.jpg', { name: 'Winter Houndstooth Gloves – Burgundy/Black', price: 25 }],
                ['gloves45.jpg', { name: 'Classic Velvet Gloves – Brown with Houndstooth Cuff', price: 24 }],
                ['gloves46.jpg', { name: 'Leather Gloves – Navy Basic', price: 30 }],
                ['golves47.jpg', { name: 'Beige Leather Gloves – Fur Trim', price: 25 }],
                ['gloves48.jpg', { name: 'Leather Gloves – Black Basic', price: 32 }],
                ['gloves49.jpg', { name: 'Stylish Winter Gloves – Black with Stitch', price: 34 }],
                ['gloves50.jpg', { name: 'Leather Gloves – Black Patterned', price: 36 }]
            ]);

            function syncGlovesFromReference() {
                productItems.forEach((item) => {
                    const imgEl = item.querySelector('img');
                    const nameEl = item.querySelector('.product-name');
                    const priceEl = item.querySelector('.product-price');
                    if (!imgEl || !nameEl || !priceEl) return;
                    const base = getBaseFilename(imgEl.getAttribute('src'));
                    if (!base) return;
                    if (glovesByImage.has(base)) {
                        const ref = glovesByImage.get(base);
                        if (ref?.name) nameEl.textContent = ref.name;
                        if (typeof ref?.price === 'number') priceEl.textContent = `£${ref.price}`;
                    }
                });
            }

            // Belts reference (from belts.html)
            const beltsByImage = new Map([
                ['belt2.webp',  { name: '2 Row Double Prong Eyelet Studded Belt', price: 37.49 }],
                ['belt6.webp',  { name: '2 Row Eyelet Studded Belt', price: 37.49 }],
                ['belt8.webp',  { name: '3 Row Silver/Black Check Pyramid Studded Belt', price: 29.99 }],
                ['belt3.webp',  { name: '3 Row Silver Pyramid Studded Belt', price: 29.99 }],
                ['belt5.webp',  { name: '3 Row Black Pyramid Studded Belt', price: 59.98 }],
                ['belt9.jpg',   { name: '3 Row Long Silver Pyramid Studded Belt', price: 22.49 }],
                ['belt7.webp',  { name: '2 Row Black Spike Studded Belt', price: 44.99 }],
                ['belt4.webp',  { name: 'Nickel Bullet Belt', price: 44.99 }],
                ['belt1.jpg',   { name: 'Reversible Adjustable Belt', price: 26.99 }],
                ['belt10.jpg',  { name: 'Classic Black Leather Belt', price: 26.99 }],
                ['belt11.webp', { name: 'Vintage Brown Leather Belt', price: 28.49 }]
            ]);

            function syncBeltsFromReference() {
                productItems.forEach((item) => {
                    const imgEl = item.querySelector('img');
                    const nameEl = item.querySelector('.product-name');
                    const priceEl = item.querySelector('.product-price');
                    if (!imgEl || !nameEl || !priceEl) return;
                    const base = getBaseFilename(imgEl.getAttribute('src'));
                    if (!base) return;
                    if (beltsByImage.has(base)) {
                        const ref = beltsByImage.get(base);
                        if (ref?.name) nameEl.textContent = ref.name.toUpperCase();
                        if (typeof ref?.price === 'number') priceEl.textContent = `£${ref.price}`;
                        else if (typeof ref?.price === 'string') priceEl.textContent = ref.price;
                    }
                });
            }

            // Sunglasses reference (from sunglasses.html)
            const sunglassesByImage = new Map([
                ['sunglasses47.jpg', { name: 'Wayfarer Classic Black', price: 28 }],
                ['sunglasses48.jpg', { name: 'Aviator Silver Mirror', price: 30 }],
                ['sunglasses49.jpg', { name: 'Retro Round Brown', price: 60 }],
                ['sunglasses50.jpg', { name: 'Oversized Gradient', price: 45 }],
                // RayFlector mapped names/prices from sunglasses.html
                ['synglasses3.webp',  { name: 'Classic Aviator Gold', price: 28 }],
                ['sunglasses4.webp',  { name: 'Classic Aviator Gradient', price: 27 }],
                ['sunglasses5.webp',  { name: 'Fashion Aviator Stripes', price: 25 }],
                ['sunglasses6.webp',  { name: 'Oversized Aviator Brown', price: 25 }],
                ['sunglasses7.webp',  { name: 'Oversized Aviator Tortoise', price: 27 }],
                ['sunglasses8.webp',  { name: 'Fashion Aviator Black', price: 25 }],
                ['sunglasses9.webp',  { name: 'Round Gold', price: 22 }],
                ['sunglasses10.webp', { name: 'Round Vintage', price: 25 }],
                ['sunglasses11.webp', { name: 'Retro Rectangle – Yellow', price: 25 }],
                ['sunglasses12.webp', { name: 'Sport Aviator', price: 28 }],
                ['sunglasses13.webp', { name: 'Cat-eye – Brown Gradient', price: 25 }],
                ['sunglasses14.webp', { name: 'Mirror Aviator – Blue', price: 27 }],
                ['sunglasses16.webp', { name: 'Mirror Aviator – Gold-Green', price: 25 }],
                ['sunglasses17.webp', { name: 'Retro Rectangle – Green', price: 25 }],
                ['sunglases18.webp',  { name: 'Mirror Aviator – Blue', price: 22 }],
                ['sunglasses19.webp', { name: 'Retro Aviator – Black Frame', price: 25 }],
                ['sunglasses20.webp', { name: 'Round Mirrored', price: 25 }],
                ['sunglasses21.webp', { name: 'Mirror Cat-eye – Blue/Yellow', price: 27 }],
                ['sunglasses22.webp', { name: 'Flat-top Fashion – Brown', price: 25 }],
                ['sunglasses23.webp', { name: 'Coloured Round – Gold/Brown', price: 25 }],
                ['sunglasses24.webp', { name: 'Cherokee Cat-eye – Gold', price: 32 }],
                ['sunglasses25.webp', { name: 'Polarised Aviator – Brown', price: 32 }],
                ['sunglasses26.webp', { name: 'Polarised Aviator – Green', price: 25 }],
                ['sunglasses27.webp', { name: 'Wayfarer Sport – Black', price: 28 }],
                ['sunglasses28.webp', { name: 'Coloured Round – Mint', price: 25 }],
                ['sunglasses29.webp', { name: 'Coloured Round – Gold/Brown', price: 25 }],
                ['sunglasses30.webp', { name: 'Mirror Round – Purple', price: 25 }],
                ['sunglasses31.webp', { name: 'Retro Aviator – Smoke', price: 27 }],
                ['sunglasses32.webp', { name: 'Polarised Aviator – Green', price: 25 }],
                ['sunglasses33.webp', { name: 'Retro Rectangle – Brown', price: 25 }],
                ['sunglasses34.webp', { name: 'Retro Rectangle – Green', price: 28 }],
                ['sunglasses35.webp', { name: 'Cat Eye Gold', price: 25 }],
                ['sunglasses36.webp', { name: 'Mirror Cat-eye – Blue/Yellow', price: 25 }],
                ['sunglasses37.webp', { name: 'Cat-eye – Smoke Gradient', price: 25 }],
                ['sungçasses39.webp', { name: 'Wayfarer Sport – Black', price: 22 }],
                ['sunglasses40.webp', { name: 'Classic Round Blue', price: 25 }],
                ['singlasses41.webp', { name: 'Coloured Round – Rose', price: 25 }],
                ['sunglasses43.webp', { name: 'Coloured Round – Yellow', price: 32 }],
                ['sunglasses44.webp', { name: 'Colored Round - Violet', price: 25 }],
                ['sunglasses45.webp', { name: 'Sport Oval – Sand', price: 30 }],
                ['sunglasses46.webp', { name: 'Coloured Round – Orange', price: 25 }]
            ]);

            function syncSunglassesFromReference() {
                productItems.forEach((item) => {
                    const imgEl = item.querySelector('img');
                    const nameEl = item.querySelector('.product-name');
                    const priceEl = item.querySelector('.product-price');
                    if (!imgEl || !nameEl || !priceEl) return;
                    const base = getBaseFilename(imgEl.getAttribute('src'));
                    if (!base) return;
                    if (sunglassesByImage.has(base)) {
                        const ref = sunglassesByImage.get(base);
                        if (ref?.name) nameEl.textContent = ref.name;
                        if (typeof ref?.price === 'number') priceEl.textContent = `£${ref.price}`;
                    }
                });
            }

            // Bags reference (from bags.html)
            const bagsByImage = new Map([
                ['bag1.jpg',  { name: 'Retro Ringer', price: 20 }],
                ['bag2.jpg',  { name: 'Clock Styled', price: 35 }],
                ['bag3.jpg',  { name: 'Parisian Window', price: 26 }],
                ['bag4.jpg',  { name: 'Ivory Grace', price: 58 }],
                ['bag5.jpg',  { name: 'Crimson Allure', price: 62 }],
                ['bag6.jpg',  { name: 'Crocodile Skin Pattern Ladies Handbag', price: 50 }],
                ['bag7.jpg',  { name: 'Noir Essence', price: 64 }],
                ['bag8.jpg',  { name: 'Taupe Belle', price: 68 }],
                ['bag9.jpg',  { name: 'Verdant Vogue', price: 66 }],
                ['bag10.jpg', { name: 'Vintage Hour', price: 85 }],
                ['bag11.jpg', { name: 'Crimson Hour', price: 78 }],
                ['bag12.jpg', { name: 'Teal Ticker', price: 80 }],
                ['bag13.jpg', { name: 'Midnight Dial', price: 85 }],
                ['bag14.jpg', { name: 'Caramel Fold', price: 83 }],
                ['bag15.jpg', { name: 'Vanilla Fold', price: 72 }],
                ['bag16.jpg', { name: 'Midnight Fold', price: 78 }],
                ['bag17.jpg', { name: 'Ivory Weave', price: 88 }],
                ['bag18.jpg', { name: 'Jet Tote', price: 102 }],
                ['bag19.jpg', { name: 'Midnight Weave', price: 99 }],
                ['bag20.jpg', { name: 'Hazel Weave', price: 97 }],
                ['bag21.jpg', { name: 'Suede Mocha Mini', price: 104 }],
                ['bag22.jpg', { name: 'Cocoa Suede Mini', price: 113 }],
                ['black.jpg', { name: 'Black Bag', price: 210 }],
                ['sportsbag.jpg', { name: 'Sports Bag', price: 250 }]
            ]);
            function syncBagsFromReference() {
                productItems.forEach((item) => {
                    const imgEl = item.querySelector('img');
                    const nameEl = item.querySelector('.product-name');
                    const priceEl = item.querySelector('.product-price');
                    if (!imgEl || !nameEl || !priceEl) return;
                    const base = getBaseFilename(imgEl.getAttribute('src'));
                    if (!base) return;
                    if (bagsByImage.has(base)) {
                        const ref = bagsByImage.get(base);
                        if (ref?.name) nameEl.textContent = ref.name;
                        if (typeof ref?.price === 'number') priceEl.textContent = `£${ref.price}`;
                    }
                });
            }

            // Accessories reference (from Accessories.html)
            const accessoriesByImage = new Map([
                ['accessories1.jpg',  { name: 'Target Metal Enamel Pin Badge',        price: 19.99 }],
                ['accessories2.jpg',  { name: 'US Sheriff Badge',                     price: 18.99 }],
                ['accessories3.jpg',  { name: 'Paisley Bandana',                      price: 11.99 }],
                ['accessories4.jpg',  { name: 'White Clip-on Bow Tie',                price: 13.99 }],
                ['accessories5.jpg',  { name: 'Black Clip-on Bow Tie',                price: 14.99 }],
                ['accessories6.jpg',  { name: 'Red Clip-on Bow Tie',                  price: 12.99 }],
                ['accessories7.jpg',  { name: 'Tartan Clip-on Bow Tie',               price: 16.99 }],
                ['accessories8.jpg',  { name: 'Union Jack Clip-on Bow Tie',           price: 17.99 }],
                ['accessories9.jpg',  { name: 'Union Jack Mini Folding Travel Umbrella', price: 22.99 }],
                ['accessories10.jpg', { name: 'Classic Clear Dome Birdcage Umbrella', price: 29.99 }],
                ['accessories11.jpg', { name: 'Faux Leather & Fur Earmuffs',          price: 12.50 }],
                ['accessories12.jpg', { name: 'Purple Winter Faux Fur Earmuffs',      price: 17.50 }],
                ['accessories13.jpg', { name: 'Brown Winter Faux Fur Earmuffs',       price: 20.00 }],
                ['accessories14.jpg', { name: 'Herringbone Black Earmuffs',           price: 20.99 }],
                ['accessories15.jpg', { name: 'Brown Herringbone Pattern Earmuffs',   price: 10.00 }],
                ['accessories16.jpg', { name: 'Grey Herringbone Pattern Earmuffs',    price: 17.98 }],
                ['accessories17.jpg', { name: 'Fashion Winter Knitted Headband',      price: 15.99 }]
            ]);

            function syncAccessoriesFromReference() {
                productItems.forEach((item) => {
                    const imgEl = item.querySelector('img');
                    const nameEl = item.querySelector('.product-name');
                    const priceEl = item.querySelector('.product-price');
                    if (!imgEl || !nameEl || !priceEl) return;
                    const base = getBaseFilename(imgEl.getAttribute('src'));
                    if (!base) return;
                    if (accessoriesByImage.has(base)) {
                        const ref = accessoriesByImage.get(base);
                        if (ref?.name) nameEl.textContent = ref.name;
                        if (typeof ref?.price === 'number') priceEl.textContent = `£${ref.price.toFixed(2)}`;
                    }
                });
            }
            function annotateBargainsInCatalog() {
                productItems.forEach((item) => {
                    const nameEl = item.querySelector('.product-name');
                    const priceEl = item.querySelector('.product-price');
                    const imgEl = item.querySelector('img');
                    if (!nameEl || !priceEl) return;
                    const name = nameEl.textContent || '';
                    let percent = findDiscountPercentForName(name);
                    if (!percent && imgEl) {
                        const base = getBaseFilename(imgEl.getAttribute('src'));
                        if (imageDiscountMap.has(base)) percent = imageDiscountMap.get(base);
                    }
                    if (!percent || percent <= 0) return;

                    // Mark as bargain for filtering
                    item.dataset.bargain = '1';
                    item.dataset.discountPercent = String(percent);

                    // Add badge if not present
                    if (!item.querySelector('.discount-badge')) {
                        const badge = document.createElement('div');
                        const isGold = percent > 55;
                        badge.className = `discount-badge ${isGold ? 'gold' : 'red'}`;
                        badge.textContent = isGold ? `★★ ${percent}% OFF` : `${percent}% OFF`;
                        item.appendChild(badge);
                    }

                    // Rewrite price with discounted value
                    const originalText = priceEl.textContent || '';
                    const numMatch = originalText.replace(/[^0-9.]/g, '');
                    const originalVal = parseFloat(numMatch);
                    if (!isNaN(originalVal)) {
                        const newVal = originalVal * (1 - percent / 100);
                        const originalFormatted = `£${originalVal}`;
                        const newFormatted = `£${newVal.toFixed(2)}`;
                        priceEl.innerHTML = `<span class="original-price">${originalFormatted}</span><span class="new-price">${newFormatted}</span>`;
                    }
                });
            }

            // Display mode logic: swaps visible value inside .product-price based on mode
            function computeSupplierCost(original) {
                // Demo heuristic: 70% of retail when we don't have a mapped supplier cost
                const n = parseFloat(String(original).replace(/[^0-9.]/g, ''));
                if (!Number.isFinite(n)) return null;
                return (n * 0.7);
            }
            function updateValueModeDisplay() {
                productItems.forEach((item) => {
                    const priceEl = item.querySelector('.product-price');
                    if (!priceEl) return;
                    // Cache original rendered price HTML once so we can restore on "Price" mode
                    if (!priceEl.dataset.originalHtml) {
                        priceEl.dataset.originalHtml = priceEl.innerHTML;
                    }
                    const text = priceEl.textContent || '';
                    const newEl = priceEl.querySelector('.new-price');
                    const baseText = newEl ? newEl.textContent : text;
                    const retail = parseFloat(String(baseText).replace(/[^0-9.]/g, ''));
                    if (!Number.isFinite(retail)) return;
                    let supplier = computeSupplierCost(retail);
                    // Try to infer mapped reference supplier prices
                    const imgEl = item.querySelector('img');
                    const base = imgEl ? getBaseFilename(imgEl.getAttribute('src')) : '';
                    if (base && footwearByImage.has(base) && typeof footwearByImage.get(base)?.price === 'number') supplier = footwearByImage.get(base).price * 0.7;
                    if (base && jacketsByImage.has(base) && typeof jacketsByImage.get(base)?.price === 'number') supplier = jacketsByImage.get(base).price * 0.7;
                    if (base && beltsByImage.has(base) && typeof beltsByImage.get(base)?.price === 'number') supplier = beltsByImage.get(base).price * 0.7;
                    if (base && scarvesByImage.has(base) && typeof scarvesByImage.get(base)?.price === 'number') supplier = scarvesByImage.get(base).price * 0.7;
                    if (base && sunglassesByImage.has(base) && typeof sunglassesByImage.get(base)?.price === 'number') supplier = sunglassesByImage.get(base).price * 0.7;
                    if (base && bagsByImage.has(base) && typeof bagsByImage.get(base)?.price === 'number') supplier = bagsByImage.get(base).price * 0.7;
                    if (base && glovesByImage.has(base) && typeof glovesByImage.get(base)?.price === 'number') supplier = glovesByImage.get(base).price * 0.7;

                    const prof = retail - (Number.isFinite(supplier) ? supplier : 0);
                    let displayHtml = '';
                    if (valueMode === 'price') {
                        // Restore original price markup exactly as rendered
                        displayHtml = priceEl.dataset.originalHtml || priceEl.innerHTML;
                        priceEl.classList.remove('value-profit');
                        priceEl.classList.add('value-white');
                    } else if (valueMode === 'supplier') {
                        const s = Number.isFinite(supplier) ? `£${supplier.toFixed(2)}` : '£—';
                        displayHtml = `<span class="new-price">${s}</span>`;
                        priceEl.classList.remove('value-profit');
                        priceEl.classList.add('value-white');
                    } else {
                        const p = Number.isFinite(prof) ? `£${prof.toFixed(2)}` : '£—';
                        displayHtml = `<span class="new-price">${p}</span>`;
                        priceEl.classList.remove('value-white');
                        priceEl.classList.add('value-profit');
                    }
                    priceEl.innerHTML = displayHtml;
                });
            }

            // Ensure certain footwear items belong to FITRITE for tinting and filtering
            const fitriteFootwearNames = [
                'ridgewalker classic',
                'rose rebel',
                'midnight marcher'
            ];

            const allSupplierClasses = Object.keys(supplierNameByClass);
            function setSupplierClassOnItem(item, targetClass) {
                allSupplierClasses.forEach(cls => item.classList.remove(cls));
                item.classList.add(targetClass);
            }

            function retagFitriteFootwear() {
                productItems.forEach((item) => {
                    const nameEl = item.querySelector('.product-name');
                    const name = (nameEl?.textContent || '').toString();
                    const key = normalizeName ? normalizeName(name) : (name || '').toLowerCase();
                    if (fitriteFootwearNames.includes(key)) {
                        setSupplierClassOnItem(item, 'fitrite-bg');
                    }
                });
            }

            let activeFilterKey = 'all';

            const getSupplierClass = (el) => Object.keys(supplierNameByClass).find(c => el.classList.contains(c)) || '';

            const resetHighlights = () => {
                productItems.forEach((item) => {
                    const nameEl = item.querySelector('.product-name');
                    if (!nameEl) return;
                    if (nameEl.dataset.originalName) {
                        nameEl.innerHTML = nameEl.dataset.originalName;
                    } else {
                        nameEl.dataset.originalName = nameEl.textContent || '';
                    }
                });
            };

            const highlightMatches = (query) => {
                if (!query) return;
                const safe = escapeRegExp(query);
                const regex = new RegExp(safe, 'gi');
                productItems.forEach((item) => {
                    const nameEl = item.querySelector('.product-name');
                    if (!nameEl) return;
                    const original = nameEl.dataset.originalName || nameEl.textContent || '';
                    nameEl.innerHTML = original.replace(regex, (m) => `<span class="highlight">${m}</span>`);
                });
            };
            const update = () => {
                const rawQuery = searchInput ? searchInput.value.trim() : '';
                const q = normalize(rawQuery);
                const supplierClass = supplierClassByKey[activeFilterKey] || '';
                const isBargainsFilter = activeFilterKey === 'bargains';

                resetHighlights();

                let visibleCount = 0;
                productItems.forEach((item) => {
                    const nameEl = item.querySelector('.product-name');
                    const numberEl = item.querySelector('.product-number');
                    const priceEl = item.querySelector('.product-price');
                    const categoryTitleEl = item.closest('.category')?.querySelector('.category-header h2');

                    const textParts = [
                        nameEl?.textContent,
                        numberEl?.textContent,
                        priceEl?.textContent,
                        categoryTitleEl?.textContent
                    ];

                    const supplierCls = getSupplierClass(item);
                    if (supplierCls) textParts.push(supplierNameByClass[supplierCls]);

                    const haystack = normalize(textParts.filter(Boolean).join(' '));

                    const matchesQuery = q.length === 0 || haystack.includes(q);
                    const matchesSupplier = !supplierClass || item.classList.contains(supplierClass);
                    const matchesBargains = !isBargainsFilter || item.dataset.bargain === '1';

                    const shouldShow = matchesQuery && matchesSupplier && matchesBargains;
                    item.classList.toggle('hidden', !shouldShow);
                    if (shouldShow) visibleCount += 1;
                });

                // Hide empty categories (and keep forced-hidden ones hidden)
                categories.forEach((cat) => {
                    const anyVisible = !!cat.querySelector('.product-item:not(.hidden)');
                    const forceHidden = cat.dataset.forceHidden === '1';
                    cat.classList.toggle('hidden', forceHidden || !anyVisible);
                });

                // Apply increasing overlay per visible row within each section
                categories.forEach((cat) => {
                    const visibleRows = Array.from(cat.querySelectorAll('.product-item:not(.hidden)'));
                    const total = visibleRows.length;
                    if (total === 0) return;
                    visibleRows.forEach((row, idx) => {
                        // Start subtle and increase gently, capping to avoid washing out
                        const t = total > 1 ? idx / (total - 1) : 0;
                        // Horizontal/diagonal sheen
                        const baseH = 0.14;
                        const maxH = 0.34;
                        const valueH = baseH + (maxH - baseH) * t;
                        row.style.setProperty('--rowOverlayOpacity', valueH.toFixed(3));
                        // Vertical boost
                        const baseV = 0.06;
                        const maxV = 0.20;
                        const valueV = baseV + (maxV - baseV) * t;
                        row.style.setProperty('--rowVOverlayOpacity', valueV.toFixed(3));
                    });
                });

                if (resultsCountEl) {
                    resultsCountEl.textContent = `${visibleCount} products found`;
                }

                if (q) highlightMatches(rawQuery);

                // Fade out filter buttons that would yield zero results under current query
                const countByKey = new Map();
                const keys = Object.keys(supplierClassByKey).filter(k=>k!=='all');
                keys.push('bargains');
                const poolVisibleToQuery = productItems.filter((item)=>{
                    const nameEl = item.querySelector('.product-name');
                    const numberEl = item.querySelector('.product-number');
                    const priceEl = item.querySelector('.product-price');
                    const categoryTitleEl = item.closest('.category')?.querySelector('.category-header h2');
                    const textParts=[ nameEl?.textContent, numberEl?.textContent, priceEl?.textContent, categoryTitleEl?.textContent ];
                    const supplierCls = getSupplierClass(item); if (supplierCls) textParts.push(supplierNameByClass[supplierCls]);
                    const haystack = normalize(textParts.filter(Boolean).join(' '));
                    return q.length === 0 || haystack.includes(q);
                });
                keys.forEach((key)=>{
                    let c=0; const cls = supplierClassByKey[key] || '';
                    if (key==='bargains') { c = poolVisibleToQuery.filter(it=> it.dataset.bargain==='1').length; }
                    else { c = poolVisibleToQuery.filter(it=> !cls || it.classList.contains(cls)).length; }
                    countByKey.set(key, c);
                });
                filterButtons.forEach((btn)=>{
                    const key = btn.dataset.filter || 'all';
                    if (key==='all') { btn.classList.remove('disabled'); return; }
                    const c = countByKey.get(key) || 0;
                    btn.classList.toggle('disabled', c===0);
                });

                // Dim category buttons not related to the visible filtered set
                try {
                    const activeClass = supplierClass;
                    const cats = categories;
                    const catButtons = Array.from(document.querySelectorAll('.catalog-btn'));
                    if (!activeClass && q.length===0 && activeFilterKey!=='bargains') {
                        catButtons.forEach(b=> b.classList.remove('dim'));
                    } else {
                        const visibleCats = new Set();
                        cats.forEach((cat)=>{
                            const hasVisible = !!cat.querySelector(`.product-item${activeClass?'.'+activeClass:''}:not(.hidden)`);
                            if (hasVisible) visibleCats.add('#'+cat.id);
                        });
                        catButtons.forEach((btn)=>{
                            const t = btn.getAttribute('data-target');
                            const dim = !visibleCats.has(t);
                            btn.classList.toggle('dim', dim);
                        });
                    }
                } catch {}
            };

            const debounce = (fn, delay) => {
                let t;
                return (...args) => {
                    clearTimeout(t);
                    t = setTimeout(() => fn.apply(null, args), delay);
                };
            };

            const onFilterClick = (key) => {
                activeFilterKey = key;
                filterButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.filter === key));
                update();
            };
            // Quick View modal wiring
            const qvOverlay = document.getElementById('quickViewModal');
            const qvClose = document.getElementById('qvClose');
            const qvTitle = document.getElementById('qvTitle');
            const qvImage = document.getElementById('qvImage');
            const qvPrice = document.getElementById('qvPrice');
            const qvModal = document.querySelector('.qv-modal');
            const qvSupplierBtn = document.getElementById('qvSupplierBtn');
            const qvSupplierPanel = document.getElementById('qvSupplierPanel');
            const qvSupplierText = document.getElementById('qvSupplierText');
            const qvProfitBar = document.getElementById('qvProfitBar');
            let supplierOpen = false;

            function hexToRgb(hex) {
                const normalized = hex.replace('#','');
                const bigint = parseInt(normalized, 16);
                if (normalized.length === 3) {
                    const r = (bigint >> 8) & 0xF; const g = (bigint >> 4) & 0xF; const b = bigint & 0xF;
                    return { r: r*17, g: g*17, b: b*17 };
                }
                return { r: (bigint >> 16) & 255, g: (bigint >> 8) & 255, b: bigint & 255 };
            }
            function mixToWhiteHex(baseHex, t) {
                const { r, g, b } = hexToRgb(baseHex);
                const k = Math.max(0, Math.min(1, t));
                const rr = Math.round(r * (1 - k) + 255 * k);
                const gg = Math.round(g * (1 - k) + 255 * k);
                const bb = Math.round(b * (1 - k) + 255 * k);
                const toHex = (n) => n.toString(16).padStart(2, '0');
                return `#${toHex(rr)}${toHex(gg)}${toHex(bb)}`;
            }

            function getSupplierInfoByName(productName) {
                const catItem = Array.from(document.querySelectorAll('.product-item')).find(pi => (pi.querySelector('.product-name')?.textContent || '').trim().toLowerCase() === (productName||'').toLowerCase());
                const cls = catItem ? getSupplierClass(catItem) : '';
                const baseHex = supplierColorByClass[cls] || '#a3d5ff';
                const supplierName = supplierNameByClass[cls] || 'supplier';
                return { baseHex, supplierName, catItem };
            }
            function openQuickViewData(name, priceValueOrHtml, imgSrc, baseHexOpt) {
                const info = getSupplierInfoByName(name);
                const baseHex = baseHexOpt || info.baseHex;
                const { r, g, b } = hexToRgb(baseHex);
                if (qvModal) {
                    qvModal.style.background = `linear-gradient(135deg, ${baseHex} 0%, rgba(255, 255, 255, 0.9) 100%)`;
                    qvModal.style.boxShadow = `0 20px 40px rgba(${r}, ${g}, ${b}, 0.6)`;
                }
                if (qvSupplierBtn) {
                    qvSupplierBtn.style.background = `linear-gradient(135deg, ${baseHex} 0%, rgba(255,255,255,0.9) 100%)`;
                    qvSupplierBtn.style.borderColor = `rgba(${r}, ${g}, ${b}, 0.35)`;
                    qvSupplierBtn.style.boxShadow = `0 10px 22px rgba(${r}, ${g}, ${b}, 0.22)`;
                }
                if (qvSupplierPanel) {
                    qvSupplierPanel.style.background = `linear-gradient(135deg, ${baseHex} 0%, rgba(255,255,255,0.95) 100%)`;
                    qvSupplierPanel.style.borderColor = `rgba(${r}, ${g}, ${b}, 0.25)`;
                    qvSupplierPanel.classList.remove('open');
                    supplierOpen = false;
                }
                if (qvSupplierText) {
                    const supplierDisplay = info.supplierName.charAt(0).toUpperCase() + info.supplierName.slice(1).toLowerCase();
                    qvSupplierText.textContent = `${supplierDisplay} price`;
                }
                const qvSupplierValueEl = document.getElementById('qvSupplierValue');
                if (qvSupplierValueEl) {
                    if (typeof priceValueOrHtml === 'number') qvSupplierValueEl.textContent = `£${priceValueOrHtml.toFixed(2)}`; else qvSupplierValueEl.textContent = `${priceValueOrHtml || ''}`;
                }
                if (qvSupplierBtn) {
                    qvSupplierBtn.setAttribute('aria-label', 'Show supplier price');
                    qvSupplierBtn.classList.remove('open');
                }
                if (qvTitle) qvTitle.textContent = name || 'Product';
                if (qvPrice) qvPrice.innerHTML = (typeof priceValueOrHtml === 'number') ? `£${priceValueOrHtml.toFixed(2)}` : (priceValueOrHtml || '');
                if (qvImage) qvImage.src = imgSrc || '';
                if (qvOverlay) { qvOverlay.classList.add('show'); qvOverlay.setAttribute('aria-hidden','false'); }
            }
            function openQuickView(item) {
                const nameEl = item.querySelector('.product-name');
                const priceEl = item.querySelector('.product-price');
                const imgEl = item.querySelector('img');
                const name = nameEl ? (nameEl.textContent || '') : 'Product';
                const priceHtml = priceEl ? priceEl.innerHTML : '';
                const imgSrc = imgEl ? imgEl.getAttribute('src') : '';

                // Detect supplier class and tint modal accordingly
                const supplierCls = getSupplierClass(item);
                const baseHex = supplierColorByClass[supplierCls] || '#a3d5ff';
                const { r, g, b } = hexToRgb(baseHex);
                if (qvModal) {
                    qvModal.style.background = `linear-gradient(135deg, ${baseHex} 0%, rgba(255, 255, 255, 0.9) 100%)`;
                    qvModal.style.boxShadow = `0 20px 40px rgba(${r}, ${g}, ${b}, 0.6)`;
                }

                // Style supplier elements to match tint
                if (qvSupplierBtn) {
                    qvSupplierBtn.style.background = `linear-gradient(135deg, ${baseHex} 0%, rgba(255,255,255,0.9) 100%)`;
                    qvSupplierBtn.style.borderColor = `rgba(${r}, ${g}, ${b}, 0.35)`;
                    qvSupplierBtn.style.boxShadow = `0 10px 22px rgba(${r}, ${g}, ${b}, 0.22)`;
                }
                if (qvSupplierPanel) {
                    qvSupplierPanel.style.background = `linear-gradient(135deg, ${baseHex} 0%, rgba(255,255,255,0.95) 100%)`;
                    qvSupplierPanel.style.borderColor = `rgba(${r}, ${g}, ${b}, 0.25)`;
                    qvSupplierPanel.classList.remove('open');
                    supplierOpen = false;
                }

                // Compose supplier price sentence
                const supplierName = supplierNameByClass[supplierCls] || 'supplier';
                // Extract numeric price from current product price (new price if discounted, else normal)
                let currentPriceText = '';
                if (priceEl) {
                    const newEl = priceEl.querySelector('.new-price');
                    currentPriceText = (newEl ? newEl.textContent : priceEl.textContent) || '';
                }
                if (qvSupplierText) {
                    const supplierDisplay = supplierName.charAt(0).toUpperCase() + supplierName.slice(1).toLowerCase();
                    qvSupplierText.textContent = `${supplierDisplay} price`;
                }
                const qvSupplierValueEl = document.getElementById('qvSupplierValue');
                if (qvSupplierValueEl) {
                    qvSupplierValueEl.textContent = currentPriceText;
                }
                if (qvSupplierBtn) {
                    qvSupplierBtn.setAttribute('aria-label', 'Show supplier price');
                    qvSupplierBtn.classList.remove('open');
                }

                qvTitle.textContent = name;
                qvPrice.innerHTML = priceHtml;
                qvImage.src = imgSrc;
                qvOverlay.classList.add('show');
                qvOverlay.setAttribute('aria-hidden', 'false');

            }

            function closeQuickView() {
                qvOverlay.classList.remove('show');
                qvOverlay.setAttribute('aria-hidden', 'true');
                // Optional: reset styles so each open recomputes cleanly
                if (qvModal) {
                    qvModal.style.background = '';
                    qvModal.style.boxShadow = '';
                }
                if (qvSupplierPanel) qvSupplierPanel.classList.remove('open');
                supplierOpen = false;
            }

            if (qvClose) qvClose.addEventListener('click', closeQuickView);
            if (qvOverlay) qvOverlay.addEventListener('click', function(e){ if (e.target === qvOverlay) closeQuickView(); });
            // Close on Escape
            document.addEventListener('keydown', function(e){ if (e.key === 'Escape') closeQuickView(); });

            function wireProductImageClicks() {
                productItems.forEach((item) => {
                    item.addEventListener('click', function(e){
                        // Avoid triggering when clicking links inside item (none currently)
                        openQuickView(item);
                    });
                });
            }

            // Defensive: also delegate clicks to handle dynamically filtered items
            document.addEventListener('click', function(e){
                const item = e.target && (e.target.closest ? e.target.closest('.product-item') : null);
                if (!item) return;
                // If a button inside product triggers, still open
                openQuickView(item);
            });

            // Supplier button toggle
            if (qvSupplierBtn && qvSupplierPanel) {
                qvSupplierBtn.addEventListener('click', function(){
                    supplierOpen = !supplierOpen;
                    qvSupplierPanel.classList.toggle('open', supplierOpen);
                    qvSupplierBtn.classList.toggle('open', supplierOpen);
                    qvSupplierBtn.setAttribute('aria-label', supplierOpen ? 'Hide supplier price' : 'Show supplier price');
                    if (supplierOpen && qvProfitBar) {
                        // Compute profit: visible (customer) price minus supplier price (we don't have separate supplier value; use current same as displayed for demo)
                        const priceText = (document.getElementById('qvPrice')?.textContent || '').replace(/[^0-9.]/g,'');
                        const priceVal = parseFloat(priceText) || 0;
                        const supplierVal = priceVal; // placeholder; replace with real supplier value when available
                        const profit = priceVal - supplierVal;
                        const sign = profit >= 0 ? '+' : '-';
                        const profitAbs = Math.abs(profit).toFixed(2);
                        qvProfitBar.innerHTML = `<div class="qv-profit-label">Profit</div><div id="qvProfitValue" class="qv-num">${sign}£${profitAbs}</div>`;
                        const pv = qvProfitBar.querySelector('#qvProfitValue');
                        if (pv) pv.classList.toggle('neg', profit < 0);
                        qvProfitBar.classList.add('show');
                    }
                    if (!supplierOpen && qvProfitBar) {
                        qvProfitBar.classList.remove('show');
                    }
                });
            }
            // Collapsible categories: toggle on header click/keyboard
            categories.forEach((cat) => {
                const header = cat.querySelector('.category-header');
                if (!header) return;
                header.setAttribute('tabindex', '0');
                header.setAttribute('role', 'button');
                header.setAttribute('aria-expanded', 'true');
                function toggle(){
                    const wasCollapsed = cat.classList.contains('collapsed');
                    // Collapse all categories first and hide them
                    categories.forEach((c) => {
                        c.classList.add('collapsed');
                        c.dataset.forceHidden = '1';
                        c.classList.add('hidden');
                        c.querySelector('.category-header')?.setAttribute('aria-expanded','false');
                    });
                    if (wasCollapsed) {
                        // Expand selected category and show its list
                        cat.classList.remove('collapsed');
                        cat.dataset.forceHidden = '0';
                        cat.classList.remove('hidden');
                        header.setAttribute('aria-expanded', 'true');
                        // Mark corresponding emoji button active/dim others
                        const id = cat.id ? `#${cat.id}` : '';
                        const buttons = Array.from(document.querySelectorAll('.catalog-btn'));
                        buttons.forEach((b) => {
                            const match = b.getAttribute('data-target') === id;
                            b.classList.toggle('active', match);
                            b.classList.toggle('dim', !match);
                        });
                    } else {
                        // Collapse and keep hidden (no other headers shown)
                        cat.classList.add('collapsed');
                        cat.dataset.forceHidden = '1';
                        cat.classList.add('hidden');
                        header.setAttribute('aria-expanded', 'false');
                        const buttons = Array.from(document.querySelectorAll('.catalog-btn'));
                        buttons.forEach((b) => { b.classList.remove('active'); b.classList.remove('dim'); });
                    }
                }
                header.addEventListener('click', toggle);
                header.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(); }
                });
                // Start collapsed by default
                cat.classList.add('collapsed');
                header.setAttribute('aria-expanded', 'false');
            });

            // Wire events
            filterButtons.forEach((btn) => {
                btn.addEventListener('click', () => onFilterClick(btn.dataset.filter || 'all'));
            });

            if (searchInput) {
                searchInput.addEventListener('input', debounce(update, 120));
                searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        searchInput.value = '';
                        update();
                    }
                });
            }

            if (clearBtn) {
                clearBtn.addEventListener('click', () => {
                    if (searchInput) searchInput.value = '';
                    update();
                    if (searchInput) searchInput.focus();
                });
            }

            // Mode buttons
            modeButtons.forEach((btn) => {
                const stop = (e) => { e.stopPropagation(); };
                btn.addEventListener('pointerdown', stop);
                btn.addEventListener('mousedown', stop);
                btn.addEventListener('click', function(e){
                    e.stopPropagation();
                    valueMode = this.getAttribute('data-mode') || 'price';
                    modeButtons.forEach(b => b.classList.toggle('active', b === btn));
                    updateValueModeDisplay();
                });
            });

            // Hamburger menu wiring
            const hamburgerButton = document.getElementById('hamburgerButton');
            const menuOverlay = document.getElementById('menuOverlay');
            const viewOverlay = document.getElementById('viewOverlay');
            const viewTitle = document.getElementById('viewTitle');
            const viewBody = document.getElementById('viewBody');
            
            function openMenu(){ if (menuOverlay) { menuOverlay.classList.add('show'); menuOverlay.setAttribute('aria-hidden','false'); } if (hamburgerButton){ const f = hamburgerButton.querySelector('.hamburger-f'); if (f) f.textContent = 'X'; } }
            function closeMenu(){ if (menuOverlay) { menuOverlay.classList.remove('show'); menuOverlay.setAttribute('aria-hidden','true'); } if (hamburgerButton){ const f = hamburgerButton.querySelector('.hamburger-f'); if (f) f.textContent = 'F'; } }
            function openView(name, options){
                if (name.toLowerCase() === 'catalogue') { closeView(); return; }
                if (viewOverlay){ viewOverlay.classList.add('show'); viewOverlay.setAttribute('aria-hidden','false'); }
                if (viewTitle){ viewTitle.textContent = name; }
                if (viewBody){ viewBody.innerHTML = `<div class="view-empty">${name} view content goes here.</div>`; }
            }
            function closeView(){ if (viewOverlay){ viewOverlay.classList.remove('show'); viewOverlay.setAttribute('aria-hidden','true'); const t=document.getElementById('ovEdgeTop'); const b=document.getElementById('ovEdgeBottom'); if (t) t.style.display='none'; if (b) b.style.display='none'; } const lg=document.querySelector('.status-legend'); if (lg) lg.style.display='none'; }
            if (hamburgerButton) hamburgerButton.addEventListener('click', function(){
                if (menuOverlay && menuOverlay.classList.contains('show')) { closeMenu(); } else { openMenu(); }
            });
            if (menuOverlay) menuOverlay.addEventListener('click', function(e){ if (e.target === menuOverlay) closeMenu(); });
            if (menuOverlay) menuOverlay.querySelectorAll('.menu-item').forEach((it) => {
                it.addEventListener('click', function(){ const name = (this.textContent || '').trim(); closeMenu(); openView(name); });
            });

            // Orders loader from Firebase (uses functions exposed by firebase.js)
            const OrdersStore = { orders: [] };
            function normalizeOrders(raw){
                try {
                    const arr = Array.isArray(raw) ? raw : [];
                    return arr.map((d)=>{
                        const data = (d && typeof d.data === 'function') ? d.data() : d;
                        const items = Array.isArray(data?.items) ? data.items : [];
                        return {
                            id: data?.transactionId || data?.id || '',
                            customerId: data?.customerId || '',
                            paymentMethod: data?.paymentMethod || '',
                            transactionId: data?.transactionId || '',
                            gross: typeof data?.gross === 'number' ? data.gross : (parseFloat(String(data?.gross||'').replace(/[^0-9.]/g,''))||0),
                            shippingAddress: data?.shippingAddress || {},
                            items: items.map((it)=>({
                                name: it?.name || it?.productName || it?.title || 'Item',
                                qty: it?.quantity || it?.qty || 1,
                                price: typeof it?.price === 'number' ? it.price : (parseFloat(String((it?.newPrice||it?.originalPrice||it?.price||'0')).replace(/[^0-9.]/g,''))||0),
                                img: it?.imgUrl || it?.imageUrl || it?.image || ''
                            })),
                            createdAt: data?.createdAt || data?.created || null,
                        };
                    });
                } catch { return []; }
            }
            async function listOrdersFromFirebase(){
                try {
                    const api = window.FitRightFirebase || window.FitriteCatalogFirebase || {};
                    if (typeof api.onOrdersSnapshot === 'function') {
                        // prefer live updates
                        if (!window.__ordersUnsub){
                            window.__ordersUnsub = api.onOrdersSnapshot((snap)=>{ 
                                OrdersStore.orders = normalizeOrders(snap); 
                                try { if (typeof window.refreshOrdersViews === 'function') window.refreshOrdersViews(); } catch {}
                            });
                        }
                        return OrdersStore.orders;
                    }
                    if (typeof api.listOrders === 'function') {
                        const res = await api.listOrders();
                        const out = normalizeOrders(res);
                        return out;
                    }
                    if (typeof api.getOrders === 'function') {
                        const res = await api.getOrders();
                        return normalizeOrders(res);
                    }
                } catch (e) { console.warn('Failed to load orders:', e); }
                return [];
            }
            async function reloadOrders(){
                const orders = await listOrdersFromFirebase();
                OrdersStore.orders = orders;
                return orders;
            }
            (function wireOrdersAuth(){
                const fb = window.FitriteCatalogFirebase || {};
                const { auth, onAuthStateChanged, signInAnonymously } = fb;
                if (!auth || !onAuthStateChanged) return;
                onAuthStateChanged(auth, async (user)=>{
                    try { if (!user && typeof signInAnonymously === 'function') await signInAnonymously(auth); } catch {}
                    await reloadOrders();
                });
            })();
            if (!window.FitriteOrders || !window.FitriteOrders.get) {
                window.FitriteOrders = { get: ()=> OrdersStore.orders, set: (rows)=>{ try{ OrdersStore.orders = Array.isArray(rows)?rows:[]; }catch{} }, reload: reloadOrders };
            }

            // Re-render Status/Sales if open when orders update
            window.refreshOrdersViews = function(){
                try {
                    const vt = (document.getElementById('viewTitle')?.textContent || '').toLowerCase();
                    if (vt === 'status') { openView('Status'); }
                    else if (vt === 'sales') { openView('Sales'); }
                } catch {}
            };

            // Demo data + renderers for Status, Sales, Data
            function randomInt(min, max){ return Math.floor(Math.random() * (max - min + 1)) + min; }
            function sample(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
            function collectCatalogProducts(){
                const products = [];
                try {
                    document.querySelectorAll('.product-item').forEach((el) => {
                        const name = (el.querySelector('.product-name')?.textContent || '').trim();
                        const img = el.querySelector('img')?.getAttribute('src') || '';
                        const priceText = (el.querySelector('.product-price')?.textContent || '').trim();
                        const priceNum = parseFloat((priceText.match(/[0-9]+(?:\.[0-9]{1,2})?/) || ['0'])[0]);
                        if (name && img && !Number.isNaN(priceNum) && priceNum > 0) {
                            products.push({ name, img, price: priceNum });
                        }
                    });
                } catch {}
                return products;
            }

            function generateFakeOrders(n){
                const statuses = ['green','yellow','blue','red'];
                const catalog = collectCatalogProducts();
                const fallback = [
                    { name:'Leather Jacket', img:'classic_black_biker.jpg', price:165 },
                    { name:'Belt', img:'Belt9.jpg', price:25 },
                    { name:'Sunglasses', img:'Sunglasses47.jpg', price:49 },
                    { name:'Gloves', img:'Gloves1.jpg', price:19 },
                    { name:'Hat', img:'Hat1.jpg', price:22 },
                    { name:'Bag', img:'Bag1.jpg', price:59 },
                    { name:'Scarf', img:'Scarf1.jpg', price:15 }
                ];
                const pool = catalog.length ? catalog : fallback;
                const orders = [];
                for (let i=0;i<n;i++){
                    const id = `ORD-${String(10000+i)}`;
                    const status = sample(statuses);
                    const progress = status==='green' ? 3 : status==='red' ? 2 : 2;
                    const numItems = randomInt(1,4);
                    const orderItems = Array.from({length:numItems}, () => {
                        const p = sample(pool);
                        return { name: p.name, img: p.img, qty: randomInt(1,3), price: p.price };
                    });
                    const pick = sample(orderItems);
                    const price = pick.price;
                    const supplier = Math.max(5, Math.floor(price * (0.4 + Math.random()*0.2)));
                    orders.push({ id, status, progress, items: orderItems, price, supplier });
                }
                return orders;
            }

            // QR code mock removed – integrate real QR later if needed
            function renderQRCode(_container){ _container.innerHTML = ''; }
            // Order details modal - reusable
            let orderOverlayEl = null;
            function ensureOrderOverlay(){
                if (orderOverlayEl) return orderOverlayEl;
                orderOverlayEl = document.createElement('div');
                orderOverlayEl.className = 'order-overlay';
                orderOverlayEl.innerHTML = `
                    <div class="order-modal" role="dialog" aria-modal="true" aria-labelledby="orderTitle">
                        <div class="head">
                            <div id="orderTitle" class="title">Order</div>
                            <button class="close" type="button">Close</button>
                        </div>
                        <div class="body"></div>
                        <div class="footer">
                            <button class="close" type="button">Close</button>
                        </div>
                    </div>`;
                document.body.appendChild(orderOverlayEl);
                const closers = orderOverlayEl.querySelectorAll('.close');
                closers.forEach(btn=> btn.addEventListener('click', ()=> orderOverlayEl.classList.remove('show')));
                orderOverlayEl.addEventListener('click', (e)=>{ if (e.target === orderOverlayEl) orderOverlayEl.classList.remove('show'); });
                return orderOverlayEl;
            }
            function openOrderModal(order){
                const overlay = ensureOrderOverlay();
                const title = overlay.querySelector('#orderTitle');
                const body = overlay.querySelector('.body');
                if (title) title.textContent = `${order.id} – ${order.items.length} items`;
                if (body) {
                    body.innerHTML = '';
                    // status/timeline summary
                    const tl = document.createElement('div'); tl.style.display='flex'; tl.style.alignItems='center'; tl.style.gap='10px'; tl.style.flexWrap='wrap';
                    ['Created','Packed','In Transit','Delivered'].forEach((s,idx)=>{ const pill=document.createElement('div'); pill.textContent=s; pill.style.padding='4px 8px'; pill.style.border='1px solid #e5e7eb'; pill.style.borderRadius='999px'; pill.style.fontWeight='800'; pill.style.background= idx<= (order.progress||0) ? '#10b98122':'#f3f4f6'; tl.appendChild(pill); });
                    body.appendChild(tl);
                    order.items.forEach(it=>{
                        const row=document.createElement('div'); row.className='item';
                        const img=document.createElement('img'); img.src = it.img || 'Accessories.jpg'; img.alt=it.name;
                        const name=document.createElement('div'); name.style.fontWeight='900'; name.textContent = `${it.qty}× ${it.name}`;
                        const price=document.createElement('div'); price.style.fontWeight='900'; price.textContent = `£${(it.price).toFixed(2)}`;
                        row.appendChild(img); row.appendChild(name); row.appendChild(price); body.appendChild(row);
                    });
                    // QR code panel
                    const qrWrap = document.createElement('div'); qrWrap.style.display='grid'; qrWrap.style.placeItems='center'; qrWrap.style.padding='12px'; qrWrap.style.border='1px dashed #e5e7eb'; qrWrap.style.borderRadius='12px';
                    const qrBox = document.createElement('div'); qrBox.className='qr'; qrWrap.appendChild(qrBox); renderQRCode(qrBox);
                    body.appendChild(qrWrap);
                }
                overlay.classList.add('show');
            }

            // Ensure the fixed supplier-color legend exists and is visible
            function ensureStatusLegend(){
                let legend = document.querySelector('.status-legend');
                if (!legend) {
                    legend = document.createElement('div'); legend.className='status-legend';
                    const map = [
                        ['Fitrite', '#059669'],
                        ['Bullet 69', '#DC2626'],
                        ['Rayflector', '#F59E0B'],
                        ['Grinders', '#B06F3C'],
                        ['Euro Accessories', '#1E40AF'],
                        ['Molimoj', '#7C3AED'],
                        ['Lucini', '#EA580C']
                    ];
                    map.forEach(([name,color])=>{ const row=document.createElement('div'); row.className='legend-item'; const dot=document.createElement('div'); dot.className='legend-color'; dot.style.background=color; const label=document.createElement('div'); label.textContent=name; row.appendChild(dot); row.appendChild(label); legend.appendChild(row); });
                    document.body.appendChild(legend);
                }
                legend.style.display = 'flex';
                return legend;
            }

            // Ensure top/bottom arrows exist for overlay views and wire to scroll the overlay body
            function ensureOverlayEdgeNav(){
                if (!viewOverlay || !viewBody) return null;
                let btnTop = document.getElementById('ovEdgeTop');
                let btnBottom = document.getElementById('ovEdgeBottom');
                if (!btnTop) {
                    btnTop = document.createElement('button');
                    btnTop.id = 'ovEdgeTop';
                    btnTop.className = 'edge-nav-btn edge-top';
                    btnTop.setAttribute('aria-label','Scroll to top');
                    btnTop.textContent = '▲';
                    viewOverlay.appendChild(btnTop);
                }
                if (!btnBottom) {
                    btnBottom = document.createElement('button');
                    btnBottom.id = 'ovEdgeBottom';
                    btnBottom.className = 'edge-nav-btn edge-bottom';
                    btnBottom.setAttribute('aria-label','Scroll to bottom');
                    btnBottom.textContent = '▼';
                    viewOverlay.appendChild(btnBottom);
                }
                // Click scroll handlers target the overlay body
                if (!btnTop.dataset.wired) { btnTop.addEventListener('click', () => viewBody.scrollTo({ top: 0, behavior: 'smooth' })); btnTop.dataset.wired = '1'; }
                if (!btnBottom.dataset.wired) { btnBottom.addEventListener('click', () => viewBody.scrollTo({ top: viewBody.scrollHeight, behavior: 'smooth' })); btnBottom.dataset.wired = '1'; }

                // Show on hover near right/top/bottom edges of the overlay
                if (!viewOverlay.dataset.edgeNavReady) {
                    function onOverlayMouseMove(e){
                        const nearRightEdge = (window.innerWidth - e.clientX) < 140;
                        const nearTopRight = e.clientY < 80 && nearRightEdge;
                        const nearBottomRight = (window.innerHeight - e.clientY) < 80 && nearRightEdge;
                        btnTop.classList.toggle('show', nearTopRight);
                        btnBottom.classList.toggle('show', nearBottomRight);
                    }
                    viewOverlay.addEventListener('mousemove', onOverlayMouseMove);
                    viewOverlay.dataset.edgeNavReady = '1';
                }
                btnTop.style.display = '';
                btnBottom.style.display = '';
                return { btnTop, btnBottom };
            }

            function renderStatus(range){
                const orders = (window.FitriteOrders && Array.isArray(window.FitriteOrders.get())) ? window.FitriteOrders.get() : [];
                const wrap = document.createElement('div');
                // range switch
                const rs = document.createElement('div'); rs.className='range-switch'; rs.style.justifyContent = 'flex-end';
                ['Day','Week','Month'].forEach((r)=>{ const b=document.createElement('button'); b.className=`range-pill${r.toLowerCase()===range?' active':''}`; b.textContent=r; b.addEventListener('click',()=>renderStatus(r.toLowerCase())); rs.appendChild(b); });
                wrap.appendChild(rs);
                // Legend under hamburger (fixed)
                ensureStatusLegend();

                const grid = document.createElement('div'); grid.className='orders-grid';
                if (!orders.length) {
                    const empty=document.createElement('div'); empty.className='view-empty'; empty.textContent='No orders yet'; grid.appendChild(empty);
                }
                orders.forEach((o)=>{
                    const card = document.createElement('div'); card.className='order-card';
                    const head = document.createElement('div'); head.className='order-head';
                    const oid = document.createElement('div'); oid.className='order-id'; oid.textContent = (o.transactionId || o.id || ''); head.appendChild(oid);
                    const statusColor = (o.status && typeof o.status === 'string') ? o.status.toLowerCase() : 'blue';
                    const pill = document.createElement('div'); pill.className=`status-pill status-${statusColor}`; pill.textContent = 'Created'; head.appendChild(pill);
                    card.appendChild(head);

                    const timeline = document.createElement('div'); timeline.className='timeline';
                    const progress = (typeof o.progress === 'number') ? o.progress : 1;
                    ['Created','Packed','In Transit','Delivered'].forEach((s,idx)=>{ const step=document.createElement('div'); step.className=`tl-step ${idx<=progress?'active':''}`; const dot=document.createElement('div'); dot.className='tl-dot'; step.appendChild(dot); const tx=document.createElement('span'); tx.textContent=s; step.appendChild(tx); timeline.appendChild(step); if(idx<3){ const bar=document.createElement('div'); bar.className='tl-bar'; timeline.appendChild(bar);} });
                    card.appendChild(timeline);

                    const body = document.createElement('div'); body.className='order-body'; body.addEventListener('click', function(){
                        const firstItem = o.items && o.items[0] ? o.items[0] : null;
                        if (firstItem) openQuickViewData(firstItem.name, firstItem.price || o.gross || 0, firstItem.img);
                    });
                    const actions = document.createElement('div'); actions.className='order-actions';
                    const viewAll = document.createElement('button'); viewAll.className='ghost-btn'; viewAll.textContent='View the whole order'; viewAll.addEventListener('click',(e)=>{
                        e.stopPropagation();
                        openOrderModal(o);
                    });
                    const toSales = document.createElement('button'); toSales.className='link-btn'; toSales.textContent='Open in Sales'; toSales.addEventListener('click',(e)=>{ e.stopPropagation(); window._pendingSalesHighlightId = o.id; openView('Sales', { highlightOrderId: o.id }); });
                    actions.appendChild(viewAll); actions.appendChild(toSales);

                    const qrwrap = document.createElement('div'); qrwrap.className='qr-box'; const qr=document.createElement('div'); qr.className='qr'; qrwrap.appendChild(qr); renderQRCode(qr);
                    body.appendChild(actions); body.appendChild(qrwrap);
                    card.appendChild(body);

                    const itemsEl = document.createElement('ul'); itemsEl.className='order-items';
                    o.items.forEach(it=>{ const li=document.createElement('li'); li.innerHTML=`<span>${it.qty}× ${it.name}</span><span>£${(it.price||0).toFixed(2)}</span>`; itemsEl.appendChild(li); });
                    card.appendChild(itemsEl);
                    grid.appendChild(card);
                });
                wrap.appendChild(grid);
                if (viewTitle) viewTitle.textContent = 'Status';
                if (viewBody) { viewBody.innerHTML=''; viewBody.appendChild(wrap); }
            }

            // one-time highlight id for Sales view
            window._pendingSalesHighlightId = window._pendingSalesHighlightId || null;
            function renderSales(options){
                const opts = options || {};
                const orders = (window.FitriteOrders && Array.isArray(window.FitriteOrders.get())) ? window.FitriteOrders.get() : [];
                const wrap = document.createElement('div');
                const top = document.createElement('div'); top.className='sales-summary';
                const totalRevenue = orders.reduce((a,o)=> a + (o.gross || 0), 0);
                const profit = document.createElement('div'); profit.className='profit-badge'; profit.textContent = `Today Revenue: £${totalRevenue.toFixed(2)}`;
                const link = document.createElement('button'); link.className='ghost-btn'; link.textContent='See profit data'; link.addEventListener('click',()=>openView('Data'));
                top.appendChild(profit); top.appendChild(link);
                wrap.appendChild(top);

                const table = document.createElement('table'); table.className='sales-table';
                table.innerHTML = `<thead><tr><th>Item</th><th>Sold Price</th><th>Payment</th><th>Date</th><th>Supplier Cost</th><th>Profit</th><th></th></tr></thead>`;
                const tb = document.createElement('tbody');
                if (!orders.length) {
                    const tr=document.createElement('tr');
                    const td=document.createElement('td'); td.colSpan=7; td.innerHTML = '<div class="view-empty">Loading orders…</div>';
                    tr.appendChild(td); tb.appendChild(tr);
                    // Fallback fetch now and re-render on success
                    (async ()=>{
                        try {
                            const api = window.FitRightFirebase || window.FitriteCatalogFirebase || {};
                            let rows = [];
                            if (typeof api.listOrders === 'function') { const res = await api.listOrders(50); rows = normalizeOrders(res); }
                            if ((!rows || !rows.length) && typeof api.getOrders === 'function') { const res = await api.getOrders(50); rows = normalizeOrders(res); }
                            if (rows && rows.length) {
                                try { if (window.FitriteOrders && window.FitriteOrders.set) window.FitriteOrders.set(rows); } catch {}
                                try { if (typeof window.refreshOrdersViews === 'function') window.refreshOrdersViews(); } catch {}
                            } else if (typeof api.onOrdersSnapshot === 'function') {
                                try {
                                    api.onOrdersSnapshot((snap)=>{
                                        const live = normalizeOrders(snap);
                                        try { if (window.FitriteOrders && window.FitriteOrders.set) window.FitriteOrders.set(live); } catch {}
                                        try { if (typeof window.refreshOrdersViews === 'function') window.refreshOrdersViews(); } catch {}
                                    }, { limitCount: 50 });
                                } catch {}
                            }
                        } catch (e) { /* silent */ }
                    })();
                }
                function formatDateSafe(d){ try{ const dt = (d && typeof d.toDate==='function') ? d.toDate() : new Date(d); if(!isNaN(dt)) return dt.toLocaleString('en-GB',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'}); }catch{} return ''; }
                orders.forEach(o=>{
                    const picked = (o.items && o.items[0]) ? o.items[0] : { name:'Item', img:'Accessories.jpg', price:0 };
                    const it = picked.name;
                    const tr=document.createElement('tr');
                    tr.setAttribute('data-order-id', o.transactionId || o.id || '');
                    const profitVal = (picked.price||0) - 0;
                    const firstTd = document.createElement('td');
                    const cell = document.createElement('div'); cell.className='item-cell';
                    const img = document.createElement('img'); img.className='item-thumb'; img.alt = it; img.src = picked.img || 'Accessories.jpg';
                    const nameWrap = document.createElement('div');
                    const nameEl = document.createElement('div'); nameEl.style.fontWeight = '900';
                    // Supplier name colored in parentheses next to product name
                    let supplierLabel = 'Supplier'; let supplierHex = '#111827';
                    try {
                        const product = Array.from(document.querySelectorAll('.product-item')).find(pi => (pi.querySelector('.product-name')?.textContent || '').trim() === it);
                        const cls = product ? getSupplierClass(product) : '';
                        if (cls && supplierColorByClass[cls]) { supplierHex = supplierColorByClass[cls]; supplierLabel = supplierNameByClass[cls] || 'Supplier'; }
                    } catch {}
                    nameEl.innerHTML = `${it} <span class="supplier-name" style="color:${supplierHex}">( ${supplierLabel} )</span>`;
                    const saleId = document.createElement('div'); saleId.className='sale-id'; saleId.textContent = o.transactionId || o.id || '';
                    nameWrap.appendChild(nameEl); nameWrap.appendChild(saleId);
                    cell.appendChild(img); cell.appendChild(nameWrap);
                    firstTd.appendChild(cell);
                    tr.appendChild(firstTd);
                    const supplierCostText = '£—';
                    const pay = (o.paymentMethod || '').toString();
                    const when = formatDateSafe(o.createdAt);
                    tr.insertAdjacentHTML('beforeend', `<td>£${(picked.price||0).toFixed(2)}</td><td>${pay}</td><td>${when}</td><td>${supplierCostText}</td><td style="color:${profitVal>=0?'#059669':'#b91c1c'};font-weight:900">£${profitVal.toFixed(2)}</td>`);
                    
                    const td=document.createElement('td'); const btn=document.createElement('button'); btn.className='link-btn'; btn.textContent='Check status'; btn.addEventListener('click',(e)=>{ 
                        e.stopPropagation(); 
                        // Navigate to Status view, then open the order modal
                        openView('Status');
                        setTimeout(()=> openOrderModal(o), 120);
                    }); td.appendChild(btn); tr.appendChild(td);
                    tb.appendChild(tr);
                });
                table.appendChild(tb);
                wrap.appendChild(table);
                // After render: if a target order id was provided, scroll and highlight ONCE
                const pendingId = opts.highlightOrderId || window._pendingSalesHighlightId || null;
                if (pendingId) {
                    setTimeout(() => {
                        const row = wrap.querySelector(`tr[data-order-id="${pendingId}"]`);
                        if (row) {
                            row.classList.add('sales-highlight');
                            row.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            setTimeout(() => row.classList.remove('sales-highlight'), 2200);
                        } else {
                            // If not present in this random sample, prepend a synthetic row for visibility
                            const target = { id: pendingId, items: [{ name: 'Highlighted Order' , img: 'Accessories.jpg' }], price: 0, supplier: 0 };
                            const tr=document.createElement('tr');
                            tr.setAttribute('data-order-id', target.id);
                            const td=document.createElement('td');
                            const cell=document.createElement('div'); cell.className='item-cell';
                            const img=document.createElement('img'); img.className='item-thumb'; img.alt = target.items[0].name; img.src = target.items[0].img;
                            const nameWrap=document.createElement('div');
                            const nameEl=document.createElement('div'); nameEl.style.fontWeight='900'; nameEl.textContent = target.items[0].name;
                            const saleId=document.createElement('div'); saleId.className='sale-id'; saleId.textContent = target.id;
                            nameWrap.appendChild(nameEl); nameWrap.appendChild(saleId);
                            cell.appendChild(img); cell.appendChild(nameWrap); td.appendChild(cell); tr.appendChild(td);
                            tr.insertAdjacentHTML('beforeend', `<td>£0.00</td><td>£0.00</td><td style="color:#059669;font-weight:900">£0.00</td><td></td>`);
                            const body = wrap.querySelector('tbody');
                            if (body) { body.prepend(tr); tr.classList.add('sales-highlight'); tr.scrollIntoView({ behavior:'smooth', block: 'center' }); setTimeout(()=>tr.classList.remove('sales-highlight'), 2200); }
                        }
                        // consume one-time id so highlight happens only once
                        if (window._pendingSalesHighlightId === pendingId) window._pendingSalesHighlightId = null;
                    }, 80);
                }
                if (viewTitle) viewTitle.textContent = 'Sales';
                if (viewBody) { viewBody.innerHTML=''; viewBody.appendChild(wrap); }
            }

            function renderData(){
                const wrap = document.createElement('div');
                // Top right bar with General Graph button
                const ggTop = document.createElement('div'); ggTop.className='gg-topbar';
                const ggBtn = document.createElement('button'); ggBtn.className='gg-open-btn'; ggBtn.textContent='General Graph'; ggBtn.addEventListener('click', openGeneralGraph);
                ggTop.appendChild(ggBtn); wrap.appendChild(ggTop);
                const kpis = document.createElement('div'); kpis.className='kpi-grid';
                // Pick a real catalogue product to simulate "most sold" now; fallback to monthly index if needed
                let topProductName = 'N/A'; let topProductImg = 'Accessories.jpg'; let topSupplierLabel = 'Supplier'; let topSupplierHex = '#111827'; let topProductPrice = 0;
                try {
                    const products = collectCatalogProducts();
                    if (products && products.length) {
                        const pick = sample(products);
                        topProductName = pick.name;
                        topProductImg = pick.img || topProductImg;
                        if (typeof pick.price === 'number') topProductPrice = pick.price;
                    }
                } catch {}
                // Pull supplier color/label from the catalogue DOM for this product
                try {
                    const productEl = Array.from(document.querySelectorAll('.product-item')).find(pi => (pi.querySelector('.product-name')?.textContent || '').trim() === topProductName);
                    const cls = productEl ? getSupplierClass(productEl) : '';
                    if (cls && supplierColorByClass[cls]) { topSupplierHex = supplierColorByClass[cls]; topSupplierLabel = supplierNameByClass[cls] || 'Supplier'; }
                } catch {}
                // Fallback: if no product was found in catalogue, compute from monthly index
                if (!topProductName || topProductName === 'N/A') {
                    try {
                        const counts = new Map();
                        idxMonth.forEach(r => { const c = (counts.get(r.name) || 0) + 1; counts.set(r.name, c); });
                        let topCount = -1;
                        counts.forEach((c, name) => { if (c > topCount) { topCount = c; topProductName = name; } });
                        const any = idxMonth.find(r => r.name === topProductName);
                        if (any && any.img) topProductImg = any.img;
                        if (any && typeof any.price === 'number') topProductPrice = any.price;
                    } catch {}
                }
                const kpiList = [
                    ['Sold revenue','£—'],
                    ['Most sold product',{ name: topProductName || '—', img: topProductImg, price: topProductPrice, supplierLabel: topSupplierLabel, supplierHex: topSupplierHex }],
                    ['Profit summary','£—'],
                    ['Delivery cost (month)','£—'],
                    ['Supplier spend (next month)','£—'],
                    ['Avg delivery time','—']
                ];
                kpiList.forEach(([label,value])=>{
                    const k=document.createElement('div'); k.className='kpi';
                    const lab=document.createElement('div'); lab.className='label'; lab.textContent=label; if (label === 'Most sold product') { lab.style.color = '#111827'; } k.appendChild(lab);
                    const val=document.createElement('div'); val.className='value';
                    if (value && typeof value === 'object' && 'img' in value) {
                        if (label === 'Most sold product') {
                            // Make the KPI tile itself be the product container (no nested card)
                            const rgb = (value.supplierHex ? hexToRgb(value.supplierHex) : { r:163, g:213, b:255 });
                            k.classList.add('most-sold');
                            k.style.background = `linear-gradient(135deg, ${value.supplierHex || '#a3d5ff'} 0%, rgba(255,255,255,0.9) 100%)`;
                            k.style.borderRadius = '16px';
                            k.style.boxShadow = `0 14px 28px rgba(${rgb.r},${rgb.g},${rgb.b},0.35)`;
                            k.style.border = '1px solid rgba(255,255,255,0.6)';
                            val.style.display = 'grid';
                            val.style.gap = '10px';
                            val.style.alignItems = 'center';

                            const title = document.createElement('div');
                            title.textContent = value.name || 'Product';
                            title.style.fontWeight = '900';
                            title.style.letterSpacing = '0.02em';
                            title.style.fontSize = '16px';
                            title.style.textWrap = 'balance';
                            // Widen the title box to reduce line breaks (use full tile width)
                            title.style.display = 'block';
                            title.style.margin = '0 -12px';
                            title.style.padding = '0 12px';
                            title.style.maxWidth = 'none';
                            val.appendChild(title);

                            const imgBox = document.createElement('div');
                            imgBox.style.background = 'transparent';
                            imgBox.style.borderRadius = '0';
                            imgBox.style.display = 'grid';
                            imgBox.style.placeItems = 'center';
                            imgBox.style.padding = '0';
                            imgBox.style.width = '240px';
                            imgBox.style.maxWidth = '100%';
                            imgBox.style.height = '240px';
                            imgBox.style.aspectRatio = '1 / 1';
                            imgBox.style.margin = '0 auto';
                            const img=document.createElement('img'); img.src=value.img; img.alt=value.name || 'Product';
                            img.style.maxWidth = '100%'; img.style.maxHeight = '100%'; img.style.width = '100%'; img.style.height = '100%'; img.style.objectFit = 'contain'; img.style.borderRadius = '20px'; img.style.display = 'block';
                            imgBox.appendChild(img);
                            val.appendChild(imgBox);

                            // Intentionally omit price display here; shown in Top products section

                            // Supplier label intentionally omitted (shown in Top products chart)

                            // Fixed image box size for uniform display in this view
                            k.style.overflow = 'hidden';
                            val.style.width = '100%';

                            try { if (value.supplierHex) { k.style.borderColor = value.supplierHex; } } catch {}
                        } else {
                            // Default compact value with image
                            const wrap=document.createElement('div'); wrap.style.display='flex'; wrap.style.alignItems='center'; wrap.style.gap='8px';
                            const img=document.createElement('img'); img.className='item-thumb'; img.src=value.img; img.alt=value.name || 'Product';
                            const nm=document.createElement('div'); nm.textContent=value.name || '';
                            nm.style.fontWeight='900';
                            const sup=document.createElement('div'); sup.className='supplier-name'; sup.textContent = value.supplierLabel || 'Supplier'; sup.style.color = value.supplierHex || '#111827';
                            wrap.appendChild(img); wrap.appendChild(nm); wrap.appendChild(sup); val.appendChild(wrap);
                            try { if (value.supplierHex) { k.style.borderColor = value.supplierHex; } } catch {}
                        }
                    } else if (value && typeof value === 'object' && value.type === 'profit-switch') {
                        // One value visible at a time via pills, with vertical breakdown and total
                        const display = document.createElement('div'); display.className='value';
                        const crumb = document.createElement('div'); crumb.className='crumb';
                        const backBtn = document.createElement('button'); backBtn.type='button'; backBtn.className='back'; backBtn.textContent='Back';
                        const crumbLabel = document.createElement('span'); crumbLabel.textContent='';
                        crumb.appendChild(backBtn); crumb.appendChild(crumbLabel);
                        const chart = document.createElement('div'); chart.className='mini-chart';
                        const switcher = document.createElement('div'); switcher.className='mini-switch';
                        const options = ['today','week','month','year'];
                        let current = 'today';
                        let drillState = null; // { monthIndex, monthName, weekIndex, weekLabel }

                        function parseCurrency(s){ const n=parseFloat(String(s).replace(/[^0-9.]/g,'')); return Number.isFinite(n)?n:0; }
                        function formatCurrency(n){ return '£'+n.toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2}); }
                        function distribute(total, parts){
                            if (parts<=1) return [total];
                            const cuts=Array.from({length:parts-1}, ()=> Math.random()); cuts.sort((a,b)=>a-b);
                            const seg=[0,...cuts,1]; const res=[]; for(let i=1;i<seg.length;i++){ res.push((seg[i]-seg[i-1])*total); }
                            // round to 2 decimals and fix residual to keep exact sum
                            let rounded=res.map(x=>Math.round(x*100)/100); const diff=Math.round((total-rounded.reduce((a,b)=>a+b,0))*100)/100; if (rounded.length) rounded[0]=Math.round((rounded[0]+diff)*100)/100; return rounded;
                        } 
                        function setActive(opt){ const lc=String(opt).toLowerCase(); switcher.querySelectorAll('.pill').forEach(p=>{ p.classList.toggle('active', (p.textContent||'').toLowerCase()===lc); }); }
                        function render(){
                            const totalText = value.values[current] || '£0.00';
                            display.textContent = totalText;
                            chart.innerHTML='';
                            const totalVal = parseCurrency(totalText);
                            let labels=[]; let parts=1;
                            const dayNames=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
                            const monthNames=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
                            // Today: no chart
                            if (current==='today') { chart.style.display='none'; crumb.style.display='none'; drillState=null; return; }
                            chart.style.display='flex';
                            if (current==='week') { labels=dayNames; parts=7; }
                            else if (current==='month') { const cm=monthNames[new Date().getMonth()]; labels=['Week 1','Week 2','Week 3','Week 4']; parts=4; }
                            else if (current==='year') { labels=monthNames; parts=12; }
                            let amounts = distribute(totalVal, parts);

                            // Drill-down handling
                            if (current==='month' && drillState && typeof drillState.weekIndex==='number') {
                                // show days inside selected week
                                labels=dayNames; parts=7; amounts = distribute(totalVal, parts);
                                crumb.style.display='flex'; crumbLabel.textContent = (typeof drillState.dayIndex==='number')
                                    ? `${dayNames[drillState.dayIndex]}-Week${drillState.weekIndex+1}`
                                    : `${drillState.weekLabel || ('Week ' + (drillState.weekIndex+1))}`;
                                setActive('week');
                            } else if (current==='year' && drillState && typeof drillState.monthIndex==='number') {
                                // from Year: if week selected inside chosen month, show days
                                const selectedMonth = drillState.monthName || monthNames[drillState.monthIndex] || 'Month';
                                if (typeof drillState.weekIndex==='number') {
                                    labels=dayNames; parts=7; amounts = distribute(totalVal, parts);
                                    crumb.style.display='flex'; crumbLabel.textContent = (typeof drillState.dayIndex==='number')
                                        ? `${dayNames[drillState.dayIndex]}-Week${drillState.weekIndex+1}-${selectedMonth}`
                                        : `${selectedMonth} – Week ${drillState.weekIndex+1}`;
                                    setActive('week');
                                } else {
                                    // show weeks inside selected month (labels without month name; month shown in crumb)
                                    labels=['Week 1','Week 2','Week 3','Week 4']; parts=4; amounts = distribute(totalVal, parts);
                                    crumb.style.display='flex'; crumbLabel.textContent = selectedMonth;
                                }
                            } else {
                                crumb.style.display='none';
                            }
                            const max = Math.max(1, ...amounts);
                            labels.forEach((lbl, idx)=>{
                                const val = amounts[idx] || 0;
                                const bar=document.createElement('div'); bar.className='bar'; bar.style.height = Math.max(6, Math.round((val/max)*100)) + '%'; bar.setAttribute('data-label', lbl);
                                const tip=document.createElement('div'); tip.className='tooltip'; tip.textContent = `${lbl}: ${formatCurrency(val)}`;
                                bar.appendChild(tip);
                                bar.addEventListener('click', ()=>{
                                    // when already at day level, do nothing
                                    if (current==='month' && drillState && typeof drillState.weekIndex==='number') { return; }
                                    if (current==='year' && drillState && typeof drillState.monthIndex==='number' && typeof drillState.weekIndex==='number') { return; }
                                    if (current==='week') {
                                        // leaf at day level; do nothing
                                        return;
                                    } else if (current==='month') {
                                        if (!drillState || typeof drillState.weekIndex!=='number') {
                                            drillState = { weekIndex: idx, weekLabel: `Week ${idx+1}` };
                                        } // if already at days, ignore further drill
                                    } else if (current==='year') {
                                        if (drillState && typeof drillState.monthIndex==='number') {
                                            // clicked week inside month -> days (but do not drill to days by click on bars)
                                            if (typeof drillState.weekIndex!=='number') {
                                                drillState.weekIndex = idx;
                                            }
                                        } else {
                                            // clicked month -> weeks
                                            drillState = { monthIndex: idx, monthName: monthNames[idx] };
                                        }
                                    }
                                    render();
                                });
                                chart.appendChild(bar);
                            });
                        }

                        options.forEach((opt, i)=>{
                            const pill=document.createElement('button'); pill.type='button'; pill.className='pill'+(i===0?' active':''); pill.textContent = opt.charAt(0).toUpperCase()+opt.slice(1);
                            pill.addEventListener('click', ()=>{ current = opt; drillState=null; switcher.querySelectorAll('.pill').forEach(p=>p.classList.remove('active')); pill.classList.add('active'); render(); });
                            switcher.appendChild(pill);
                        });
                        render();
                        // Place the switch directly under the KPI label (before the value/list)
                        k.appendChild(switcher);
                        k.appendChild(crumb);
                        val.appendChild(display); val.appendChild(chart);
                        backBtn.addEventListener('click', ()=>{
                            if (drillState && typeof drillState.dayIndex==='number') { delete drillState.dayIndex; render(); return; }
                            if (drillState && typeof drillState.weekIndex==='number') {
                                // back from days to weeks
                                if (typeof drillState.monthIndex==='number') {
                                    drillState = { monthIndex: drillState.monthIndex, monthName: drillState.monthName };
                                } else {
                                    drillState = null;
                                }
                            } else {
                                drillState = null;
                            }
                            render();
                        });
                    } else if (value && typeof value === 'object' && value.type === 'metric-switch') {
                        // Metric with pills + simulated mini-chart + drill-down (month→weeks→days, year→months→weeks)
                        const display = document.createElement('div'); display.className='value';
                        const crumb = document.createElement('div'); crumb.className='crumb';
                        const backBtn=document.createElement('button'); backBtn.type='button'; backBtn.className='back'; backBtn.textContent='Back';
                        const crumbLabel=document.createElement('span'); crumb.appendChild(backBtn); crumb.appendChild(crumbLabel);
                        const switcher = document.createElement('div'); switcher.className='mini-switch';
                        const chart = document.createElement('div'); chart.className='mini-chart';
                        if (Array.isArray(value.color) && value.color.length>=2) { chart.style.setProperty('--barTop', value.color[0]); chart.style.setProperty('--barBottom', value.color[1]); }
                        const options = ['today','week','month','year'];
                        let current = 'today';
                        let drillState = null; // { monthIndex, monthName, weekIndex, weekLabel, dayIndex }
                        function parseNum(s){ return parseFloat(String(s).replace(/[^0-9.]/g,'')) || 0; }
                        function formatCurrency(n){ return '£'+(n||0).toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2}); }
                        function setActive(opt){ const lc=String(opt).toLowerCase(); switcher.querySelectorAll('.pill').forEach(p=>{ p.classList.toggle('active', (p.textContent||'').toLowerCase()===lc); }); }
                        function render(){
                            const txt=(value.values||{})[current]||'';
                            display.textContent = txt;
                            chart.innerHTML='';
                            const monthNames=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
                            const dayNames=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
                            if (current==='today') { chart.style.display='none'; crumb.style.display='none'; drillState=null; return; }
                            chart.style.display='flex';
                            let labels = current==='week' ? dayNames : (current==='month' ? ['Week 1','Week 2','Week 3','Week 4'] : monthNames);
                            const total=parseNum(txt);
                            const cuts=Array.from({length:Math.max(1, labels.length-1)}, ()=>Math.random()).sort((a,b)=>a-b);
                            const seg=[0,...cuts,1];
                            let amounts=[]; for(let i=1;i<seg.length;i++){ amounts.push((seg[i]-seg[i-1])*total); }

                            // Drilldowns
                            if (current==='month' && drillState && typeof drillState.weekIndex==='number') {
                                labels = dayNames;
                                const c2=Array.from({length:6},()=>Math.random()).sort((a,b)=>a-b);
                                const s2=[0,...c2,1]; amounts=[]; for(let i=1;i<s2.length;i++){ amounts.push((s2[i]-s2[i-1])*total); }
                                crumb.style.display='flex';
                                crumbLabel.textContent = (typeof drillState.dayIndex==='number')
                                    ? `${dayNames[drillState.dayIndex]}-Week${drillState.weekIndex+1}`
                                    : `${drillState.weekLabel || ('Week ' + (drillState.weekIndex+1))}`;
                                setActive('week');
                            } else if (current==='year' && drillState && typeof drillState.monthIndex==='number') {
                                const m = drillState.monthName || monthNames[drillState.monthIndex] || 'Month';
                                if (typeof drillState.weekIndex==='number') {
                                    labels = dayNames;
                                    const c3=Array.from({length:6},()=>Math.random()).sort((a,b)=>a-b);
                                    const s3=[0,...c3,1]; amounts=[]; for(let i=1;i<s3.length;i++){ amounts.push((s3[i]-s3[i-1])*total); }
                                    crumb.style.display='flex';
                                    crumbLabel.textContent = (typeof drillState.dayIndex==='number')
                                        ? `${dayNames[drillState.dayIndex]}-Week${drillState.weekIndex+1}-${m}`
                                        : `${m} – Week ${drillState.weekIndex+1}`;
                                    setActive('week');
                                } else {
                                    labels = ['Week 1','Week 2','Week 3','Week 4'];
                                    const c4=[Math.random(),Math.random(),Math.random()].sort((a,b)=>a-b);
                                    const s4=[0,...c4,1]; amounts=[]; for(let i=1;i<s4.length;i++){ amounts.push((s4[i]-s4[i-1])*total); }
                                    crumb.style.display='flex'; crumbLabel.textContent = m;
                                }
                            } else {
                                crumb.style.display='none';
                            }

                            const max=Math.max(1, ...amounts);
                            labels.forEach((lbl, idx)=>{
                                const n=amounts[idx]||0;
                                const h=Math.max(6, Math.round((n/max)*100));
                                const bar=document.createElement('div'); bar.className='bar'; bar.style.height=h+'%'; bar.setAttribute('data-label', lbl);
                                const tip=document.createElement('div'); tip.className='tooltip'; tip.textContent = `${lbl}: ${formatCurrency(n)}`;
                                bar.appendChild(tip);
                                bar.addEventListener('click', ()=>{
                                    if (current==='month') {
                                        if (!drillState || typeof drillState.weekIndex!=='number') {
                                            drillState = { weekIndex: idx, weekLabel: `Week ${idx+1}` };
                                            render();
                                        }
                                        return;
                                    }
                                    if (current==='year') {
                                        if (!drillState || typeof drillState.monthIndex!=='number') {
                                            drillState = { monthIndex: idx, monthName: monthNames[idx] };
                                            render();
                                            return;
                                        }
                                        if (typeof drillState.weekIndex!=='number') {
                                            drillState.weekIndex = idx;
                                            render();
                                        }
                                        return;
                                    }
                                });
                                chart.appendChild(bar);
                            });
                        }
                        options.forEach((opt, i)=>{
                            const pill=document.createElement('button'); pill.type='button'; pill.className='pill'+(i===0?' active':''); pill.textContent=opt.charAt(0).toUpperCase()+opt.slice(1);
                            pill.addEventListener('click', ()=>{ current=opt; drillState=null; switcher.querySelectorAll('.pill').forEach(p=>p.classList.remove('active')); pill.classList.add('active'); render(); });
                            switcher.appendChild(pill);
                        });
                        // Optional tile border tint
                        try { if (Array.isArray(value.color) && value.color.length>=1) { k.style.borderColor = value.color[0]; } } catch {}
                        render();
                        k.appendChild(switcher); k.appendChild(crumb);
                        val.appendChild(display); val.appendChild(chart);
                        backBtn.addEventListener('click', ()=>{
                            if (drillState && typeof drillState.dayIndex==='number') { delete drillState.dayIndex; render(); return; }
                            if (drillState && typeof drillState.weekIndex==='number') {
                                if (typeof drillState.monthIndex==='number') { drillState = { monthIndex: drillState.monthIndex, monthName: drillState.monthName }; }
                                else { drillState = null; }
                            } else { drillState = null; }
                            render();
                        });
                    } else if (value && typeof value === 'object' && value.type === 'supplier-spend') {
                        // Main value is the spend; add delivery subline
                        const main = document.createElement('div'); main.className='value'; main.textContent = value.spend || '';
                        val.appendChild(main);
                        const sub = document.createElement('div'); sub.className='subline';
                        const l=document.createElement('div'); l.textContent = 'Delivery cost (month)';
                        const v=document.createElement('div'); v.className='val'; v.textContent = value.delivery || '';
                        sub.appendChild(l); sub.appendChild(v); val.appendChild(sub);
                    } else if (value && typeof value === 'object' && value.type === 'delivery-switch') {
                        // Delivery cost with drill-down + supplier spend subline
                        const display = document.createElement('div'); display.className='value';
                        const crumb = document.createElement('div'); crumb.className='crumb'; const backBtn=document.createElement('button'); backBtn.type='button'; backBtn.className='back'; backBtn.textContent='Back'; const crumbLabel=document.createElement('span'); crumb.appendChild(backBtn); crumb.appendChild(crumbLabel);
                        const switcher = document.createElement('div'); switcher.className='mini-switch';
                        const chart = document.createElement('div'); chart.className='mini-chart';
                        if (Array.isArray(value.color) && value.color.length>=2) { chart.style.setProperty('--barTop', value.color[0]); chart.style.setProperty('--barBottom', value.color[1]); }
                        const options = ['today','week','month','year'];
                        let current = 'today'; let drillState=null;
                        const dayNames=['Mon','Tue','Wed','Thu','Fri','Sat','Sun']; const monthNames=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
                        function parseNum(s){ return parseFloat(String(s).replace(/[^0-9.]/g,'')) || 0; }
                        function setActive(opt){ const lc=String(opt).toLowerCase(); switcher.querySelectorAll('.pill').forEach(p=>{ p.classList.toggle('active', (p.textContent||'').toLowerCase()===lc); }); }
                        function render(){ const txt=(value.values||{})[current]||''; display.textContent=txt; chart.innerHTML=''; if(current==='today'){ chart.style.display='none'; crumb.style.display='none'; drillState=null; return; } chart.style.display='flex'; let labels=current==='week'?dayNames:(current==='month'?['Week 1','Week 2','Week 3','Week 4']:monthNames); const total=parseNum(txt); const cuts=Array.from({length:Math.max(1, labels.length-1)}, ()=>Math.random()).sort((a,b)=>a-b); const seg=[0,...cuts,1]; let amounts=[]; for(let i=1;i<seg.length;i++){ amounts.push((seg[i]-seg[i-1])*total);} if(current==='month'&&drillState&&typeof drillState.weekIndex==='number'){ labels=dayNames; const c2=Array.from({length:6},()=>Math.random()).sort((a,b)=>a-b); const s2=[0,...c2,1]; amounts=[]; for(let i=1;i<s2.length;i++){ amounts.push((s2[i]-s2[i-1])*total);} crumb.style.display='flex'; crumbLabel.textContent=(typeof drillState.dayIndex==='number')?`${dayNames[drillState.dayIndex]}-Week${drillState.weekIndex+1}`:`${drillState.weekLabel||('Week '+(drillState.weekIndex+1))}`; setActive('week'); } else if(current==='year'&&drillState&&typeof drillState.monthIndex==='number'){ const m=drillState.monthName||monthNames[drillState.monthIndex]||'Month'; if(typeof drillState.weekIndex==='number'){ labels=dayNames; const c3=Array.from({length:6},()=>Math.random()).sort((a,b)=>a-b); const s3=[0,...c3,1]; amounts=[]; for(let i=1;i<s3.length;i++){ amounts.push((s3[i]-s3[i-1])*total);} crumb.style.display='flex'; crumbLabel.textContent=(typeof drillState.dayIndex==='number')?`${dayNames[drillState.dayIndex]}-Week${drillState.weekIndex+1}-${m}`:`${m} – Week ${drillState.weekIndex+1}`; setActive('week'); } else { labels=['Week 1','Week 2','Week 3','Week 4']; const c4=[Math.random(),Math.random(),Math.random()].sort((a,b)=>a-b); const s4=[0,...c4,1]; amounts=[]; for(let i=1;i<s4.length;i++){ amounts.push((s4[i]-s4[i-1])*total);} crumb.style.display='flex'; crumbLabel.textContent=m; }} else { crumb.style.display='none'; } const max=Math.max(1,...amounts); labels.forEach((lbl,idx)=>{ const n=amounts[idx]||0; const h=Math.max(6,Math.round((n/max)*100)); const bar=document.createElement('div'); bar.className='bar'; bar.style.height=h+'%'; bar.setAttribute('data-label',lbl); const tip=document.createElement('div'); tip.className='tooltip'; tip.textContent=`${lbl}: £${n.toFixed(2)}`; bar.appendChild(tip); bar.addEventListener('click',()=>{ if(current==='month'&&drillState&&typeof drillState.weekIndex==='number'){ return; } if(current==='year'&&drillState&&typeof drillState.monthIndex==='number'&&typeof drillState.weekIndex==='number'){ return; } if(current==='week'){return;} else if(current==='month'){ if(!drillState||typeof drillState.weekIndex!=='number') drillState={weekIndex:idx, weekLabel:`Week ${idx+1}`}; } else if(current==='year'){ if(drillState&&typeof drillState.monthIndex==='number'){ if(typeof drillState.weekIndex!=='number') drillState.weekIndex=idx; } else { drillState={monthIndex:idx, monthName:monthNames[idx]}; } } render(); }); chart.appendChild(bar); }); }
                        options.forEach((opt,i)=>{ const pill=document.createElement('button'); pill.type='button'; pill.className='pill'+(i===0?' active':''); pill.textContent=opt.charAt(0).toUpperCase()+opt.slice(1); pill.addEventListener('click',()=>{ current=opt; switcher.querySelectorAll('.pill').forEach(p=>p.classList.remove('active')); pill.classList.add('active'); drillState=null; render(); }); switcher.appendChild(pill); });
                        render();
                        k.appendChild(switcher); k.appendChild(crumb);
                        val.appendChild(display); val.appendChild(chart);
                        backBtn.addEventListener('click',()=>{ if(drillState&&typeof drillState.dayIndex==='number'){ delete drillState.dayIndex; render(); return; } if(drillState&&typeof drillState.weekIndex==='number'){ if(typeof drillState.monthIndex==='number') drillState={monthIndex:drillState.monthIndex, monthName:drillState.monthName}; else drillState=null; } else { drillState=null; } render(); });
                        if (value.sublineSpend) { const sub=document.createElement('div'); sub.className='subline'; const l=document.createElement('div'); l.textContent='Supplier spend'; const v=document.createElement('div'); v.className='val'; v.textContent=value.sublineSpend; sub.appendChild(l); sub.appendChild(v); val.appendChild(sub); }
                    } else {
                        val.textContent=String(value);
                    }
                    k.appendChild(val); kpis.appendChild(k);
                });
                wrap.appendChild(kpis);

                // Access sold products by period + search (from live orders)
                function toDateSafe(ts){ try{ return (ts && typeof ts.toDate==='function') ? ts.toDate() : new Date(ts); } catch { return new Date(0); } }
                function startOfDay(d){ const x=new Date(d); x.setHours(0,0,0,0); return x; }
                function startOfWeek(d){ const x=startOfDay(d); const day=x.getDay(); const diff=(day===0?6:day-1); x.setDate(x.getDate()-diff); return x; }
                function startOfMonth(d){ return new Date(d.getFullYear(), d.getMonth(), 1); }
                function startOfYear(d){ return new Date(d.getFullYear(), 0, 1); }
                const now = new Date();
                const allOrders = (window.FitriteOrders && Array.isArray(window.FitriteOrders.get())) ? window.FitriteOrders.get() : [];
                const day0 = startOfDay(now), week0 = startOfWeek(now), month0 = startOfMonth(now), year0 = startOfYear(now);
                const ordersDay = allOrders.filter(o=> toDateSafe(o.createdAt) >= day0);
                const ordersWeek = allOrders.filter(o=> toDateSafe(o.createdAt) >= week0);
                const ordersMonth = allOrders.filter(o=> toDateSafe(o.createdAt) >= month0);
                const ordersYear = allOrders.filter(o=> toDateSafe(o.createdAt) >= year0);

                function buildIndexFromOrders(orders){
                    const list = [];
                    orders.forEach(o=>{
                        const orderId = o.transactionId || o.id || '';
                        const pay = o.paymentMethod || '';
                        const when = o.createdAt || null;
                        (Array.isArray(o.items)?o.items:[]).forEach(it=>{
                            const price = (typeof it.price==='number') ? it.price : (parseFloat(String((it.newPrice||it.originalPrice||'').replace(/[^0-9.]/g,''))||'0') || 0);
                            const img = it.img || it.imgUrl || 'Accessories.jpg';
                            list.push({ id: orderId, name: it.name || 'Item', img, price, paymentMethod: pay, createdAt: when });
                        });
                    });
                    return list;
                }
                const idxDay = buildIndexFromOrders(ordersDay);
                const idxWeek = buildIndexFromOrders(ordersWeek);
                const idxMonth = buildIndexFromOrders(ordersMonth);
                const idxYear = buildIndexFromOrders(ordersYear);

                const searchBox = document.createElement('div'); searchBox.className='data-search';
                const input = document.createElement('input'); input.type='text'; input.placeholder='Search orders and products (order number, price, name)';
                searchBox.appendChild(input);
                const resultLine = document.createElement('div'); resultLine.className='results-line'; resultLine.textContent = '';
                const totalLine = document.createElement('div'); totalLine.className='results-line'; totalLine.style.textAlign='right'; totalLine.style.fontWeight='900'; totalLine.textContent = '';
                wrap.appendChild(searchBox);
                wrap.appendChild(resultLine);
                wrap.appendChild(totalLine);

                const sections = document.createElement('div'); sections.className='data-sections';
                function makeSection(title, data, groupSpec){
                    const card = document.createElement('div'); card.className='section-card';
                    const head=document.createElement('div'); head.className='section-head';
                    const t=document.createElement('div'); t.className='section-title'; t.textContent=title;
                    const count=document.createElement('div'); count.className='count-badge'; count.textContent = `${data.length} items`;
                    const total=document.createElement('div'); total.className='total-badge'; total.textContent = `Total £${data.reduce((s,x)=>s+(x.price||0),0).toFixed(2)}`;
                    head.appendChild(t); head.appendChild(count); head.appendChild(total); card.appendChild(head);

                    // If no grouping requested, render a single table
                    if (!groupSpec) {
                        const wrapTbl = document.createElement('div'); wrapTbl.className='table-wrap';
                        const table = document.createElement('table'); table.className='sales-table';
                        table.innerHTML = `<thead><tr><th>Item</th><th>Price</th><th>Payment</th><th>Date</th><th>Supplier</th><th>Order</th></tr></thead>`;
                        const tb=document.createElement('tbody');
                        function formatDateSafe(d){ try{ const dt = (d && typeof d.toDate==='function') ? d.toDate() : new Date(d); if(!isNaN(dt)) return dt.toLocaleString('en-GB',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'}); }catch{} return ''; }
                        data.slice(0,30).forEach(r=>{
                            const tr=document.createElement('tr'); tr.dataset.price = String(r.price||0);
                            const td=document.createElement('td');
                            const cell=document.createElement('div'); cell.className='item-cell';
                            const img=document.createElement('img'); img.className='item-thumb'; img.src=r.img; img.alt=r.name; const nm=document.createElement('div'); nm.textContent=r.name; nm.style.fontWeight='900';
                            cell.appendChild(img); cell.appendChild(nm); td.appendChild(cell); tr.appendChild(td);
                            // supplier in its color
                            let supplierLabel = 'Supplier'; let supplierHex = '#111827';
                            try { const product = Array.from(document.querySelectorAll('.product-item')).find(pi => (pi.querySelector('.product-name')?.textContent || '').trim() === r.name); const cls = product ? getSupplierClass(product) : ''; if (cls && supplierColorByClass[cls]) { supplierHex = supplierColorByClass[cls]; supplierLabel = supplierNameByClass[cls] || 'Supplier'; } } catch {}
                            const pay = (r.paymentMethod || '').toString();
                            const when = formatDateSafe(r.createdAt);
                            tr.insertAdjacentHTML('beforeend', `<td>£${r.price.toFixed(2)}</td><td>${pay}</td><td>${when}</td><td class="supplier-cell"><div class="supplier-name" style="color:${supplierHex}">${supplierLabel}</div></td><td class="sale-id">${r.id}</td>`);
                            tb.appendChild(tr);
                        });
                        table.appendChild(tb); wrapTbl.appendChild(table); card.appendChild(wrapTbl);
                        card.filterRows = (q) => {
                            let matches=0; let sum=0; const rows=card.querySelectorAll('tbody tr'); rows.forEach(r=>{ const text=r.textContent.toLowerCase(); if(!q || text.includes(q)) { r.style.display=''; matches++; sum += parseFloat(r.dataset.price||'0'); } else { r.style.display='none'; } });
                            const badge = card.querySelector('.count-badge'); if (badge) badge.textContent = `${matches} items`;
                            const tot = card.querySelector('.total-badge'); if (tot) tot.textContent = `Total £${sum.toFixed(2)}`;
                            return matches;
                        };
                        return card;
                    }

                    // Grouped rendering (e.g., week->days, month->weeks, year->months)
                    const labels = Array.isArray(groupSpec.labels) ? groupSpec.labels : [];
                    const mapFn = typeof groupSpec.mapFn === 'function' ? groupSpec.mapFn : (()=>0);
                    const groups = labels.map((label)=>{
                        const block=document.createElement('div'); block.className='subsection';
                        const h=document.createElement('div'); h.className='section-head';
                        const st=document.createElement('div'); st.className='section-title'; st.textContent=label;
                        const sc=document.createElement('div'); sc.className='count-badge'; sc.textContent='0 items';
                        const stotal=document.createElement('div'); stotal.className='total-badge'; stotal.textContent='Total £0.00';
                        h.appendChild(st); h.appendChild(sc); h.appendChild(stotal);
                        // Optional nested controls
                        const controls=document.createElement('div'); controls.className='mini-switch'; controls.style.marginLeft='auto';
                        if (groupSpec.nestedDays) {
                            const btn=document.createElement('button'); btn.type='button'; btn.className='pill'; btn.textContent='Days'; btn.setAttribute('aria-pressed','false');
                            btn.addEventListener('click', ()=>{ const next = nested.style.display==='none' ? '' : 'none'; nested.style.display = next; const isOn = next===''; btn.setAttribute('aria-pressed', isOn ? 'true' : 'false'); btn.classList.toggle('active', isOn); if (isOn) renderDays(); });
                            controls.appendChild(btn);
                        }
                        if (groupSpec.nestedWeeksDays) {
                            const wk=document.createElement('button'); wk.type='button'; wk.className='pill'; wk.textContent='Weeks'; wk.setAttribute('aria-pressed','false');
                            const dy=document.createElement('button'); dy.type='button'; dy.className='pill'; dy.textContent='Days'; dy.setAttribute('aria-pressed','false');
                            controls.appendChild(wk); controls.appendChild(dy);
                            wk.addEventListener('click', ()=>{ const a=wk.classList.toggle('active'); wk.setAttribute('aria-pressed', a?'true':'false'); renderWeeksDays(); });
                            dy.addEventListener('click', ()=>{ const a=dy.classList.toggle('active'); dy.setAttribute('aria-pressed', a?'true':'false'); renderWeeksDays(); });
                        }
                        h.appendChild(controls);
                        block.appendChild(h);
                        const wrapTbl = document.createElement('div'); wrapTbl.className='table-wrap';
                        const table = document.createElement('table'); table.className='sales-table';
                        table.innerHTML = `<thead><tr><th>Item</th><th>Price</th><th>Supplier</th><th>Order</th></tr></thead>`;
                        const tb=document.createElement('tbody'); table.appendChild(tb); wrapTbl.appendChild(table); block.appendChild(wrapTbl);
                        const nested=document.createElement('div'); nested.className='nested-breakdown'; nested.style.display='none'; nested.style.padding='8px 0 0 0'; block.appendChild(nested);
                        card.appendChild(block);
                        // Nested render helpers use visible rows
                        function collectVisibleRows(){ return Array.from(tb.querySelectorAll('tr')).filter(r=> r.style.display !== 'none'); }
                        function renderDays(){
                            const dayLabels=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
                            const vis=collectVisibleRows();
                            const sums=Array.from({length:7}, ()=>0);
                            const buckets=Array.from({length:7}, ()=>[]);
                            vis.forEach((r,idx)=>{ const p=parseFloat(r.dataset.price||'0'); const d=idx%7; sums[d]+=p; buckets[d].push(r.cloneNode(true)); });
                            nested.innerHTML='';
                            dayLabels.forEach((d,i)=>{
                                const block=document.createElement('div'); block.className='subsection';
                                const h=document.createElement('div'); h.className='section-head';
                                const st=document.createElement('div'); st.className='section-title'; st.textContent=d;
                                const sc=document.createElement('div'); sc.className='count-badge'; sc.textContent=`${buckets[i].length} items`;
                                const stt=document.createElement('div'); stt.className='total-badge'; stt.textContent=`Total £${sums[i].toFixed(2)}`;
                                h.appendChild(st); h.appendChild(sc); h.appendChild(stt); block.appendChild(h);
                                const wrapTbl=document.createElement('div'); wrapTbl.className='table-wrap';
                                const table=document.createElement('table'); table.className='sales-table'; table.innerHTML='<thead><tr><th>Item</th><th>Price</th><th>Supplier</th><th>Order</th></tr></thead>';
                                const tb2=document.createElement('tbody'); buckets[i].forEach(row=>{ tb2.appendChild(row); }); table.appendChild(tb2); wrapTbl.appendChild(table); block.appendChild(wrapTbl); nested.appendChild(block);
                            });
                        }
                        function renderWeeksDays(){
                            const vis=collectVisibleRows();
                            nested.innerHTML='';
                            const weeksOn = controls && controls.children.length>=1 && controls.children[0].textContent==='Weeks' && controls.children[0].classList.contains('active');
                            const daysOn = controls && controls.children.length>=2 && controls.children[1].textContent==='Days' && controls.children[1].classList.contains('active');
                            if (!weeksOn && !daysOn) { nested.style.display='none'; return; } else { nested.style.display=''; }
                            if (weeksOn) {
                                const sums=Array.from({length:4}, ()=>0); const buckets=Array.from({length:4}, ()=>[]);
                                vis.forEach((r,idx)=>{ const p=parseFloat(r.dataset.price||'0'); const w=idx%4; sums[w]+=p; buckets[w].push(r.cloneNode(true)); });
                                ['Week 1','Week 2','Week 3','Week 4'].forEach((w,i)=>{ const block=document.createElement('div'); block.className='subsection'; const h=document.createElement('div'); h.className='section-head'; const st=document.createElement('div'); st.className='section-title'; st.textContent=`${w} - ${label}`; const sc=document.createElement('div'); sc.className='count-badge'; sc.textContent=`${buckets[i].length} items`; const stt=document.createElement('div'); stt.className='total-badge'; stt.textContent=`Total £${sums[i].toFixed(2)}`; h.appendChild(st); h.appendChild(sc); h.appendChild(stt); block.appendChild(h); const wrapTbl=document.createElement('div'); wrapTbl.className='table-wrap'; const table=document.createElement('table'); table.className='sales-table'; table.innerHTML='<thead><tr><th>Item</th><th>Price</th><th>Supplier</th><th>Order</th></tr></thead>'; const tb2=document.createElement('tbody'); buckets[i].forEach(row=> tb2.appendChild(row)); table.appendChild(tb2); wrapTbl.appendChild(table); block.appendChild(wrapTbl); nested.appendChild(block); });
                            }
                            if (daysOn) {
                                const dayLabels=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
                                const sums=Array.from({length:7}, ()=>0);
                                const buckets=Array.from({length:7}, ()=>[]);
                                vis.forEach((r,idx)=>{ const p=parseFloat(r.dataset.price||'0'); const d=idx%7; sums[d]+=p; buckets[d].push(r.cloneNode(true)); });
                                dayLabels.forEach((d,i)=>{ const block=document.createElement('div'); block.className='subsection'; const h=document.createElement('div'); h.className='section-head'; const st=document.createElement('div'); st.className='section-title'; st.textContent=`${d} - ${label}`; const sc=document.createElement('div'); sc.className='count-badge'; sc.textContent=`${buckets[i].length} items`; const stt=document.createElement('div'); stt.className='total-badge'; stt.textContent=`Total £${sums[i].toFixed(2)}`; h.appendChild(st); h.appendChild(sc); h.appendChild(stt); block.appendChild(h); const wrapTbl=document.createElement('div'); wrapTbl.className='table-wrap'; const table=document.createElement('table'); table.className='sales-table'; table.innerHTML='<thead><tr><th>Item</th><th>Price</th><th>Supplier</th><th>Order</th></tr></thead>'; const tb2=document.createElement('tbody'); buckets[i].forEach(row=> tb2.appendChild(row)); table.appendChild(tb2); wrapTbl.appendChild(table); block.appendChild(wrapTbl); nested.appendChild(block); });
                            }
                        }
                        return { block, tb, countEl: sc, totalEl: stotal, nested, renderDays, renderWeeksDays, hasDays: !!groupSpec.nestedDays, hasWeeksDays: !!groupSpec.nestedWeeksDays };
                    });

                    data.slice(0,30).forEach((r,i)=>{
                        const gi = Math.max(0, Math.min(groups.length-1, mapFn(r,i)));
                        const g = groups[gi];
                        const tr=document.createElement('tr'); tr.dataset.price = String(r.price||0);
                        const td=document.createElement('td');
                        const cell=document.createElement('div'); cell.className='item-cell';
                        const img=document.createElement('img'); img.className='item-thumb'; img.src=r.img; img.alt=r.name; const nm=document.createElement('div'); nm.textContent=r.name; nm.style.fontWeight='900';
                        cell.appendChild(img); cell.appendChild(nm); td.appendChild(cell); tr.appendChild(td);
                        let supplierLabel = 'Supplier'; let supplierHex = '#111827';
                        try { const product = Array.from(document.querySelectorAll('.product-item')).find(pi => (pi.querySelector('.product-name')?.textContent || '').trim() === r.name); const cls = product ? getSupplierClass(product) : ''; if (cls && supplierColorByClass[cls]) { supplierHex = supplierColorByClass[cls]; supplierLabel = supplierNameByClass[cls] || 'Supplier'; } } catch {}
                        tr.insertAdjacentHTML('beforeend', `<td>£${r.price.toFixed(2)}</td><td class="supplier-cell"><div class="supplier-name" style="color:${supplierHex}">${supplierLabel}</div><div class="supplier-cost">£${r.supplier.toFixed(2)}</div></td><td class="sale-id">${r.id}</td>`);
                        g.tb.appendChild(tr);
                    });

                    // initialize counts/totals
                    groups.forEach(g=>{
                        const rows = g.tb.querySelectorAll('tr');
                        g.countEl.textContent = `${rows.length} items`;
                        let sum=0; rows.forEach(r=> sum += parseFloat(r.dataset.price||'0')); g.totalEl.textContent = `Total £${sum.toFixed(2)}`;
                        if (g.hasDays) { g.nested.style.display='none'; }
                        if (g.hasWeeksDays) { g.nested.style.display='none'; }
                    });

                    card.filterRows = (q) => {
                        let matches=0; let sectionSum=0;
                        groups.forEach(g=>{
                            let gm=0; let gs=0; const rows=g.tb.querySelectorAll('tr');
                            rows.forEach(r=>{ const text=r.textContent.toLowerCase(); if(!q || text.includes(q)) { r.style.display=''; gm++; gs += parseFloat(r.dataset.price||'0'); } else { r.style.display='none'; } });
                            g.countEl.textContent = `${gm} items`;
                            g.totalEl.textContent = `Total £${gs.toFixed(2)}`;
                            if (g.hasDays && g.nested.style.display!=='none') { g.renderDays(); }
                            if (g.hasWeeksDays && g.nested.style.display!=='none') { g.renderWeeksDays(); }
                            matches += gm; sectionSum += gs;
                        });
                        count.textContent = `${matches} items`;
                        total.textContent = `Total £${sectionSum.toFixed(2)}`;
                        return matches;
                    };
                    return card;
                }
                const dayNames=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
                const monthNames=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
                const currentMonthAbbr = monthNames[new Date().getMonth()];
                const secDay = makeSection('Sold Today', idxDay);
                const secWeek = makeSection('Sold This Week', idxWeek, { labels: dayNames, mapFn: (_r,i)=> i % 7 });
                const secMonth = makeSection('Sold This Month', idxMonth, { labels: ['Week 1','Week 2','Week 3','Week 4'].map(w=> `${w} - ${currentMonthAbbr}`), mapFn: (_r,i)=> i % 4, nestedDays: true });
                const secYear = makeSection('Sold This Year', idxYear, { labels: monthNames, mapFn: (_r,i)=> i % 12, nestedWeeksDays: true });
                const toggles = document.createElement('div'); toggles.className='range-switch';
                let currentSection = 'today';
                function updateGlobalTotal(){
                    const map={today:secDay,week:secWeek,month:secMonth,year:secYear};
                    const active = map[currentSection];
                    const rows = active.querySelectorAll('tbody tr:not([style*="display: none"])');
                    let sum=0; rows.forEach(r=>{ sum += parseFloat(r.dataset.price||'0'); });
                    totalLine.textContent = `Total £${sum.toFixed(2)}`;
                }
                ['Today','Week','Month','Year'].forEach((label, i)=>{ const key=label.toLowerCase(); const b=document.createElement('button'); b.className=`range-pill${i===0?' active':''}`; b.textContent=label; b.addEventListener('click',()=>{ toggles.querySelectorAll('.range-pill').forEach(p=>p.classList.remove('active')); b.classList.add('active'); currentSection = key; [secDay,secWeek,secMonth,secYear].forEach(s=>s.style.display='none'); ({today:secDay,week:secWeek,month:secMonth,year:secYear})[key].style.display=''; // reapply query adaptively
                    const q=(input.value||'').toLowerCase().trim(); ({today:secDay,week:secWeek,month:secMonth,year:secYear})[key].filterRows(q); resultLine.textContent = q? `${({today:secDay,week:secWeek,month:secMonth,year:secYear})[key].querySelectorAll('tbody tr:not([style*="display: none"])').length} results` : ''; updateGlobalTotal();
                }); toggles.appendChild(b); });
                wrap.appendChild(toggles);
                secWeek.style.display='none'; secMonth.style.display='none'; secYear.style.display='none';
                sections.appendChild(secDay); sections.appendChild(secWeek); sections.appendChild(secMonth); sections.appendChild(secYear);
                wrap.appendChild(sections);

                function doSearch(){
                    const q=(input.value||'').toLowerCase().trim();
                    const map={today:secDay,week:secWeek,month:secMonth,year:secYear};
                    const active = map[currentSection];
                    const results = active.filterRows(q);
                    resultLine.textContent = q ? `${results} results` : '';
                    // Update global total for current timeframe
                    const rows = active.querySelectorAll('tbody tr:not([style*="display: none"])');
                    let sum=0; rows.forEach(r=>{ sum += parseFloat(r.dataset.price||'0'); });
                    totalLine.textContent = `Total £${sum.toFixed(2)}`;
                }
                input.addEventListener('input', doSearch);
                // initialize top total
                (function(){ const rows=secDay.querySelectorAll('tbody tr'); let sum=0; rows.forEach(r=> sum += parseFloat(r.dataset.price||'0')); totalLine.textContent = `Total £${sum.toFixed(2)}`; })();

                if (viewTitle) viewTitle.textContent = 'Data';
                if (viewBody) { viewBody.innerHTML=''; viewBody.appendChild(wrap); }
            }

            // General Graph overlay (loads the combined test graph page in an iframe)
            let ggOverlay = null;
            function openGeneralGraph(){
                if (!ggOverlay){
                    ggOverlay = document.createElement('div'); ggOverlay.className='gg-overlay'; ggOverlay.innerHTML = `
                        <div class="gg-modal">
                            <button class="gg-close" aria-label="Close">×</button>
                            <iframe src="kpi-combined-test.html"></iframe>
                        </div>`;
                    document.body.appendChild(ggOverlay);
                    const close = ggOverlay.querySelector('.gg-close');
                    close.addEventListener('click', ()=> ggOverlay.classList.remove('show'));
                    ggOverlay.addEventListener('click', (e)=>{ if(e.target===ggOverlay) ggOverlay.classList.remove('show'); });
                }
                ggOverlay.classList.add('show');
            }

            // Route to renderer
            const originalOpenView = openView;
            openView = function(name, options){
                const n = (name||'').toLowerCase();
                if (n === 'catalogue') { closeView(); return; }
                if (viewOverlay){ viewOverlay.classList.add('show'); viewOverlay.setAttribute('aria-hidden','false'); ensureOverlayEdgeNav(); }
                if (viewBody) viewBody.classList.add('fading');
                setTimeout(()=>{
                    const lg = ensureStatusLegend();
                    if (n === 'status') { lg.style.display = 'flex'; renderStatus('day'); if (viewBody) viewBody.classList.remove('fading'); return; }
                    if (n === 'sales') { lg.style.display = 'none'; renderSales(options); if (viewBody) viewBody.classList.remove('fading'); return; }
                    if (n === 'data') { lg.style.display = 'none'; renderData(); if (viewBody) viewBody.classList.remove('fading'); return; }
                    originalOpenView(name); if (viewBody) viewBody.classList.remove('fading');
                }, 80);
                originalOpenView(name);
            }
            // Initial
            retagFitriteFootwear();
            annotateBargainsInCatalog();
            syncFootwearFromReference();
            syncLeatherJacketsFromReference();
            syncScarvesFromReference();
            syncGlovesFromReference();
            syncBeltsFromReference();
            syncSunglassesFromReference();
            syncBagsFromReference();
            syncAccessoriesFromReference();
            syncHatsFromReference();
            wireProductImageClicks();
            applyCategoryHeaderColors();
            update(); // sets the initial per-row increasing overlay per section
            updateValueModeDisplay();
            // Fixed search bar reveal when hovering near top edge (no clone; same element toggles)
            (function setupFixedSearchBar(){
                if (!searchContainer) return;

                let initialTop = searchContainer.getBoundingClientRect().top + window.scrollY;
                let barHeight = searchContainer.getBoundingClientRect().height || 0;
                let placeholder = document.createElement('div');
                placeholder.style.height = barHeight + 'px';
                placeholder.style.display = 'none';
                searchContainer.parentNode.insertBefore(placeholder, searchContainer.nextSibling);

                function recalcMetrics(){
                    barHeight = searchContainer.getBoundingClientRect().height || 0;
                    placeholder.style.height = barHeight + 'px';
                    if (!searchContainer.classList.contains('fixed-bar')) {
                        initialTop = searchContainer.getBoundingClientRect().top + window.scrollY;
                    }
                    recalcTrigger();
                }

                // Hover trigger: open near top; keep open while pointer is within bar area
                let hoverActive = false;
                let openThreshold = 12; // pixels from very top to open
                function recalcTrigger(){
                    const h = barHeight || 0;
                    // keep a small top threshold to open
                    openThreshold = Math.max(Math.ceil(h * 0.10), 12);
                }
                recalcTrigger();
                window.addEventListener('resize', recalcMetrics);

                function enableFixed(){
                    if (searchContainer.classList.contains('fixed-bar')) return;
                    searchContainer.classList.add('fixed-bar');
                    searchContainer.classList.remove('show');
                    placeholder.style.display = 'block';
                    // ensure it anchors to very top
                    searchContainer.style.top = '0px';
                }
                function disableFixed(){
                    if (!searchContainer.classList.contains('fixed-bar')) return;
                    searchContainer.classList.remove('fixed-bar');
                    searchContainer.classList.remove('show');
                    placeholder.style.display = 'none';
                }

                function onScroll(){
                    const scrolledPast = window.scrollY > (initialTop + barHeight);
                    if (scrolledPast) enableFixed(); else disableFixed();
                }
                window.addEventListener('scroll', onScroll, { passive: true });

                function handleMouseMove(e){
                    if (!searchContainer.classList.contains('fixed-bar')) return;
                    const rect = searchContainer.getBoundingClientRect();
                    // include the whole bar down to the results info, with 10px buffer
                    const withinBarArea = e.clientY <= (rect.bottom + 10);
                    const atTop = e.clientY <= openThreshold;

                    if (!searchContainer.classList.contains('show')) {
                        if (atTop) { hoverActive = true; searchContainer.classList.add('show'); }
                    } else {
                        if (withinBarArea) { hoverActive = true; }
                        else { hoverActive = false; searchContainer.classList.remove('show'); }
                    }
                }
                window.addEventListener('mousemove', handleMouseMove);
            })();

            // Edge navigation buttons (show on hover near edges)
            (function setupEdgeNav(){
                const btnTop = document.getElementById('edgeTop');
                const btnBottom = document.getElementById('edgeBottom');
                if (!btnTop || !btnBottom) return;

                function onMouseMove(e){
                    const nearRightEdge = (window.innerWidth - e.clientX) < 140;
                    const nearTopRight = e.clientY < 80 && nearRightEdge;
                    const nearBottomRight = (window.innerHeight - e.clientY) < 80 && nearRightEdge;
                    btnTop.classList.toggle('show', nearTopRight);
                    btnBottom.classList.toggle('show', nearBottomRight);
                }
                window.addEventListener('mousemove', onMouseMove);
                btnTop.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
                btnBottom.addEventListener('click', () => window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }));
            })();

            // Start with all categories hidden (headers and lists). Wallets stay hidden.
            (function hideWalletCategory(){
                categories.forEach((cat, idx) => {
                    const title = (cat.querySelector('.category-header h2')?.textContent || '').toLowerCase();
                    if (title.includes('wallet')) {
                        cat.dataset.forceHidden = '1';
                        cat.classList.add('hidden');
                        return;
                    }
                    // Hide everything initially; hover/click on buttons will reveal
                    cat.dataset.forceHidden = '1';
                    cat.classList.add('hidden');
                    cat.classList.add('collapsed');
                    const header = cat.querySelector('.category-header');
                    if (header) header.setAttribute('aria-expanded', 'false');
                });
                try { update(); } catch(_) {}
            })();
            // Floating emoji nav behavior: smooth-scroll and auto-expand
            (function wireFloatingCatalog(){
                const buttons = Array.from(document.querySelectorAll('.catalog-btn'));
                // Mobile-only swipe pagination for floating catalog
                const container = document.querySelector('.floating-catalog');
                const dots = document.getElementById('catalogDots');
                const dotEls = dots ? Array.from(dots.querySelectorAll('.dot')) : [];
                function updateDots(pageIdx){ dotEls.forEach((d,i)=>d.classList.toggle('active', i===pageIdx)); }
                if (container && window.matchMedia('(max-width: 600px)').matches) {
                    let startX = 0; let scrollStart = 0; let isTouch = false;
                    container.addEventListener('touchstart', (e)=>{ isTouch=true; startX = e.touches[0].clientX; scrollStart = container.scrollLeft; }, { passive:true });
                    container.addEventListener('touchmove', (e)=>{ if(!isTouch) return; const dx = startX - e.touches[0].clientX; container.scrollLeft = scrollStart + dx; }, { passive:true });
                    container.addEventListener('touchend', ()=>{ isTouch=false; const pageWidth = container.clientWidth; const page = Math.round(container.scrollLeft / pageWidth); container.scrollTo({ left: page * pageWidth, behavior: 'smooth' }); updateDots(page); }, { passive:true });
                    container.addEventListener('scroll', ()=>{ const pageWidth = container.clientWidth; const page = Math.round(container.scrollLeft / pageWidth); updateDots(page); }, { passive:true });
                    // Initialize dots
                    updateDots(0);
                }
                function getCategorySupplierColors(cat){
                    try {
                        const items = Array.from(cat.querySelectorAll('.product-item'));
                        const unique = [];
                        items.forEach((it) => {
                            const cls = getSupplierClass(it);
                            const hex = supplierColorByClass[cls];
                            if (hex && !unique.includes(hex)) unique.push(hex);
                        });
                        return unique;
                    } catch { return []; }
                }
                function setActive(btn){
                    buttons.forEach(b => b.classList.toggle('active', b === btn));
                    buttons.forEach(b => b.classList.toggle('dim', b !== btn));
                }
                function clearActive(){
                    buttons.forEach(b => { b.classList.remove('active'); b.classList.remove('dim'); });
                }
                function showHeaderOnly(btn){
                    // Instead of revealing headers, tint the page using supplier color
                    const anyActive = buttons.some(b => b.classList.contains('active'));
                    if (anyActive) return;
                    const sel = btn.getAttribute('data-target');
                    const target = sel ? document.querySelector(sel) : null;
                    if (!target) return;
                    const colors = getCategorySupplierColors(target);
                    let background;
                    if (colors.length >= 2) {
                        // Use a vivid multi-stop gradient to accentuate the transition
                        const c1 = colors[0];
                        const c2 = colors[1];
                        background = `linear-gradient(135deg, ${c1} 0%, ${c1} 20%, ${c2} 80%, ${c2} 100%)`;
                    } else {
                        const color = colors[0] || '#111827';
                        background = color;
                    }
                    const backdrop = document.getElementById('catalogHoverBackdrop');
                    if (backdrop) {
                        backdrop.style.background = background;
                        backdrop.classList.add('show');
                    }
                    // Emphasize the hovered button visually
                    btn.style.transform = 'translateY(-4px) scale(1.06)';
                    btn.style.boxShadow = '0 14px 34px rgba(0,0,0,0.28)';
                }
                function hideIfNotActive(btn){
                    const isActive = btn.classList.contains('active');
                    if (isActive) return;
                    const backdrop = document.getElementById('catalogHoverBackdrop');
                    if (backdrop) backdrop.classList.remove('show');
                    // Reset hover emphasis
                    btn.style.transform = '';
                    btn.style.boxShadow = '';
                }
                buttons.forEach((btn) => {
                    // Hover: preview header only
                    btn.addEventListener('mouseenter', function(){ showHeaderOnly(this); });
                    btn.addEventListener('mouseleave', function(){ hideIfNotActive(this); });
                    btn.addEventListener('click', function(){
                        const sel = this.getAttribute('data-target');
                        if (!sel) return;
                        const target = document.querySelector(sel);
                        if (!target) return;
                        const header = target.querySelector('.category-header');
                        const isCollapsed = target.classList.contains('collapsed');
                        // Collapse all sections first; hide headers of non-selected ones
                        categories.forEach(c => {
                            c.classList.add('collapsed');
                            c.querySelector('.category-header')?.setAttribute('aria-expanded','false');
                            if (c !== target) { c.dataset.forceHidden = '1'; c.classList.add('hidden'); }
                        });
                        if (isCollapsed) {
                            // Show only requested section
                            target.classList.add('expanding');
                            requestAnimationFrame(() => {
                                target.classList.remove('collapsed');
                                // Apply stagger index for visible items
                                const items = Array.from(target.querySelectorAll('.products-list .product-item'));
                                items.forEach((it, idx) => it.style.setProperty('--i', idx));
                                setTimeout(() => { target.classList.remove('expanding'); target.classList.add('expanded'); }, 40);
                            });
                            if (header) header.setAttribute('aria-expanded', 'true');
                            target.dataset.forceHidden = '0';
                            target.classList.remove('hidden');
                            const top = target.getBoundingClientRect().top + window.scrollY - 12;
                            window.scrollTo({ top, behavior: 'smooth' });
                            setActive(this);
                            try { update(); } catch(_) {}
                            const backdrop = document.getElementById('catalogHoverBackdrop');
                            if (backdrop) backdrop.classList.remove('show');
                        } else {
                            // If already open, close with staged animation: list first, then header fade
                            target.classList.remove('expanded');
                            target.classList.add('collapsed');
                            if (header) header.setAttribute('aria-expanded', 'false');
                            // Wait for list collapse, then fade header and finally hide category
                            const LIST_DELAY = 280; // match CSS list transition (~260ms)
                            setTimeout(() => {
                                target.classList.add('fading-header');
                                setTimeout(() => {
                                    target.classList.remove('fading-header');
                                    target.dataset.forceHidden = '1';
                                    target.classList.add('hidden');
                                }, 220); // header fade duration
                            }, LIST_DELAY);
                            clearActive();
                            try { update(); } catch(_) {}
                            const backdrop = document.getElementById('catalogHoverBackdrop');
                            if (backdrop) backdrop.classList.remove('show');
                        }
                    });
                });
            })();
        })();
    </script>
</body>
</html>